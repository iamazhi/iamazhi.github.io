(window.webpackJsonp=window.webpackJsonp||[]).push([["dx_W9i"],{dx_ACjK:function(e,n,r){},dx_AI6m:function(e,n,r){"use strict";(function(t){r.d(n,"w",(function(){return te})),r.d(n,"O",(function(){return ne})),r.d(n,"d",(function(){return ie}));var e=r("dx_lSNA"),o=r.n(e),i=r("dx_RIqP"),a=r.n(i),c=r("dx_S4QM"),s=r("dx_kbtv"),l=r("dx_MQaR"),u=r("dx_oMwe"),d=r("dx_EhUX"),f=r("dx_n2nw"),h=r("dx_t4tq"),p=r("dx_lkAv"),v=r("dx_gQqE"),m=r("dx_xXcj"),g=r("dx_E7Ec"),y=r("dx_FGyB"),b=r("dx_Ae9F"),_=r("dx_QH8b"),x=r("dx_r1qM"),k=r("dx_HdsT"),E=r("dx_CG4n"),O=r("dx_gOZ9"),S=r("dx_c07c"),C=r("dx_Ly8b"),w=r("dx_Egxe"),I=r("dx_YHmm"),T=r("dx_f3fO"),D=r("dx_Zzm9"),A=r("dx_e42K"),j=r("dx_rm8B"),R=r("dx_bHoG"),N=r("dx_GgM5"),P=r("dx_L5LT"),M=r("dx_E5Ei"),B=r("dx_MJqQ"),L=r("dx_Rvkm"),F=r("dx_YyCQ"),H=r("dx_xF4X"),W=r("dx_S6OK"),U=r("dx_f1Ip"),V=r("dx_HmzZ"),z=r("dx_yzqx"),Q=r("dx_SUdB"),G=r("dx_MUMK"),K=r("dx_OJCf"),q=r("dx_fGrr"),X=r("dx_cGa6"),Y=r("dx_tb2o"),J=" + ",Z=z.S.isMac||z.S.isIPad;function $(e){var n,r=K.P.find((function(n){return n.handler===e}));if(!r)return null;var o=[{key:r.ctrlKey,icon:Q.p},{key:r.metaKey,icon:Q.I},{key:r.shiftKey,icon:Q.n},{key:r.altKey,icon:Q.l}].filter((function(e){return e.key})),i=null!==(n=r.printKey)&&void 0!==n?n:void 0===r.key?Object(q.Q)(r.code):r.key;return[].concat(a()(o.map((function(e){return e.icon}))),[i]).join(J)}function ee(e){var n;return(n={},o()(n,Y.Q.placeholder,{isPlaceholder:!0}),o()(n,Y.Q.helpsiderbar,{Icon:c.S,description:t("explorer.help"),command:[Q.b,J,"/"].join("")}),o()(n,Y.Q.undo,{Icon:s.S,description:t("common.undo"),command:[Q.b,J,"Z"].join("")}),o()(n,Y.Q.redo,{Icon:l.S,description:t("common.redo"),command:Z?[Q.b,J,Q.n,J,"Z"].join(""):[Q.b,J,"Y"].join("")}),o()(n,Y.Q.copy,{Icon:u.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_copy_text"),command:[Q.b,J,"C"].join("")}),o()(n,Y.Q.cut,{Icon:d.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_cut_text"),command:[Q.b,J,"X"].join("")}),o()(n,Y.Q.comment,{Icon:f.S,description:t("common.comment"),command:$(G.F.onComment)}),o()(n,Y.Q.paste,{Icon:h.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_paste_text"),command:[Q.b,J,"V"].join("")}),o()(n,Y.Q.search,{Icon:p.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_AdvancedSearch_text"),command:[Q.b,J,Q.n,J,"F"].join("")}),o()(n,Y.Q.find,{Icon:v.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_Find_text"),command:[Q.b,"F"].join(J)}),o()(n,Y.Q.findreplace,{Icon:m.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_FindReplace_text"),command:[Q.b,Q.n,"H"].join(J)}),o()(n,Y.Q.mention,{Icon:g.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_mention_text"),command:"@"}),o()(n,Y.Q.newdoc,{Icon:y.S,description:t("explorer.new_doc"),command:$(G.F.onNewPage)}),o()(n,Y.Q.newsheet,{Icon:d.S,description:t("explorer.new_sheet"),command:[Q.b,J,Q.n,J,Q.l,J,"N"].join("")}),o()(n,Y.Q.bold,{Icon:b.S,description:t("common.siderbar.bold"),command:$(G.F.onBold)}),o()(n,Y.Q.italic,{Icon:_.S,description:t("common.italic"),command:$(G.F.onItalic)}),o()(n,Y.Q.underline,{Icon:x.S,description:t("common.underline"),command:$(G.F.onUnderline)}),o()(n,Y.Q.url,{Icon:k.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_url_text"),command:$(G.F.onLink)}),o()(n,Y.Q.strikethrough,{Icon:E.S,description:t("common.strikethrough"),command:$(G.F.onStrikeThrough)}),o()(n,Y.Q.color,{Icon:O.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_color_text"),command:$(G.F.onTextHighlight)}),o()(n,Y.Q.code,{Icon:S.S,description:t("common.inline_code"),command:Z?[Q.p,J,Q.b,J,"C"].join(""):[Q.p,J,Q.n,J,"C"].join("")}),o()(n,Y.Q.heading1,{Icon:C.S,description:t("common.first_level_heading"),command:[Q.b,J,Q.l,J,"1"].join("")}),o()(n,Y.Q.heading2,{Icon:w.S,description:t("common.second_level_heading"),command:[Q.b,J,Q.l,J,"2"].join("")}),o()(n,Y.Q.heading3,{Icon:I.S,description:t("common.third_level_heading"),command:[Q.b,J,Q.l,J,"3"].join("")}),o()(n,Y.Q.text,{Icon:T.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_Body_text"),command:[Q.b,J,Q.l,J,"0"].join("")}),o()(n,Y.Q.tab,{Icon:D.S,description:t("help.siderbar.increase_indentation"),command:$(G.F.onTab)}),o()(n,Y.Q.untab,{Icon:A.S,description:t("help.siderbar.reduce_indentation"),command:$(G.F.onUnTab)}),o()(n,Y.Q.alignleft,{Icon:d.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_AlignL_text"),command:$(G.F.TextAlignLeft)}),o()(n,Y.Q.alignright,{Icon:d.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_AlignR_text"),command:$(G.F.TextAlignRight)}),o()(n,Y.Q.aligncenter,{Icon:d.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_AlignC_text"),command:$(G.F.TextAlignCenter)}),o()(n,Y.Q.codeblock,{Icon:j.S,description:t("help.siderbar.code_block"),command:[Q.b,J,Q.l,J,"C"].join("")}),o()(n,Y.Q.tasklist,{Icon:(Object(X.Q)(),R.S),description:Object(X.Q)()?t("CreationDoc_Tasks_ChecklistReplaceTodo_MenuOption"):t("common.task_list"),command:[Q.b,J,Q.l,J,"T"].join("")}),o()(n,Y.Q.divider,{Icon:N.S,description:t("common.divider"),command:$(G.F.onAddDivider)}),o()(n,Y.Q.selectblock,{Icon:P.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_SelectBlock_text"),command:$(G.F.onSelectAll)}),o()(n,Y.Q.extendselectrow,{Icon:M.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_ExtendSelectRow_text"),command:[Q.n,J,"\u2191/\u2193 "].join("")}),o()(n,Y.Q.extendselectbyte,{Icon:B.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_ExtendSelectByte_text"),command:[Q.n,J,"\u2190/\u2192"].join("")}),o()(n,Y.Q.blockup,{Icon:L.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_BlockUp_text"),command:Z?[Q.p,J,Q.n,J,"\u2191"].join(""):[Q.l,J,Q.n,J,"\u2191"].join("")}),o()(n,Y.Q.blockdown,{Icon:F.S,description:t("CreationDoc_DocX_help_siderbar_shortcuts_BlockDown_text"),command:Z?[Q.p,J,Q.n,J,"\u2193"].join(""):[Q.l,J,Q.n,J,"\u2193"].join("")}),o()(n,Y.Q.quote,{Icon:H.S,description:t("common.reference"),command:$(G.F.onTurnIntoQuoteContainer)}),o()(n,Y.Q.bulleted,{Icon:W.S,description:t("common.unordered_list"),command:[Q.b,J,Q.n,J,"8"].join("")}),o()(n,Y.Q.numbered,{Icon:U.S,description:t("common.ordered_list"),command:[Q.b,J,Q.n,J,"7"].join("")}),o()(n,Y.Q.mdheading1,{Icon:C.S,description:t("common.first_level_heading"),command:["#"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdheading2,{Icon:w.S,description:t("common.second_level_heading"),command:["##"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdheading3,{Icon:I.S,description:t("common.third_level_heading"),command:["###"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdorderlist,{Icon:U.S,description:t("common.ordered_list"),command:["1."," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdunorderlist,{Icon:W.S,description:t("common.unordered_list"),command:["-"," ",t("help.siderbar.space")," ",t("help.siderbar.or")," ","*"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdtasklist,{Icon:(Object(X.Q)(),R.S),description:Object(X.Q)()?t("CreationDoc_Tasks_ChecklistReplaceTodo_MenuOption"):t("common.task_list"),command:["[]"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdtab,{Icon:D.S,description:t("help.siderbar.increase_indentation"),command:["Tab"].join("")}),o()(n,Y.Q.mduntab,{Icon:A.S,description:t("help.siderbar.reduce_indentation"),command:["Shift + Tab"].join("")}),o()(n,Y.Q.mdquote,{Icon:H.S,description:t("common.reference"),command:[">"," ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdcode,{Icon:S.S,description:t("common.inline_code"),command:["`",t("common.inline_code"),"`"].join("")}),o()(n,Y.Q.mdcodeblock,{Icon:j.S,description:t("help.siderbar.code_block"),command:t("CreationDoc_Docs_Codeblock_HotKey_Tab")}),o()(n,Y.Q.mdbold,{Icon:b.S,description:t("common.siderbar.bold"),command:["**",t("help.siderbar.text"),"** ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mditalic,{Icon:_.S,description:t("slide.toolbar.font.italic"),command:["*",t("help.siderbar.text"),"* ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdunderline,{Icon:x.S,description:t("slide.toolbar.font.underline"),command:["~",t("help.siderbar.text"),"~ ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdstrikethrough,{Icon:E.S,description:t("common.strikethrough"),command:["~~",t("help.siderbar.text"),"~~ ",t("help.siderbar.space")].join("")}),o()(n,Y.Q.mdequation,{Icon:V.S,description:t("CreationDoc_Docs_Equation.title"),command:["$$",t("help.siderbar.text"),"$$"].join("")}),o()(n,Y.Q.mddivider,{Icon:N.S,description:t("common.divider"),command:["--- ",t("help.siderbar.or")," ***"].join("")}),n)[e]}function te(){var e=document.querySelector(".navigation-bar");return e?window.getComputedStyle(e).height:"0"}function ne(){return"".concat(parseInt(te(),10)+64,"px")}var re=[Y.Q.mdheading1,Y.Q.mdheading2,Y.Q.mdheading3,Y.Q.mdorderlist,Y.Q.mdunorderlist,Y.Q.mdtasklist,Y.Q.mdtab,Y.Q.mduntab,Y.Q.mdquote,Y.Q.mdcode,Y.Q.mdcodeblock,Y.Q.placeholder,Y.Q.mdbold,Y.Q.mditalic,Y.Q.mdunderline,Y.Q.mdstrikethrough,Y.Q.mdequation,Y.Q.mddivider].map((function(e){return ee(e)})),oe=[Y.Q.undo,Y.Q.redo,Y.Q.search,Y.Q.find,Y.Q.findreplace,Y.Q.mention,Y.Q.comment,Y.Q.helpsiderbar,Y.Q.newdoc,Y.Q.placeholder,Y.Q.bold,Y.Q.italic,Y.Q.underline,Y.Q.url,Y.Q.strikethrough,Y.Q.color,Y.Q.code,Y.Q.placeholder,Y.Q.heading1,Y.Q.heading2,Y.Q.heading3,Y.Q.text,Y.Q.bulleted,Y.Q.numbered,Y.Q.quote,Y.Q.codeblock,Y.Q.tasklist,Y.Q.divider,Y.Q.placeholder,Y.Q.selectblock,Y.Q.extendselectbyte,Y.Q.extendselectrow,Y.Q.blockup,Y.Q.blockdown,Y.Q.placeholder].map((function(e){return ee(e)})),ie=[{header:t("CreationDoc_DocX_help_siderbar_shortcuts_title"),list:oe,intro:null},{header:t("import.markdown"),list:re,intro:t("help.siderbar.md_info"),headerStyle:"markdown-header"}]}).call(this,r("dx_E9Eu"))},dx_B2Pt:function(e,n,r){"use strict";r.d(n,"B",(function(){return u})),r.d(n,"N",(function(){return d}));var o=r("dx_VkAN"),i=r.n(o),a=r("dx_Dtiu"),c=r.n(a);function s(){var e=i()(["\n  height: 36px;\n  width: 36px;\n  border: 1px solid var(--line-border-card);\n  border-radius: 50%;\n  box-shadow: var(--shadow-s4-down);\n  background-color: var(--bg-body);\n  pointer-events: all;\n  font-size: 16px;\n  &:hover {\n    path {\n      fill: var(--B500);\n    }\n  }\n"]);return s=function(){return e},e}function l(){var e=i()(["\n  height: 36px;\n  width: 36px;\n  position: fixed;\n  cursor: pointer;\n  z-index: 60;\n  bottom: 38px;\n  right: 80px;\n"]);return l=function(){return e},e}var u=c.a.div(l()),d=c.a.button(s())},dx_BJva:function(e,n,r){},dx_BxH2:function(e,n,r){},dx_C5Ih:function(e,n,r){"use strict";(function(t){var e=r("dx_lSNA"),o=r.n(e),i=r("dx_lwsE"),a=r.n(i),c=r("dx_W8MJ"),s=r.n(c),l=r("dx_W7W2"),u=r.n(l),d=r("dx_a1gu"),f=r.n(d),h=r("dx_Nsbk"),p=r.n(h),v=r("dx_PcQO"),m=r("dx_h6a8"),g=r("dx_cDcd"),y=r.n(g),b=r("dx_JFWd");function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){o()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var E=v.Select.Option,O={minWidth:"166px",zIndex:2061,width:"calc(100% - 8px)"},S=function(e){u()(r,e);var n=k(r);function r(){var e;a()(this,r);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))).insertTimer=null,e.hasModifySearchTime=!1,e.state={searchTimeValue:Object(b.b)(e.props.setTime)},e.handleSetTimeCheckboxClick=Object(m.debounce)((function(n){var r=n.target.checked;e.props.onChange(x(x({},e.props),{},{isWholeDay:!r,action:r?"set_time":"un_set_time"}))})),e.handleNotifyCheckboxClick=Object(m.debounce)((function(n){var r=n.target.checked;e.props.onChange(x(x({},e.props),{},{shouldNotify:r,action:r?"set_remind":"un_set_remind"}))})),e.setSearchTimeValue=function(n){var r=Object(b.E)(n);e.hasModifySearchTime=!0,e.updateSetTime(r)},e.handleSetTimeOptionClick=function(n){var r=Object(b.b)(Number(n));e.updateSetTime(r),e.props.onChange(x(x({},e.props),{},{setTime:Number(n)}))},e.handleSetTimeVisibleChange=function(n){n||(e.hasModifySearchTime=!1)},e.handleSetTimeKeyDown=function(n){if("Enter"===n.key){var r=n.target.value;if(e.insertSetTime(r),e.hasModifySearchTime){n.preventDefault();var o=document.querySelector(".docx-reminder-popover-select input");o&&o.blur()}e.hasModifySearchTime=!1}},e.handleSetTimeBlur=function(){var n=document.querySelector(".docx-reminder-popover-select input");if(n){var r=n.getAttribute("value");e.insertSetTime(r)}},e.handleNotifyTimeChange=function(n){e.props.onChange(x(x({},e.props),{},{jetLag:Number(n)}))},e}return s()(r,[{key:"componentDidUpdate",value:function(e){e.isWholeDay!==this.props.isWholeDay&&this.updateSetTime(Object(b.b)(this.props.setTime))}},{key:"componentWillUnmount",value:function(){this.insertTimer&&clearTimeout(this.insertTimer),this.insertTimer=null}},{key:"updateSetTime",value:function(e){this.setState({searchTimeValue:e})}},{key:"insertSetTime",value:function(e){var n=this.props,r=n.isWholeDay,o=n.setTime,i=n.onChange,a=e&&Object(b.y)(e);a?i(x(x({},this.props),{},{setTime:a})):r||this.updateSetTime(Object(b.b)(o))}},{key:"renderSetTime",value:function(){var e=this.props,n=e.isWholeDay,r=e.setTime,o=e.setTimeList,i=this.state.searchTimeValue;return y.a.createElement("div",{className:"option-row set-time"},y.a.createElement(v.Checkbox,{className:"docx-reminder-popover-checkbox-label",checked:!n,onChange:this.handleSetTimeCheckboxClick},t("reminder.popover.setTime")),!n&&y.a.createElement(v.Select,{key:"setTime",showSearch:!0,allowClear:!1,className:"docx-reminder-popover-select",dropdownClassName:"docx-reminder-popover-select-list",value:r.toString(),searchValue:i,dropdownStyle:O,getPopupContainer:function(){return document.querySelector(".set-time .docx-reminder-popover-select")},onDropdownVisibleChange:this.handleSetTimeVisibleChange,onSelect:this.handleSetTimeOptionClick,onSearch:this.setSearchTimeValue,onKeyDown:this.handleSetTimeKeyDown,onBlur:this.handleSetTimeBlur,filterOption:function(){return!0}},o.map((function(e){return y.a.createElement(E,{value:e.value.toString(),key:e.text},e.text)}))))}},{key:"renderNotifyTime",value:function(){var e=this.props,n=e.shouldNotify,r=e.jetLag,o=e.jetLagList;return y.a.createElement("div",{className:"option-row jet-lag"},y.a.createElement(v.Checkbox,{className:"docx-reminder-popover-checkbox-label",checked:n,onChange:this.handleNotifyCheckboxClick},t("reminder.popover.notifyTime")),n&&y.a.createElement(v.Select,{key:"jetLag",className:"docx-reminder-popover-select",dropdownClassName:"docx-reminder-popover-select-list",allowClear:!1,value:r.toString(),dropdownStyle:O,getPopupContainer:function(){return $(".jet-lag .docx-reminder-popover-select")[0]},onSelect:this.handleNotifyTimeChange},o.map((function(e){return y.a.createElement(E,{value:e.value.toString(),key:e.text},e.text)}))))}},{key:"render",value:function(){return y.a.createElement("div",{className:"docx-reminder-popover-option-wrapper"},this.renderSetTime(),this.renderNotifyTime())}}]),r}(y.a.Component);n.S=S}).call(this,r("dx_E9Eu"))},dx_C5qJ:function(e,n,r){"use strict";(function(t){r.d(n,"g",(function(){return m})),r.d(n,"o",(function(){return g})),r.d(n,"u",(function(){return b})),r.d(n,"U",(function(){return _}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_vDqi"),s=r.n(c),l=r("dx_h6a8"),u=r("dx_bUYd"),d=r("dx_yzqx"),f=r("dx_lICl"),h=r("dx_xs2W"),p=r("dx_zEdG"),v=r("dx_g0R0");function m(e){try{if(d.S.isLarkWindow)return void Object(h.T)(e,"target");var n=window.open("_blank");if(!n)throw new Error("Can`t open new Window!");n.location.href=e}catch(r){Object(u.h)({content:t("feedback.feedback_new_window_open_fail"),errorContext:Object(v.G)(r,new Error("redirectToWeb failed"))})}}function g(){return y.apply(this,arguments)}function y(){return(y=a()(o.a.mark((function e(){var n,r,i,a,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null===(n=window)||void 0===n||null===(r=n.globalConfig)||void 0===r||null===(i=r.common)||void 0===i||null===(a=i.domain)||void 0===a?void 0:a.helpdesk,l="https://".concat(c,"/api/lark-customer-service/link"),e.abrupt("return",s.a.get(l,{params:{locale:Object(f.Q)()},withCredentials:!0}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){var e="feishu"===Object(l.get)(window,"globalConfig.common.product","feishu");return t(e?"CreationDoc_Docs_HelpCenterLink_Feishu":"CreationDoc_Docs_HelpCenterLink_Lark")}function _(e){Object(p.P)("ccm_help_panel_click",{record_id:null},{click:e,target:"none"})}}).call(this,r("dx_E9Eu"))},dx_CtN0:function(e,n,r){"use strict";r.d(n,"D",(function(){return c}));var o=r("dx_RIqP"),i=r.n(o),a=r("dx_cDcd"),c=function(e,n){var r=Object(a.useRef)(!1),o=Object(a.useRef)(n),c=Object(a.useRef)(null);return(!r.current||n&&o.current&&o.current.length>0&&o.current.some((function(e,r){return e!==n[r]})))&&(c.current=e.call.apply(e,[e].concat(i()(n))),r.current=!0),o.current=n,c.current}},dx_Cyk2:function(e){e.exports=JSON.parse('{"code":0,"msg":"success","data":{"changes":{"doxbc486aCqkIMuOo8h8ZsWzv1d":[{"change":{"revision":14,"uuid":"1e2a727e-47b1-4eb7-951d-725eefabf8e9","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|3+1b"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!22212121\\n"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|3+1b*0+7"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!22212121\\n7897878"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":13,"uuid":"0eac5b80-d1c9-486d-a48b-727ba29443bb","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+e"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!22212121"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|3+1b"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!22212121\\n"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":12,"uuid":"1fe5dec6-5ee9-45ba-898d-4634c8c85df0","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+c"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!222121"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+e"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!22212121"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":11,"uuid":"3bd6e2e5-83bd-4e0c-a96c-aa1d2b0dad19","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+9"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!222"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+c"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!222121"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":10,"uuid":"4c841a23-d735-480d-b0f5-7c96018bbc51","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+6"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+9"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!222"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":9,"uuid":"db621088-d778-4529-9199-5f35d8a2f88a","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+4"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+6"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!!!"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":8,"uuid":"e94c710d-cd77-4383-a7d5-816db148e4f0","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+1"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+4"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!!!!"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":7,"uuid":"081c9a6f-6a84-499d-a765-738b89d10338","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l*0+a"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|2+w*0+1"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB\\n!"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":6,"uuid":"0bd86a14-ac41-4d6b-b997-828b739e2516","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l*0+3"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l*0+a"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<DBNBASB"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":5,"uuid":"492416cc-9adb-4a15-82fe-42a22446cb3b","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\n"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l*0+3"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\nAS<"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":4,"uuid":"16067bd8-11e9-4c89-a629-a87fe80ea969","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0+a"},"text":{"0":"ASSABMNDBA"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0|1+l"},"text":{"0":"ASSABMNDBANSBNDBAMNS\\n"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":3,"uuid":"f4d420fa-c650-4f8c-9e6f-9c6ee728cbbe","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0+2"},"text":{"0":"AS"}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0+a"},"text":{"0":"ASSABMNDBA"}}}}}]},"user_id":6939807648791396000},{"change":{"revision":2,"uuid":"5c77ddc7-dc6b-4cd6-a4fb-f013344755fe","ops":[{"p":["text"],"action":{"od":{"apool":{"nextNum":0,"numToAttrib":{}},"initialAttributedTexts":{"attribs":{"0":""},"text":{"0":""}}},"oi":{"apool":{"nextNum":1,"numToAttrib":{"0":["author","6939807648791396371"]}},"initialAttributedTexts":{"attribs":{"0":"*0+2"},"text":{"0":"AS"}}}}}]},"user_id":6939807648791396000}],"doxbcRMPHQLZQXamSpc0PJM8Vvf":[{"change":{"revision":2,"uuid":"6494adfe-96bd-4abc-a377-43eb1b3c5845","ops":[{"p":["children",0],"action":{"li":"doxbc486aCqkIMuOo8h8ZsWzv1d"}}]},"user_id":6939807648791396000}]},"new_blocks":{"doxbc486aCqkIMuOo8h8ZsWzv1d":{"id":"doxbc486aCqkIMuOo8h8ZsWzv1d","version":1,"data":{"type":"text","parent_id":"doxbcRMPHQLZQXamSpc0PJM8Vvf","children":[],"comments":[],"locked":false,"hidden":false,"text":{"apool":{"nextNum":0,"numToAttrib":{}},"initialAttributedTexts":{"attribs":{"0":""},"text":{"0":""}}},"align":""}}}}}')},dx_D2D7:function(e,n,r){"use strict";r.r(n),r.d(n,"WikiBlockHighlightItemType",(function(){return J})),r.d(n,"WikiBlockHighlight",(function(){return ee}));var o,i,a,c,s=r("dx_o0o1"),l=r.n(s),u=r("dx_yXPU"),d=r.n(u),f=r("dx_VkAN"),h=r.n(f),p=r("dx_yG8O"),v=r.n(p),m=r("dx_lSNA"),g=r.n(m),y=r("dx_lwsE"),b=r.n(y),_=r("dx_W8MJ"),x=r.n(_),k=r("dx_PJYZ"),E=r.n(k),O=r("dx_W7W2"),S=r.n(O),C=r("dx_a1gu"),w=r.n(C),I=r("dx_Nsbk"),T=r.n(I),D=r("dx_Uyc2"),A=r.n(D),j=(r("dx_A1AB"),r("dx_FBWK")),R=r("dx_h6a8"),N=r("dx_cDcd"),P=r.n(N),M=r("dx_faye"),B=r("dx_FvGq"),L=r("dx_w0Wf"),F=r("dx_xlMp"),H=r("dx_lROi"),W=r("dx_B28d");function U(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function V(){var e=h()(["content-item-author > button"]);return V=function(){return e},e}function z(){var e=h()(["content-item-mobile-desc"]);return z=function(){return e},e}function Q(){var e=h()(["content-item-title"]);return Q=function(){return e},e}function G(){var e=h()(["content-item-mobile-title"]);return G=function(){return e},e}function K(){var e=h()(["content-item-title"]);return K=function(){return e},e}function q(){var e=h()(["content-item"]);return q=function(){return e},e}function X(){var e=h()(["content-item"]);return X=function(){return e},e}function Y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=T()(e);if(n){var i=T()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return w()(this,r)}}var J;function Z(e){return"".concat(".block-recent").concat((null===e||void 0===e?void 0:e.length)?"--".concat(e[0]):"")}function $(e){return"".concat(".block-catalog").concat((null===e||void 0===e?void 0:e.length)?"--".concat(e[0]):"")}!function(e){e[e.CATALOG=0]="CATALOG",e[e.RECENT_TITLE=1]="RECENT_TITLE",e[e.RECENT_AUTHOR=2]="RECENT_AUTHOR"}(J||(J={}));var ee=(o=Object(j.Debounce)(100),c=function(e){S()(r,e);var n=Y(r);function r(e){var o,i;b()(this,r),(i=n.call(this,e)).afterSetIsReplacingAllAnimationFrame=new L.P,i.container=void 0,i.itemStyleCache=(o={},g()(o,J.CATALOG,null),g()(o,J.RECENT_TITLE,null),g()(o,J.RECENT_AUTHOR,null),o),i.updateContainerInfo=function(){var e=i.props.blockId;i.container=i.getContainer(e),i.updateItemStyle()},v()(i,"updateInfoWithForceUpdate",a,E()(i)),i.updateItemStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultUpdateItems;i.container&&e.forEach((function(e){var n=i.getTargetElement(e,i.container);if(n){var r=getComputedStyle(n);i.itemStyleCache[e]={lineHeight:Object(H.p)(Number(r.lineHeight.replace("px",""))),fontSize:Object(H.p)(Number(r.fontSize.replace("px",""))),paddingTop:Object(H.p)(Number(r.paddingTop.replace("px","")))}}}))};var c=e.blockId;return e.blockManager.addListener(B.T,i.updateInfoWithForceUpdate,c),i.updateContainerInfo(),i}return x()(r,[{key:"componentDidMount",value:function(){this.container=this.getContainer(this.props.blockId)}},{key:"componentWillUnmount",value:function(){var e=this.props,n=e.blockId;e.blockManager.removeListener(B.T,this.updateInfoWithForceUpdate,n),this.afterSetIsReplacingAllAnimationFrame.cancel(),this.container=null}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.updateFlag!==this.props.updateFlag&&this.updateContainerInfo()}},{key:"shouldComponentUpdate",value:function(e){var n=e.selectionAPI,r=e.blockManager,o=e.rect,i=e.ranges,a=e.updateFlag,c=this.props,s=c.selectionAPI,l=c.blockManager,u=c.rect,d=c.ranges,f=c.updateFlag;return s!==n||l!==r||u!==o||a!==f||!Object(R.isEqual)(d,i)}},{key:"render",value:function(){return this.container?Object(M.createPortal)(P.a.createElement("span",{className:"block-highlight-wrap"},this.renderHighlightRanges()),this.container):null}},{key:"getContainer",value:function(e){var n=this.props.blockManager.getBlockViewByBlockIdNotCheck(e);return n?n.hostElement:null}},{key:"getHighlightType",value:function(e,n){switch(e){case W.B.WIKI_CATALOG:return J.CATALOG;case W.B.WIKI_RECENT:switch(n){case F.o.TITLE:return J.RECENT_TITLE;case F.o.AUTHOR:return J.RECENT_AUTHOR;default:throw new Error("Invalid subType is provided for blockType `wiki_recent_update`!")}default:throw new Error("Invalid blockType is provided!")}}},{key:"getItemClassnameByType",value:function(e){switch(e){case W.B.WIKI_CATALOG:return $(X());case W.B.WIKI_RECENT:return Z(q());default:throw new Error("Invalid blockType is provided!")}}},{key:"getHighlightFieldClassnameByType",value:function(e){var n=j.browser.isMobile;switch(e){case J.CATALOG:return $(K());case J.RECENT_TITLE:return Z(n?G():Q());case J.RECENT_AUTHOR:return Z(n?z():V());default:throw new Error("Invalid itemType is provided")}}},{key:"getTargetElement",value:function(e,n){var r=this.getHighlightFieldClassnameByType(e);return n.querySelector(r)}},{key:"getItemStyle",value:function(e){var n;return(null===(n=this.itemStyleCache)||void 0===n?void 0:n[e])?this.itemStyleCache[e]:this.container?(this.updateItemStyle([e]),this.itemStyleCache[e]):null}},{key:"renderLine",value:function(e,n){var r=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?U(Object(r),!0).forEach((function(n){g()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({position:"absolute",pointerEvents:"none",zIndex:1},e);return P.a.createElement("div",{key:n,className:"wiki-block-highlight",style:r})}},{key:"renderHighlightRanges",value:function(){var e=this,n=this.props,r=n.blockId,o=n.blockManager,i=n.blockType,a=n.ranges,c=o.getBlockViewByBlockId(r).hostElement.querySelectorAll(this.getItemClassnameByType(i)),s=[],l=this.container.getBoundingClientRect(),u=l.left,d=l.top;return a.forEach((function(n){var r=n.color,o=n.match,a=o.index,l=o.range,f=n.match.hasOwnProperty("blockMatchType")?n.match.blockMatchType:void 0;if(c[a]){var h=e.getHighlightType(i,f),p=e.getTargetElement(h,c[a]),v=e.getItemStyle(h);if(p&&v){var m=Object(H.Q)(p.firstChild,l,(function(e){return console.error(e)})),g=m.startTop,y=m.endBottom,b=m.startLeft,_=m.endLeft,x=p.getBoundingClientRect(),k=x.top,E=x.left,O=x.right,S=x.bottom,C=x.right;if(!(g>=S||b>=C)){var w=O-E,I=v.lineHeight,T=v.paddingTop,D=Object(R.ceil)((y-g)/I),A=k-d+Object(R.floor)((g-k)/I)*I+T;if(s.push(e.renderLine({backgroundColor:r,left:b-u,top:A,width:(1===D?Math.min(_,O):O)-b,height:I},s.length)),D>=2){for(var j=A+I,N=1;N<D-1&&!(j+I>S);N++,j+=I)s.push(e.renderLine({backgroundColor:r,top:j,left:E-u,width:w,height:I},s.length));g+(D-1)*I<=S&&s.push(e.renderLine({backgroundColor:r,top:A+(D-1)*I,left:E-u,width:Math.min(_,O)-E,height:I},s.length))}}}}})),s}},{key:"defaultUpdateItems",get:function(){switch(this.props.blockType){case W.B.WIKI_CATALOG:return[J.CATALOG];case W.B.WIKI_RECENT:return[J.RECENT_TITLE,J.RECENT_AUTHOR];default:return[]}}}]),r}(N.Component),i=c,a=A()(i.prototype,"updateInfoWithForceUpdate",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return d()(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.afterSetIsReplacingAllAnimationFrame.request();case 2:e.updateContainerInfo(),e.forceUpdate();case 4:case"end":return n.stop()}}),n)})))}}),i);n.default=ee},dx_D6Aj:function(e,n,r){"use strict";var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_TSYQ"),v=r.n(p),m=r("dx_cDcd"),g=r.n(m);r("dx_eJHT");function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var b=function(e){l()(r,e);var n=y(r);function r(){var e;i()(this,r);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).onClick=function(n){var r=!e.props.isOpen;e.props.onChange(r,n)},e}return c()(r,[{key:"render",value:function(){return g.a.createElement("div",{className:"switch-root"},g.a.createElement("div",{className:v()({switch:!0,open:this.props.isOpen}),onClick:this.onClick},g.a.createElement("div",{className:"ball"})))}}]),r}(m.Component);n.S=b},dx_DcuS:function(e,n,r){},dx_Dfm3:function(e,n,r){"use strict";r.d(n,"w",(function(){return xr}));var o,i,a,c,s=r("dx_o0o1"),l=r.n(s),u=r("dx_J4zp"),d=r.n(u),f=r("dx_yXPU"),h=r.n(f),p=r("dx_RIqP"),v=r.n(p),m=r("dx_lwsE"),g=r.n(m),y=r("dx_W8MJ"),b=r.n(y),_=r("dx_W7W2"),x=r.n(_),k=r("dx_a1gu"),E=r.n(k),O=r("dx_Nsbk"),S=r.n(O),C=r("dx_Vvd7"),w=r("dx_TSYQ"),I=r.n(w),T=r("dx_UtDZ"),D=r("dx_cDcd"),A=r.n(D),j=r("dx_Yrx2"),R=r("dx_hlsL"),N=r("dx_rQGm"),P=r("dx_xQPx"),M=r("dx_yzqx"),B=r("dx_f650"),L=r("dx_xWbU"),F=r("dx_k64k"),H=r("dx_zz3R"),W=r("dx_Bv2G"),U=r("dx_CwnG"),V=r("dx_imty"),z=r("dx_U9rT"),Q=r("dx_Xdvu"),G=r("dx_g14w"),K=r("dx_G3GD"),q=r("dx_xI7u"),X=r("dx_k9ku"),Y=r("dx_X1XY"),J=r("dx_yG8O"),Z=r.n(J),$=r("dx_PJYZ"),ee=r.n($),te=r("dx_Uyc2"),ne=r.n(te),re=(r("dx_A1AB"),r("dx_w8Jj")),oe=r("dx_uv4w");function ie(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var ae,ce,se,le,ue,de,fe,he,pe=Object(C.H)()((c=function(e){x()(r,e);var n=ie(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return e=n.call.apply(n,[this].concat(i)),Z()(e,"api",a,ee()(e)),e.subs=[],e.onEditorInit=h()(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.initClientVar();case 2:case"end":return n.stop()}}),n)}))),e}return b()(r,[{key:"init",value:function(){var e=this.api;this.subs.push(e.lifecycle.editorDidInit$.subscribe(this.onEditorInit))}},{key:"destroy",value:function(){this.subs.forEach((function(e){return e.unsubscribe()}))}},{key:"initClientVar",value:function(){var e=h()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initFullClientvars();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initFullClientvars",value:function(){var e=h()(l.a.mark((function e(){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.api,r=this.options,o=r.clientVar,e.next=4,Object(re.i)();case 4:n.getService(oe.v).applyClientVar(o,(function(e){n.modelService.setInitialData(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(C.G),i=c,a=ne()(i.prototype,"api",[C.Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=i))||o,ve=r("dx_lSNA"),me=r.n(ve),ge=r("dx_xjz2"),ye=r("dx_zjmc"),be=r("dx_B28d"),_e=r("dx_lmzW"),xe=r("dx_n8nr"),ke=r("dx_Vsac"),Ee=r("dx_EcrF"),Oe=r("dx_L9Lc"),Se=r("dx_FP3m"),Ce=r("dx_x1WV"),we=r("dx_hSCS"),Ie=r("dx_qHDV"),Te=r("dx_ppc6"),De=r("dx_uOSm"),Ae=r("dx_e46e"),je=r("dx_BLU6"),Re=r("dx_MP54"),Ne=r("dx_e6eH"),Pe=r("dx_qZ2L"),Me=r("dx_hD2y"),Be=r("dx_eyH3"),Le=r("dx_vira");function Fe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function He(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Fe(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var We,Ue,Ve,ze,Qe=Object(ge.s)(Q.a)((ce=function(){function e(){g()(this,e),this.getIsMobileEditMode=void 0,this.fold=void 0,this.clipboard=void 0,this.autoExpandCellModule=void 0,this.blockViewportAdapter=void 0,this.viewport=void 0,this.headingModule=void 0,this.layout=void 0,Z()(this,"selectionAPI",se,this),Z()(this,"config",le,this),Z()(this,"blockManager",ue,this),Z()(this,"modelService",de,this),Z()(this,"rect",fe,this),Z()(this,"eventEmitter",he,this)}return b()(e,[{key:"init",value:function(e){var n,r=e.getIsMobileEditMode,o=e.contentRef;this.getIsMobileEditMode=r;var i=this.config,a=this.blockManager,c=this.eventEmitter,s=i.get("container");this.blockViewportAdapter=new Ae.S({blockManager:a}),this.fold=new Re.S(a),this.selectionAPI.init({getContentContainer:function(){return s},boundaryAreaContainer:i.get("boundary"),pasteBoundary:s,selectionAreaContainer:document.body,unSelectableType:[be.B.SELECTION,be.B.GRID,be.B.GRID_COLUMN,be.B.VIEW,be.B.PENDING,be.B.OBJECTIVE,be.B.KEY_RESULT,be.B.PROGRESS]},this.fold),this.setupSelectionAPI(),this.viewport=new Le.o({container:i.get("boundary"),selectionAPI:this.selectionAPI,fold:this.fold,rect:this.rect,blockManager:a,eventEmitter:c}),this.headingModule=new Ne.a({blockManager:this.blockManager,eventEmitter:this.eventEmitter,modelService:this.modelService,env:Be.l.HISTORY});var l=this.toPlainObject();this.clipboard=new je.S(He(He({},l),{},{pageToken:i.get("token")})),this.autoExpandCellModule=new De.S(this.blockManager),this.layout=new Pe.S({catalogue:new Me.S,content:new Me.S(o),comment:new Me.S,editor:new Me.S((function(){return s}))}),null===(n=e.onContextInit)||void 0===n||n.call(e,this)}},{key:"toPlainObject",value:function(){return{selectionAPI:this.selectionAPI,blockManager:this.blockManager,boundary:this.boundary,fold:this.fold,editable:this.editable,editPermission:this.editPermission,isHistory:this.config.get("isHistory"),isMobileEditMode:this.isMobileEditMode,copyable:this.copyable,exportable:this.exportable,scroller:this.scroller,rect:this.rect,layout:this.layout,viewport:this.viewport,eventEmitter:this.eventEmitter,container:this.container,tokenFromWiki:this.config.get("tokenFromWiki"),blockViewportAdapter:this.blockViewportAdapter,headingModule:this.headingModule}}},{key:"destroy",value:function(){var e;this.viewport.destroy(),this.blockViewportAdapter.destroy(),this.headingModule.destroy(),this.clipboard.unmount(),this.fold.destroy(),this.autoExpandCellModule.destroy(),null===(e=this.layout)||void 0===e||e.destroy()}},{key:"setupSelectionAPI",value:function(){this.selectionAPI.register(Ie.q.startTargetFilter,Oe.R.selectionTargetFilter),this.selectionAPI.register(Ie.q.startTargetFilter,Ee.S.selectionTargetFilter),this.selectionAPI.register(Ie.q.startTargetFilter,ke.S.selectionTargetFilter),this.selectionAPI.register(Ie.q.startTargetFilter,xe.S.selectionTargetFilter),this.selectionAPI.register(Ie.q.startTargetFilter,_e.S.selectionTargetFilter),this.selectionAPI.register(Ie.q.startTargetFilter,ye.D.selectionTargetFilter)}},{key:"isMobileEditMode",get:function(){var e,n;return null!==(e=null===(n=this.getIsMobileEditMode)||void 0===n?void 0:n.call(this))&&void 0!==e&&e}},{key:"boundary",get:function(){return this.config.get("boundary")}},{key:"scroller",get:function(){return this.config.get("scroller")}},{key:"container",get:function(){return this.config.get("container")}},{key:"editable",get:function(){return this.config.get("editable")}},{key:"editPermission",get:function(){return this.config.get("editPermission")}},{key:"copyable",get:function(){return this.config.get("copyable")}},{key:"exportable",get:function(){return this.config.get("exportable")}}]),e}(),se=ne()(ce.prototype,"selectionAPI",[Te.S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=ne()(ce.prototype,"config",[C.j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=ne()(ce.prototype,"blockManager",[Ce.a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=ne()(ce.prototype,"modelService",[C.VA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=ne()(ce.prototype,"rect",[Se.z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=ne()(ce.prototype,"eventEmitter",[we.h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=ce))||ae;function Ge(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Ke=Object(C.H)({providers:[Qe]})((ze=function(e){x()(r,e);var n=Ge(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i)),Z()(e,"context",Ve,ee()(e)),e}return b()(r,[{key:"init",value:function(){this.context.init(this.options)}},{key:"destroy",value:function(){this.context.destroy()}}]),r}(C.G),Ue=ze,Ve=ne()(Ue.prototype,"context",[Q.a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=Ue))||We,qe=r("dx_k8kI"),Xe=r("dx_VAwJ"),Ye=r("dx_W3kT"),Je=r("dx_UHze"),Ze=r("dx_R53K"),$e=r("dx_W6W8"),et=r("dx_zKF3"),tt=r("dx_o54o"),nt=r("dx_bD2y"),rt=r("dx_FBn3"),ot=r("dx_W0Ov"),it=r("dx_vlKv"),at=r("dx_ApwS"),ct=r("dx_D3ws"),st=r("dx_pVRx"),lt=r("dx_MYIx"),ut=r("dx_LSbp"),dt=r("dx_SbhA"),ft=r("dx_x1xr"),ht=r("dx_yl1C"),pt=r("dx_sDWs"),vt=r("dx_NMyZ"),mt=r("dx_l8lr"),gt=r("dx_haL5"),yt=r("dx_oxJ8"),bt=r("dx_FVZU"),_t=r("dx_a7X6"),xt=r("dx_pk3x"),kt=r("dx_ooSz"),Et=r("dx_VWMO"),Ot=r("dx_E3Ia"),St=r("dx_dajS"),Ct=r("dx_tokD"),wt=r("dx_B1B9"),It=r("dx_sGRh"),Tt=r("dx_HcsW"),Dt=r("dx_L0LN");function At(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var jt,Rt=function(e){x()(r,e);var n=At(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"render",value:function(){return this.renderComponent((function(){return null}))}}]),r}(r("dx_RPzs").Y);function Nt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Pt=Object(C.H)({providers:[Tt.V]})(jt=function(e){x()(r,e);var n=Nt(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"blocks",get:function(){return[[It.R,{viewCreator:Rt,options:this.options.getTextEditorOptions()}]]}}]),r}(Dt.h))||jt,Mt=r("dx_q20L"),Bt=r("dx_T4T0"),Lt=r("dx_Z22N"),Ft=r("dx_iWIM"),Ht=r.n(Ft);function Wt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Ut,Vt,zt=function(e){x()(r,e);var n=Wt(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"renderResizableIframe",value:function(e,n){return A.a.createElement("div",{className:"diff-iframe-wrapper"},Ht()(S()(r.prototype),"renderResizableIframe",this).call(this,e,n),this.props.diffElement)}}]),r}(ke.S);function Qt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Gt=Object(C.H)({providers:[{provide:Lt.I,useClass:Bt.V,args:[be.B.IFRAME,{isAsync:!0,shouldRetain:!0,defaultHeight:220}]}]})((Vt=function(e){x()(r,e);var n=Qt(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).blocks=[[Mt.S,{viewCreator:zt}]],e}return r}(C.y),Ut=Vt))||Ut;function Kt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var qt=function(e){x()(r,e);var n=Kt(r);function r(){return g()(this,r),n.apply(this,arguments)}return r}(r("dx_NMQJ").D);qt.type=q.y.HISTROY_DRAG_PLACEHOLDER;var Xt=r("dx_MGoZ"),Yt=r("dx_aftT");function Jt(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Zt,$t=function(e){x()(r,e);var n=Jt(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).handleAnchor=function(){var n=e.snapshot.draggedTarget;n&&e.viewport.scrollToRecord(n,h()(l.a.mark((function r(){var o,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:null===(i=e.blockManager.getBlockViewsByRecordId(n)[0])||void 0===i||null===(o=i.hostElement)||void 0===o||o.scrollIntoView({behavior:"auto",block:"center"});case 2:case"end":return r.stop()}}),r)}))))},e}return b()(r,[{key:"render",value:function(){return A.a.createElement("div",{className:"placeholder-block-image-wrapper"},A.a.createElement(Yt.l,{onClickAnchor:this.handleAnchor}))}}]),r}(Xt.l);r("dx_b5b5");function en(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var tn=Object(C.H)()(Zt=function(e){x()(r,e);var n=en(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"blocks",get:function(){return[[qt,{viewCreator:$t}]]}}]),r}(C.y))||Zt,nn=r("dx_vLvZ"),rn=r("dx_H6o9"),on=r("dx_f5fh"),an=r("dx_vo6O"),cn=r("dx_V5C0"),sn=r("dx_Vau3"),ln=r("dx_EnrF"),un=r("dx_QwPC");function dn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var fn=function(e){x()(r,e);var n=dn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){return function(n){var r=n.record.snapshot,o=r.type,i=r.token,a=un.j.getData(o,i),c=Object(D.useCallback)((function(e){var n=Object(ln.Uh)(o,i)||{},r=n.subToken,a=n.mainToken;Y.r.emit(Y.X.EXTERNAL_HISTORY_RESULT_READY,{mainToken:a||"",subToken:r||"",result:e})}),[i,o]);return A.a.createElement(e,Object.assign({},n,{onHistoryResultReady:c,historyBlockVersionData:a}))}}}]),r}(sn.A),hn=r("dx_nesn");function pn(){return[].concat(v()(Object(xt.t)()),v()(Object(xt.B)([[_t.L]])))}var vn=r("dx_r2rw"),mn=r("dx_Otwn"),gn=r("dx_VjTN"),yn=r("dx_z9zT"),bn=r("dx_JsDk"),_n=r("dx_WX15");function xn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var kn=function(e){x()(r,e);var n=xn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getEffect",value:function(){var e=this;return function(n){return Object(D.useLayoutEffect)((function(){e.blockManager.layoutManager.notifyRenderFinish(n.blockId)}),[n.blockId]),null}}}]),r}(sn.A),En=r("dx_Bs5u"),On=r("dx_FDiX"),Sn=r("dx_QILm"),Cn=r.n(Sn),wn=r("dx_h6a8"),In=r("dx_faye"),Tn=r.n(In);r("dx_bs0v");function Dn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function An(e){var n=e.className,r=e.title,o=e.style,i=e.focus,a=e.hover,c=e.focusFirst,s=e.position,l=Object(D.useRef)(null),u=Object(D.useState)(!1),f=d()(u,2),h=f[0],p=f[1],v=Object(D.useState)(null),m=d()(v,2),g=m[0],y=m[1],b=a||i;Object(D.useEffect)((function(){if(b&&l.current){var e=l.current,n=e.parentElement,r=e.getBoundingClientRect(),o=n.getBoundingClientRect();r.right>o.right&&y(r.right-o.right),p(!0)}else b||p(!1)}),[b]);var _=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Dn(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({},o||{});return _.left&&null!==g&&(_.left=_.left-g),A.a.createElement("span",{className:I()("history-author-popover",n,s,{hover:a,focus:i,"focus-first":c,ready:h}),style:_,ref:l},r)}r("dx_ACjK");function jn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Rn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?jn(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Nn(e){var n=e.title,r=e.style,o=e.scroller,i=e.position,a=void 0===i?["top","left"]:i,c=e.popoverClassName,s=e.blockManager,l=e.blockId,u=Cn()(e,["title","style","scroller","position","popoverClassName","blockManager","blockId"]),f=Object(D.useCallback)((function(){var e=document.createElement("div");return e.classList.add("history-author-popover-container"),e}),[]),h=Object(D.useState)(f()),p=d()(h,1)[0],v=Object(D.useRef)(null),m=Object(D.useState)(),g=d()(m,2),y=g[0],b=g[1],_=Object(D.useState)(),x=d()(_,2),k=x[0],E=x[1],O=Object(D.useState)(),S=d()(O,2),C=S[0],w=S[1],T=Object(D.useMemo)((function(){return Object(wn.debounce)((function(e){b(e),e&&Object(X.r)("ccm_docs_history_page_click",{click:"click_hover_change_detail",target:"none"})}),10)}),[]);Object(D.useEffect)((function(){return function(){return T.cancel()}}),[T]);var j,R,N,P,B=Object(D.useCallback)((function(e){var n,r,o=e.target;(null===(n=o.closest)||void 0===n?void 0:n.call(o,".history-diff-text-highlight"))||(null===(r=o.closest)||void 0===r?void 0:r.call(o,".history-author-popover-wrapper"))!==v.current?T(!1):(e.stopPropagation(),T(!0))}),[T]),L=Object(D.useCallback)((function(e){e.target.classList.contains("history-diff-text-highlight")||(e.stopPropagation(),T(!1))}),[T]),F=Object(D.useCallback)((function(n){var r=n.changeId,o=n.isFirstDiff;e["data-history-change-id"]===r&&(E(!0),w(o))}),[e]),H=Object(D.useCallback)((function(n){var r=n.changeId;e["data-history-change-id"]===r&&(E(!1),w(!1))}),[e]);if(Object(D.useEffect)((function(){var e=o||document.body;return e.appendChild(p),function(){e.removeChild(p)}}),[p,o]),Object(D.useEffect)((function(){return Y.l6.on(Y.l.FOCUS,F),Y.l6.on(Y.l.UNFOCUS,H),function(){Y.l6.off(Y.l.FOCUS,F),Y.l6.off(Y.l.UNFOCUS,H)}}),[F,H]),v.current){var W,U=p.getBoundingClientRect();if(a.includes("top"))W=v.current.children[0].getBoundingClientRect();else{var V=v.current.children.length;W=v.current.children[V-1].getBoundingClientRect()}a.includes("left")?j=W.left-U.left:R=U.right-W.right,a.includes("top")?N=W.top-U.top:P=U.bottom-W.bottom}Object(D.useEffect)((function(){if(s&&l&&y){var e=function(){T(!1)};return s.eventEmitter.addListener(qe.b,e,l),function(){s.eventEmitter.removeListener(qe.b,e,l)}}}),[y,s,l]);var z=A.a.createElement(An,{className:c,style:Rn(Rn({},r),{},{left:j,right:R,top:N,bottom:P,backgroundColor:null===r||void 0===r?void 0:r.backgroundColor}),focus:k,hover:y,focusFirst:C,title:n,position:a});return A.a.createElement("div",Object.assign({},u,{className:I()("history-author-popover-wrapper ".concat(e.className?e.className:""),{focus:k,mobile:M.S.isMobile}),onMouseOver:B,onMouseOut:L,ref:v}),e.children,Tn.a.createPortal(z,p))}r("dx_N5RR");function Pn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Mn(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Pn(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Bn(e){var n=e.style;return A.a.createElement("div",{className:"history-diff-add-wrapper",style:Mn({},n)},e.children)}function Ln(e){var n=e.style;return A.a.createElement("div",{className:"history-diff-cover-add-wrapper"},e.children,A.a.createElement("div",{className:"history-diff-cover-add-wrapper-mask",style:Mn({},n)}))}function Fn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Hn=function(e){x()(r,e);var n=Fn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"render",value:function(){var e=this.props.style;return A.a.createElement("svg",{width:"42",height:"42",style:{height:"100%"},viewBox:"0 0 42 42",fill:null===e||void 0===e?void 0:e.fill,xmlns:"http://www.w3.org/2000/svg"},A.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.0001 17.4646L37.7939 0.670804C38.2821 0.182649 39.0735 0.182649 39.5617 0.670804L41.3294 2.43857C41.8176 2.92673 41.8176 3.71818 41.3294 4.20634L24.5357 21.0001L41.3294 37.7939C41.8176 38.2821 41.8176 39.0735 41.3294 39.5617L39.5617 41.3294C39.0735 41.8176 38.2821 41.8176 37.7939 41.3294L21.0001 24.5357L4.20634 41.3294C3.71818 41.8176 2.92673 41.8176 2.43857 41.3294L0.670804 39.5617C0.182649 39.0735 0.182649 38.2821 0.670804 37.7939L17.4646 21.0001L0.670804 4.20634C0.182649 3.71818 0.182649 2.92673 0.670804 2.43857L2.43857 0.670804C2.92673 0.182649 3.71818 0.182649 4.20634 0.670804L21.0001 17.4646Z"}))}}]),r}(D.PureComponent);r("dx_pbns");function Wn(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Un(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Wn(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wn(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Vn(e){var n=e.style,r=e.type,o=void 0===r?"block":r,i="text"===o,a=I()("history-diff-delete-wrapper","history-".concat(o),{"textual-block":i});return A.a.createElement("div",{className:a,style:Un(Un({},n),{},{backgroundColor:i?null===n||void 0===n?void 0:n.backgroundColor:void 0})},i?e.children:A.a.createElement("div",{className:"history-diff-delete-opacity-mask"},e.children),!i&&A.a.createElement("div",{key:"delete-mask",className:"history-diff-delete-mask",style:{backgroundColor:null===n||void 0===n?void 0:n.backgroundColor}},A.a.createElement("span",{className:"history-diff-delete-mask-icon"},A.a.createElement(Hn,{style:{fill:null===n||void 0===n?void 0:n.color}}))))}var zn=r("dx_cBZs");function Qn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Gn=function(e){x()(r,e);var n=Qn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){var n=this;return function(r){var o=Object(On.Y)(r.record.snapshot),i=r.record.snapshot.type;if("unknow"===i&&console.error("unknow \u662f\u5386\u53f2\u8bb0\u5f55 Block \u515c\u5e95\u7c7b\u578b\uff0c\u7531\u4e8e\u670d\u52a1\u7aef\u4fe1\u606f\u7f3a\u5931\u5bfc\u81f4\uff0c\u5c5e\u4e8e\u540e\u7aef\u95ee\u9898\u3002"),!(null!=o))return A.a.createElement(e,r);if(o===En.A.change){var a,c,s=null===(a=r.record.snapshot[En.A.change])||void 0===a?void 0:a.from,l=null===(c=r.record.snapshot[En.A.change])||void 0===c?void 0:c.to;if(Boolean(Object(On.J)(s,l,En.w)))return A.a.createElement(e,r)}var u=String(r.record.snapshot.user_id);if(!u)return A.a.createElement(e,r);var f=zn.J.getUserInfoById(u),h=f.backgroundColor,p=f.textColor,v=f.name,m=Object(En.j)(o,v),g=function(){if([En.A.add,En.A.change].includes(o))return A.a.createElement(Bn,{style:{backgroundColor:h,color:p}},A.a.createElement(e,r));if([En.A.del].includes(o)){if(r.record.snapshot.isDragged)return A.a.createElement(Bn,{style:{backgroundColor:h,color:p}},A.a.createElement(e,r));var a=En.V.has(i),c=n.blockManager.getBlockModelByBlockId(r.blockId).children;if(1===c.length&&[be.B.GRID_COLUMN].includes(i)){var s=d()(c,1)[0];a=En.V.has(s.record.snapshot.type)}return A.a.createElement(Vn,{type:a?"text":"block",style:{backgroundColor:h,color:p}},A.a.createElement(e,r))}return A.a.createElement(e,r)}();return A.a.createElement(Nn,{className:"history-diff-mark","data-history-change-id":r.recordId,title:m,style:{backgroundColor:p},scroller:n.scroller,blockManager:n.blockManager,blockId:r.blockId},g)}}}]),r}(sn.A),Kn=r("dx_bEot");function qn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Xn=function(e){x()(r,e);var n=qn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){var n=this;return function(o){var i=Ht()(S()(r.prototype),"getWrapper",n).call(n,e);if(o.record.snapshot.type!==be.B.TABLE)return i(o);if(Object(On.Y)(o.record.snapshot)!==En.A.change)return i(o);var a=Object(Kn.u)(o.record.snapshot[En.A.change]),c=a.isAddCell,s=a.isDelCell;return c||s?A.a.createElement(e,o):i(o)}}}]),r}(Gn);function Yn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var Jn=function(e){x()(r,e);var n=Yn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){var n=this;return function(r){var o=r.record.snapshot.type;if(o!==be.B.CELL)return A.a.createElement(e,r);var i=r.record.snapshot.parent_id,a=n.blockManager.getRecord(i).snapshot;if(Object(On.Y)(a)!==En.A.change)return A.a.createElement(e,r);var c=Object(Kn.u)(a[En.A.change]),s=c.changedCellBlockIds,l=c.isAddCell,u=c.isDelCell;if(!l&&!u)return A.a.createElement(e,r);if(-1===s.indexOf(r.record.id))return A.a.createElement(e,r);var f=String(a.user_id);if(!f)return A.a.createElement(e,r);var h=zn.J.getUserInfoById(f),p=h.backgroundColor,v=h.textColor,m=h.name,g=l?En.A.add:En.A.del,y=Object(En.j)(g,m),b=function(){if(l)return A.a.createElement(Bn,{style:{backgroundColor:p,color:v,margin:0,borderRadius:"initial"}},A.a.createElement(e,r));if(u){var i=!0,a=n.blockManager.getBlockModelByBlockId(r.blockId).children;if(1===a.length&&[be.B.GRID_COLUMN].includes(o)){var c=d()(a,1)[0];i=En.V.has(c.record.snapshot.type)}return A.a.createElement(Vn,{type:i?"text":"block",style:{backgroundColor:p,color:v,margin:0,borderRadius:"initial"}},A.a.createElement(e,r))}return A.a.createElement(e,r)}();return A.a.createElement(Nn,{className:"history-diff-mark","data-history-change-id":r.recordId,title:y,style:{backgroundColor:v},scroller:n.scroller,blockManager:n.blockManager,blockId:r.blockId},b)}}}]),r}(Gn);r("dx_UVHa");function Zn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var $n=function(e){x()(r,e);var n=Zn(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getAfterSlot",value:function(){var e=this;return function(n){var r=Object(D.useState)(),o=d()(r,2),i=o[0],a=o[1],c=Object(D.useState)(),s=d()(c,2),l=s[0],u=s[1],f=Object(D.useState)(),h=d()(f,2),p=h[0],v=h[1],m=Object(D.useState)(),g=d()(m,2),y=g[0],b=g[1],_=Object(D.useState)(),x=d()(_,2),k=x[0],E=x[1],O=Object(D.useState)(),S=d()(O,2),C=S[0],w=S[1],I=Object(D.useState)(),T=d()(I,2),j=T[0],R=T[1];return Object(D.useEffect)((function(){var r=e.blockManager.getBlockViewByBlockId(n.blockId);R(r);var o=r.props.record.snapshot,i=o[En.A.change],c=Object(On.J)(null===i||void 0===i?void 0:i.from,null===i||void 0===i?void 0:i.to,En.w);if(c){a(Boolean(c)),E(c);var s=o.type;w(s);var l=String(o.user_id);if(l){var d=zn.J.getUserInfoById(l),f=d.backgroundColor,h=d.textColor,p=d.name,m=Object(En.j)(En.A.change,p);u(m),v(f),b(h)}}}),[n.blockId]),j&&i?A.a.createElement(Nn,{className:"history-diff-mark slot","data-history-change-id":j.props.recordId,title:l,style:{backgroundColor:y},scroller:e.scroller,blockManager:e.blockManager,blockId:n.blockId},A.a.createElement("div",{className:"history-diff-alignable-highlight","data-block-type":C,"data-change-type":k,style:{backgroundColor:p,borderBottom:"2px solid ".concat(y)}})):null}}}]),r}(sn.A);r("dx_IH9J");function er(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function tr(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?er(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function nr(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var rr=function(e){x()(r,e);var n=nr(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){var n=this;return function(r){var o=Object(D.useRef)(null),i=Object(D.useState)([]),a=d()(i,2),c=a[0],s=a[1],l=Object(D.useRef)([]),u=Object(D.useRef)(null),f=Object(D.useCallback)((function(e){var r=null!==e&&void 0!==e?e:u.current;r&&s((function(e){var o=e.findIndex((function(e){return e.changeId===r}));if(o<0)return e;var i=e[o];return i.hover=!1,n.blockManager.eventEmitter.removeListener(qe.b,f,i.blockId),u.current=null,v()(e)}))}),[]),h=Object(D.useCallback)((function(e){if(e.target instanceof HTMLElement){var r=e.target.closest(".history-diff-text-highlight");if(r){var o=r.dataset.historyChangeId,i=c.findIndex((function(e){return e.changeId===o}));if(!(i<0)){var a=c[i];a.hover=!0,n.blockManager.eventEmitter.addListener(qe.b,f,a.blockId),u.current=o,s(v()(c))}}}}),[c]),p=Object(D.useCallback)((function(e){if(e.target instanceof HTMLElement){var n=e.target.closest(".history-diff-text-highlight");if(n){e.stopPropagation();var r=n.dataset.historyChangeId;f(r)}}}),[c]),m=Object(D.useCallback)((function(e){var n=e.detail,r=n.authorId,o=n.changeId,i=n.editType,a=n.setFocus,c=n.editor,u=n.start,d=n.end,f=n.blockId,h=l.current.findIndex((function(e){var n=e.changeId;return o===n})),p=zn.J.getUserInfoById(r),m=Object(En.j)(i,p.name),g={authorId:r,changeId:o,title:m,start:u,end:d,editor:c,userInfo:p,setFocus:[a],blockId:f};if(h>-1){var y=l.current[h];return y.setFocus.push(a),l.current[h]=tr(tr({},g),{},{start:y.start,setFocus:y.setFocus}),void s(v()(l.current))}l.current=[].concat(v()(l.current),[g]),s(v()(l.current))}),[]),g=Object(D.useCallback)((function(e){var n=e.changeId,r=e.isFirstDiff,o=c.findIndex((function(e){return e.changeId===n}));o<0||(c[o].focus=!0,c[o].focusFirst=r,c[o].setFocus.forEach((function(e){return e(!0,r)})),c[o].editor.once("paint",(function(){s(v()(c))})))}),[c]),y=Object(D.useCallback)((function(e){var n=e.changeId,r=c.findIndex((function(e){return e.changeId===n}));r<0||(c[r].focus=!1,c[r].focusFirst=!1,c[r].setFocus.forEach((function(e){return e(!1)})),c[r].editor.once("paint",(function(){s(v()(c))})))}),[c]);!function(e){var n=Object(D.useRef)(!0),r=Object(D.useRef)();n.current&&(r.current=e()),n.current=!1,Object(D.useEffect)((function(){return function(){var e;null===(e=r.current)||void 0===e||e.call(r)}}),[])}((function(){return Y.r.on(Y.k,m),function(){Y.r.off(Y.k,m)}})),Object(D.useEffect)((function(){return Y.l6.on(Y.l.FOCUS,g),Y.l6.on(Y.l.UNFOCUS,y),function(){Y.l6.off(Y.l.FOCUS,g),Y.l6.off(Y.l.UNFOCUS,y)}}),[m,g,y]);var b=c.map((function(e){var n=e.userInfo,r=e.title,i=e.hover,a=e.focus,c=e.focusFirst,s=e.start,l=e.editor,u=e.changeId;if(!o.current)return null;var d={top:0,left:0};if(a||i){l.rectModule.clearCache();var f=l.rectModule.getRangeRect({start:s,end:s});d=function(e,n){var r=e.getRect("0"),o=n.left,i=n.top,a=n.bottom,c=n.right,s=n.width,l=n.height;return{left:r.left+o,top:r.top+i,right:r.left+c,bottom:r.top+a,width:s,height:l}}(l,f)}var h=o.current.getBoundingClientRect(),p=d.left-h.left,v={style:{top:d.top-h.top,left:p,backgroundColor:n.textColor},title:r,hover:i,focus:a,focusFirst:c};return A.a.createElement(An,Object.assign({key:u},v))}));return A.a.createElement("div",{className:"history-diff-text-highlight-extension",ref:o,onMouseOver:h,onMouseOut:p},A.a.createElement("div",{className:"history-diff-text-highlight-extension-popovers"},b),A.a.createElement(e,r))}}}]),r}(sn.A);function or(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var ir=function(e){x()(r,e);var n=or(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getEffect",value:function(){return function(e){var n=e.recursionProps.scroller,r=e.record.snapshot,o=r.user_id,i=r[En.A.change];if(i){var a=zn.J.getUserInfoById(o);Y.r.emit(Y.h.SEND_COVER_INFO,{userInfo:a,change:i,recordId:e.recordId,scroller:n})}}}}]),r}(sn.A);r("dx_rzlF");function ar(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var cr=function(e){x()(r,e);var n=ar(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"getWrapper",value:function(e){var n=this;return function(o){var i=Ht()(S()(r.prototype),"getWrapper",n).call(n,e);if(o.record.snapshot.type!==be.B.IFRAME)return i(o);if(!(o.record.snapshot.iframe||{}).is_modified)return i(o);var a=Object(On.Y)(o.record.snapshot);if(!(null!=a))return A.a.createElement(e,o);if(a===En.A.change){var c,s,l=null===(c=o.record.snapshot[En.A.change])||void 0===c?void 0:c.from,u=null===(s=o.record.snapshot[En.A.change])||void 0===s?void 0:s.to;if(Boolean(Object(On.J)(l,u,En.w)))return A.a.createElement(e,o)}var d=String(o.record.snapshot.user_id);if(!d)return A.a.createElement(e,o);var f=zn.J.getUserInfoById(d),h=f.backgroundColor,p=f.textColor,v=f.name,m=Object(En.j)(a,v),g={backgroundColor:h,color:p},y=[En.A.add,En.A.change].includes(a)?A.a.createElement(Bn,{style:g}):[En.A.del].includes(a)?o.record.snapshot.isDragged?A.a.createElement(Bn,{style:g}):A.a.createElement(Vn,{type:"block",style:g}):null,b=A.a.createElement(Nn,{className:"history-diff-mark history-diff-resize-iframe","data-history-change-id":o.recordId,title:m,style:{backgroundColor:p},scroller:n.scroller,blockManager:n.blockManager,blockId:o.blockId},y);return A.a.createElement(e,Object.assign({},o,{diffElement:b}))}}}]),r}(Gn),sr=r("dx_r4mc");function lr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function ur(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?lr(Object(r),!0).forEach((function(n){me()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var dr,fr=function(e){var n=[[Gn,e]],r=[_n.S,e],o=[mn.S,e],i=function(e){return[[hn.S,e]]}(e),a=[$n,e],c=[rr,e],s=[fn,e],l=[Xn,e],u=[Jn,e],d=[cr,e],f=[kn,e],h=[].concat(n,[o]),p=[].concat(n,[r,o],v()(i),[a]),m=[].concat(n,[[_n.S,ur(ur({},e),{},{alwaysShowTooltip:!1,disableTooltip:!0})],o],v()(i),[a]),g=[].concat(v()(m),[[Ne.i,e]]),y=[sr.S,e],b=[].concat(v()(p),[y]),_=v()(p),x=[].concat(n,[[vn.S,e]]),k=[].concat(n,v()(Object(nn.W)(be.B.IMAGE,e))),E=[].concat(n,[[rn.R,ur(ur({},e),{},{displayMode:be.J.BLOCK,autoNotifyRenderFinish:!0})],[vn.S,e],[gn.S,e]]),O=[d,[rn.R,ur(ur({},e),{},{displayMode:be.J.BLOCK})]],S=[].concat(n,[[gn.S,e],a]),w=[].concat(n,v()(function(e){return[].concat(v()(Object(nn.W)(be.B.SHEET,e,{overrideProps:[[rn.R,{autoNotifyRenderFinish:!0}]]})),[[fn,e]])}(e))),I=[].concat(n,v()(function(e){return[].concat(v()(Object(nn.W)(be.B.BITABLE,e,{overrideProps:[[rn.R,{autoNotifyRenderFinish:!0}]]})),[[fn,e]])}(e))),T=[].concat(n,v()(Object(nn.W)(be.B.MINDMAP,e,{overrideProps:[[rn.R,{autoNotifyRenderFinish:!0}]]})),[s,[gn.S,e]]),D=[].concat(n,[[rn.R,ur(ur({},e),{},{displayMode:be.J.BLOCK})],[vn.S,e]]),A=[].concat(v()(Object(nn.W)(be.B.TABLE,e,{overrideProps:[[yn.S,bn.R.historyScrollableOptions]]})),[l,f]),j=[u],R=[].concat(n,v()(Object(nn.W)(be.B.FILE,e)),[[gn.S,e]]),N=[].concat(n,v()(Object(nn.W)(be.B.CHAT_CARD,e)),[[gn.S,e]]),P=[].concat(n,v()(i),[[gn.S,e]]),M=[c],B=[].concat(n,[[rn.R,ur(ur({},e),{},{displayMode:be.J.BLOCK,autoNotifyRenderFinish:!0})],[vn.S,ur(ur({},e),{},{isEffectiveInPart:!0})]]),L=[[ir,e]],F=[].concat(n,[[vn.S,e],[gn.S,e]]);return[[C.P,L],[be.B.PAGE,M],[be.B.TEXT,p],[be.B.HEADING1,g],[be.B.HEADING2,g],[be.B.HEADING3,g],[be.B.HEADING4,g],[be.B.HEADING5,g],[be.B.HEADING6,g],[be.B.HEADING7,g],[be.B.HEADING8,g],[be.B.HEADING9,g],[be.B.IMAGE,k],[be.B.FILE,R],[be.B.IFRAME,O],[be.B.BLANK,n],[be.B.CHAT_CARD,N],[be.B.BULLET,_],[be.B.DIVIDER,x],[be.B.QUOTE,h],[be.B.CALLOUT,S],[be.B.CODE,P],[be.B.ORDERED,b],[be.B.GRID,n],[be.B.GRID_COLUMN,n],[be.B.TODO,p],[be.B.FALLBACK,n],[be.B.DIAGRAM,E],[be.B.TABLE,A],[be.B.CELL,j],[be.B.SHEET,w],[be.B.BITABLE,I],[be.B.MINDMAP,T],[be.B.ISV,D],[be.B.POLL,B],[be.B.OKR,n],[be.B.TASK,n],[be.B.BOOKMARK,F],[be.B.QUOTE_CONTAINER,n],[be.B.VIEW,n],[be.B.JIRA_ISSUE,n],[be.B.WIKI_CATALOG,n],[be.B.WIKI_RECENT,n]]};function hr(){return[].concat(v()(Object(xt.D)()),v()(Object(xt.B)([[_t.L]])))}function pr(){return Object(xt.B)([[Xe.R,{authorId:Object(Je.K)().userId||""}],[_t.Rf],[_t.Z],[_t.hi],[_t.hS],[_t.q],[_t.W],[_t.L],[Ye.j]])}function vr(){return[Object(C.Y)(pt.i,{getTextEditorOptions:pn}),Object(C.Y)(Pt,{getTextEditorOptions:pr}),Object(C.Y)(bt.T,{getTextEditorOptions:hr}),Object(C.Y)(at.R,{getTextEditorOptions:hr}),Object(C.Y)(mt.y,{getTextEditorOptions:hr}),Object(C.Y)(dt.D,{getTextEditorOptions:hr}),Object(C.Y)(ut.a,{getTextEditorOptions:hr}),Object(C.Y)(kt.Y,{getTextEditorOptions:hr}),Object(C.Y)(rt.S),Object(C.Y)($e.G),Object(C.Y)(st.S),Object(C.Y)(ft.S),Object(C.Y)(nt.S),Object(C.Y)(ht.S,{getTextEditorOptions:xt.D}),Object(C.Y)(yt.Y),Object(C.Y)(lt.o),Object(C.Y)(tn),Object(C.Y)(vt.Q),Object(C.Y)(Ot.Z),Object(C.Y)(St.l),Object(C.Y)(ot.S),Object(C.Y)(Et.S),Object(C.Y)(ct.S),Object(C.Y)(Gt),Object(C.Y)(et.S),Object(C.Y)(Ze.S),Object(C.Y)(it.w),Object(C.Y)(gt.A),Object(C.Y)(tt.T),Object(C.Y)(wt.S),Object(C.Y)(Ct.B,{getExtensions:fr})].concat(v()([Object(C.Y)(an.S),Object(C.Y)(on.S),Object(C.Y)(cn.u,{loadableBlockTypes:[be.B.SHEET,be.B.BITABLE,be.B.MINDMAP,be.B.FILE,be.B.CODE]})]))}function mr(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var gr=(dr={},me()(dr,En.A.add,Ln),me()(dr,En.A.change,Ln),me()(dr,En.A.del,Vn),dr);var yr=r("dx_WATO");r("dx_aaXo"),r("dx_S4is");function br(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=S()(e);if(n){var i=S()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return E()(this,r)}}var _r=function(e){var n;return n=function(n){x()(o,n);var r=mr(o);function o(){var e;g()(this,o);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=r.call.apply(r,[this].concat(i))).state={editType:null,userInfo:null,recordId:""},e.scroller=void 0,e.listenCoverInfo=function(n){var r=n.userInfo,o=n.change,i=n.recordId,a=n.scroller;e.scroller=a;var c=function(){var e,n,r,i,a,c;return!(null===(e=o.from)||void 0===e?void 0:e.cover)&&(null===(n=o.to)||void 0===n?void 0:n.cover)?En.A.add:(null===(r=o.from)||void 0===r?void 0:r.cover)&&!(null===(i=o.to)||void 0===i?void 0:i.cover)?En.A.del:(null===(a=o.from)||void 0===a?void 0:a.cover)&&(null===(c=o.to)||void 0===c?void 0:c.cover)?En.A.change:null}();e.setState({editType:c,userInfo:r,recordId:i})},e}return b()(o,[{key:"componentDidMount",value:function(){Y.r.on(Y.h.SEND_COVER_INFO,this.listenCoverInfo)}},{key:"componentWillUnmount",value:function(){Y.r.off(Y.h.SEND_COVER_INFO,this.listenCoverInfo)}},{key:"renderContent",value:function(){var n=this.state,r=n.editType,o=n.userInfo,i=n.recordId;if(!r||!o)return A.a.createElement(e,this.props);var a=o.coverColor,c=o.backgroundColor,s=o.textColor,l=o.name,u={className:"history-diff-mark slot","data-history-change-id":i,title:Object(En.j)(r,l),style:{backgroundColor:s},scroller:this.scroller,position:["bottom","left"],popoverClassName:"cover"},d=gr[r],f={type:"cover",style:{border:r!==En.A.del?"4px solid ".concat(a):void 0,color:s,backgroundColor:r===En.A.del?c:void 0}};return A.a.createElement(Nn,u,A.a.createElement(d,f,A.a.createElement(e,this.props)))}},{key:"render",value:function(){return this.renderContent()}}]),o}(D.Component),n}(R.S),xr=function(e){x()(r,e);var n=br(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).editor=null,e.scroller=null,e.historyContainerName=q.v,e.historyContainer=A.a.createRef(),e.preHistoryChangeTarget=null,e.reactReduxContext=void 0,e.state={refreshing:!1},e.container=null,e.highlightChangeIds=[],e.handleMount=function(n){var r,o=e.props.onMount;(e.editor=n,e.blockManager)&&(e.blockManager.editorAPI.getService(z.i).getDepLoader(e.scroller).preloadBridge(!0),null===(r=e.props.historyExternalChangeManager)||void 0===r||r.injectBlockManager(e.blockManager));null===o||void 0===o||o()},e.handleUnmount=function(){var n=e.props.onUnmount;null===n||void 0===n||n()},e.refreshEditor=function(n){n===e.props.token&&(Object(H.l)("".concat(n,"-").concat(W.q.REFERENCE_ALL)),e.setState({refreshing:!0},(function(){e.setState({refreshing:!1})})))},e._getScroller=function(n){var r=e.historyContainerName;if(!r)return n;if("string"===typeof r){var o=".".concat(r);return n.closest(o)||n}return n},e.createDocxEditor=function(n){e.container=n,e.scroller=e._getScroller(n);var r=Object(F.F)(T.store.getState()),o={token:e.props.token,boundary:e.scroller,editable:!1,copyable:r,scroller:e.scroller,isHistory:!0,container:n,editPermission:!1,reactReduxContext:e.reactReduxContext,isPreview:!0};return Object(j.U)({config:o,rendererOptions:{BlockContextProvider:function(n){return Object(B.I)(e.reactReduxContext,n)},layoutConfig:{scroller:e.scroller,errorFrom:"history"},ErrorBoundary:yr.K},modules:[Object(C.Y)(Ke,{contentRef:function(){return e.historyContainer.current},getIsMobileEditMode:function(){return!1},onContextInit:function(n){var r=n.eventEmitter;null===r||void 0===r||r.on(V.H.RefreshEditor,e.refreshEditor)},onContextDestroy:function(n){n.eventEmitter.off(V.H.RefreshEditor,e.refreshEditor)}}),Object(C.Y)(pe,{clientVar:e.props.clientVar})].concat(v()(vr()))})},e}return b()(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.blockManager&&this.blockManager.dispatch(N.Y),null}},{key:"componentDidMount",value:function(){window.HistoryEditor=this}},{key:"componentDidUpdate",value:function(e){var n,r,o,i=null===(n=this.editor)||void 0===n||null===(r=n.editor)||void 0===r?void 0:r.api;i&&i.getService(Q.a).clipboard.update({copyable:Object(F.F)(T.store.getState()),editable:!1});(e.minHeight!==this.props.minHeight&&this.setMinHeight(this.props.minHeight),e.clientVar!==this.props.clientVar)&&(this.historyContainer.current&&(this.historyContainer.current.scrollTop=0),null===(o=this.eventEmitter)||void 0===o||o.emit(V.H.RefreshEditor,e.token));this.shouldUpdateHighlightPlay(e)&&this.setHighlightTargetInDom()}},{key:"componentWillUnmount",value:function(){window.HistoryEditor=null,this.container=null,delete window.fold}},{key:"shouldUpdateHighlightPlay",value:function(e){return e.historyChangeTarget!==this.props.historyChangeTarget}},{key:"setHighlightTargetInDom",value:function(){var e=h()(l.a.mark((function e(){var n,r,o,i,a,c,s,u,f,p,m,g,y,b=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.historyChangeTarget){e.next=4;break}return this.preHistoryChangeTarget=null,e.abrupt("return");case 4:if("external"===(null===(n=this.preHistoryChangeTarget)||void 0===n?void 0:n.type)&&(s=this.preHistoryChangeTarget.recordId,null===(c=this.blockManager)||void 0===c||c.getBlockViewsByRecordId(s).map((function(e){var n,r;return null===(n=(r=e).clearHighlightHistory)||void 0===n?void 0:n.call(r)}))),u=(null===(r=this.blockManager)||void 0===r?void 0:r.getBlockIdsByRecordId(a.recordId))||[],f=d()(u,1),p=f[0]){e.next=8;break}return e.abrupt("return");case 8:for(m=(null===(o=this.blockManager)||void 0===o?void 0:o.getBlockModelByBlockId(p))||null,g=[];m;)null===(y=this.blockManager)||void 0===y||y.dispatch(qe.v.ADD,m.id),g.push(m.id),m=m.parent;return e.next=13,null===(i=this.viewport)||void 0===i?void 0:i.scrollToBlock(p,function(){var e=h()(l.a.mark((function e(n){var r,o,i,c,s,u,d,f,h,m,y,_;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(r=b.blockManager)||void 0===r?void 0:r.getBlockViewByBlockId(p),c=null===i||void 0===i?void 0:i.hostElement,"external"!==(null===a||void 0===a?void 0:a.type)){e.next=7;break}return null===c||void 0===c||c.scrollIntoView({behavior:"auto",block:"center"}),f=null===(s=b.rect)||void 0===s?void 0:s.getBlockRect(p),null===(u=(d=i).highlightHistory)||void 0===u||u.call(d,f.top),e.abrupt("return");case 7:if(h=!a.id.startsWith("change_id_"),m=null,h?((m=null===c||void 0===c?void 0:c.querySelector('.history-diff-mark.slot[data-history-change-id="'.concat(a.id,'"]')))||(m=null===c||void 0===c?void 0:c.querySelector('.history-diff-mark[data-history-change-id="'.concat(a.id,'"]'))),m||(m=document.querySelector(".docx-history-content > .history-cover-wrapper "+'.history-diff-mark[data-history-change-id="'.concat(a.id,'"]')))):m=null===c||void 0===c?void 0:c.querySelector('.history-diff-mark[data-history-change-id="'.concat(a.id,'"]')),setTimeout((function(){b.clearHighlightDom(),Y.l6.emit(Y.l.FOCUS,{changeId:a.id,isFirstDiff:!0}),a.siblings.forEach((function(e){Y.l6.emit(Y.l.FOCUS,{changeId:e})})),b.setHighlightDom([a.id].concat(v()(a.siblings)))})),null===(o=m)||void 0===o||o.scrollIntoView({behavior:"auto",block:"center"}),!m||!document.contains(m)){try{Object(X.r)("docx_history_dev",{action:"jump_target_change_failed",data:JSON.stringify({activatedNodes:g.map((function(e){return Object(U.H)(e,b.blockManager)}))})})}catch(l){Object(X.r)("docx_history_dev",{action:"get_block_view_error",data:JSON.stringify({message:l.message,stack:l.stack})})}_=n+((null===(y=document.querySelector(".docx-history-container .doc-cover-image-wrapper"))||void 0===y?void 0:y.clientHeight)||0),b.scroller&&(b.scroller.scrollTop=_)}return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 13:g.forEach((function(e){var n;null===(n=b.blockManager)||void 0===n||n.dispatch(qe.v.REMOVE,e)})),this.preHistoryChangeTarget=a;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setHighlightDom",value:function(e){this.highlightChangeIds=e}},{key:"clearHighlightDom",value:function(){this.highlightChangeIds.forEach((function(e){Y.l6.emit(Y.l.UNFOCUS,{changeId:e})})),this.highlightChangeIds=[]}},{key:"setMinHeight",value:function(e){var n=P.s.enable_page_min_height,r=this.blockManager;if(r&&n){var o=r.rootBlockId,i=r.getBlockViewByBlockId(o);i&&i.hostElement&&i.hostElement.setAttribute("style","min-height: ".concat(e,"px"))}}},{key:"render",value:function(){var e,n,r=this,o=I()([this.historyContainerName,this.props.className,"uneditable"]),i=this.props.clientVar.block_map[this.props.token],a=null===i||void 0===i?void 0:i.data.cover,c=null===i||void 0===i||null===(e=i.data.__edit_change)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.cover,s=Object(G.M)(a||c),l=M.S.isMobile?L.M.StandardWidth:(null===i||void 0===i?void 0:i.data.width_mode)||L.M.StandardWidth,u=I()(["docx-history-content-item",{mobile:M.S.isMobile,"full-width":l===L.M.FullWidth}]);return this.state.refreshing?null:A.a.createElement("div",{className:o,ref:this.historyContainer},A.a.createElement("div",{id:"history-docx-popup-container"}),A.a.createElement("div",{className:"history-cover-wrapper"},A.a.createElement(_r,{isHistory:!0,coverInfo:s,scrollContainer:this.scroller})),A.a.createElement(B.l,{store:T.store},(function(e){return r.reactReduxContext=e,A.a.createElement(K.u,{className:u,createDocxEditor:r.createDocxEditor,onMount:r.handleMount,onUnmount:r.handleUnmount})})))}},{key:"editorContext",get:function(){var e,n;return null===(e=this.editor)||void 0===e||null===(n=e.editor)||void 0===n?void 0:n.api.getService(Q.a)}},{key:"blockManager",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.blockManager}},{key:"eventEmitter",get:function(){var e;return null===(e=this.blockManager)||void 0===e?void 0:e.eventEmitter}},{key:"selectionAPI",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.selectionAPI}},{key:"viewport",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.viewport}},{key:"fold",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.fold}},{key:"rect",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.rect}},{key:"blockViewportAdapter",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.blockViewportAdapter}},{key:"autoExpandCellModule",get:function(){var e;return null===(e=this.editorContext)||void 0===e?void 0:e.autoExpandCellModule}}]),r}(A.a.Component)},dx_EGGJ:function(e,n,r){},dx_EOdM:function(e,n,r){},dx_EWJh:function(e,n,r){"use strict";(function(t){var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_J4zp"),s=r.n(c),l=r("dx_i1NP"),u=r("dx_O6O8"),d=r("dx_R53R"),f=r("dx_WXwX"),h=r("dx_UtDZ"),p=r("dx_h6a8"),v=r("dx_cDcd"),m=r.n(v),g=r("dx_bUYd"),y=r("dx_yzqx"),b=r("dx_xs2W"),_=r("dx_A3AG"),x=r("dx_g0R0"),k=r("dx_qx8A"),E=r.n(k),O=r("dx_fYsZ"),S=r("dx_rORI"),C=r("dx_C5qJ"),w=(r("dx_UjgB"),function(){var e=Object(h.getMinaConfig)("ccm_web_common_is_hide_upload_log_entry",!1),n=Object(v.useState)(!1),r=s()(n,2),i=r[0],c=r[1],y=Object(v.useState)(!1),k=s()(y,2),w=k[0],I=k[1],T=Object(h.getDynamicFeatureGate)(h.DynamicBrandConfigKey.CCMWEB_COMMON_CONTACT_CUSTOMER),D=Object(h.getDynamicFeatureGate)(h.DynamicBrandConfigKey.CCMWEB_COMMON_UPLOAD_LOG)&&!e,A=Object(v.useCallback)((function(){c(!i),Object(C.U)("click_question_button")}),[i,c]),j=Object(v.useCallback)((function(){i||c(!0)}),[i,c]),R=Object(v.useCallback)((function(){i&&c(!1)}),[i,c]),N=Object(v.useCallback)((function(){I(!1)}),[I]),P=Object(v.useCallback)((function(){I(!0),Object(C.U)("log_upload")}),[I]),M=Object(p.debounce)(a()(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(C.o)();case 3:n=e.sent,(r=n&&n.data&&n.data.link)&&r.startsWith("lark:")?h.docsLocation.href=r:r&&r.startsWith("http")?Object(C.g)(r):Object(g.h)({content:t("error.try_later"),errorContext:Object(x.G)(new Error("get custom service link failed"))}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(g.h)({content:t("common.network_error"),errorContext:Object(x.G)(e.t0,new Error("get custom service url failed!"))});case 11:Object(C.U)("contact_us");case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),300);return m.a.createElement(O.d,{style:{pointerEvents:i?"all":"none"}},m.a.createElement(f.t,{locale:h.i18nHelper.getLocale()},m.a.createElement(l.r,{activated:i,onToggle:A,onShowBtns:j,onHideBtns:R},D&&m.a.createElement(u.S,{buttonType:d.U.UPLOADLOG,onClick:P}),T&&m.a.createElement(u.S,{buttonType:d.U.CUSTOMERSERVICE,onClick:M}),m.a.createElement(u.S,{buttonType:d.U.HELPDOC,onClick:function(){var e=Object(C.u)();Object(b.T)(e,"_blank"),Object(C.U)("help_center")}}),m.a.createElement(u.S,{buttonType:d.U.SHORTCUTS,onClick:function(){E.a.dispatch(Object(_.l)(!E.a.getState().docx.comment.helpPanelShown)),Object(C.U)("hotkey_button")}}),w&&m.a.createElement(S.S,{visible:w,onCancel:N}))))}),I=y.S.isLark?function(){return null}:m.a.memo(w);n.S=I}).call(this,r("dx_E9Eu"))},dx_Eeoe:function(e,n,r){"use strict";r.r(n);var o=r("dx_EWJh");n.default=o.S},dx_FbH3:function(e,n,r){"use strict";var o=r("dx_lSNA"),i=r.n(o),a=r("dx_J4zp"),c=r.n(a),s=r("dx_QxNg"),l=r("dx_D38a"),u=r("dx_e4eN"),d=r("dx_M30o"),f=r("dx_Y7YZ"),h=r("dx_wOn8"),p=r("dx_cDcd"),v=r.n(p),m=r("dx_eSV8"),g=r("dx_IdzY"),y=r("dx_WI8P"),b=r("dx_h5hq"),_=r("dx_pk3x"),x=r("dx_bPy9");function k(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var O=["Abbreviation","SmartCorrection","Equation"];n.S=function(e){var n=Object(p.useState)(),r=c()(n,2),o=r[0],a=r[1],k=e.block.snapshot.text,S=Object(x.w)(k).get(g.x),C=Object(x.v)(e.block.id),w=new u.m({zoneId:C}).concat(S),I=new d.q(i()({},g.x,(new u.m).insertEnter())).add(w),T=new b.y({deltaSet:I,schema:y.S,modulesContainer:g.g});return v.a.createElement(f.l,{editable:e.editable,copyable:e.copyable,className:e.className,businessKey:e.businessKey,contentState:T,placeholder:e.placeholder,debounceFlush:0,style:e.style,register:function(n){var r=e.block.props.options;if(!Array.isArray(r))return[];var o={editor:n,blockManager:e.block.blockManager,selectionAPI:e.block.selectionAPI,scroller:e.block.boundary,recursionProps:e.block.props.recursionProps};return r.concat(_.v).map((function(e){var n=c()(e.main,2),r=n[0],i=n[1];try{return O.includes(e.name)?null:new r(E(E({},i),o))}catch(a){return console.error("text block register occur error:",a),null}})).filter((function(e){return null!==e}))},onError:function(n){var r=n.e,o=n.message,i=n.level;console.error("editor:",i,o,r),i===h.F.FATAL&&e.block.blockManager.emit(s.Ra.ERROR,{msg:o,code:s.e.COLLECT_FAILED,type:"textInput"}),Object(m.n)(r)},modules:g.xj,listenEvents:_.DU,onInit:function(e){a(e)}},o&&v.a.createElement(l.Y,{zoneId:C,editor:o,className:e.className,style:e.style}))}},dx_H0H1:function(e,n,r){"use strict";(function(t){var e,o=r("dx_J4zp"),i=r.n(o),a=r("dx_Mync"),c=r("dx_uI5P"),s=r("dx_PcQO"),l=r("dx_UtDZ"),u=r("dx_cDcd"),d=r.n(u),f=r("dx_rQGm"),h=r("dx_yzqx"),p=r("dx_zEdG"),v=r("dx_c6Cp"),m=r("dx_imty"),g=r("dx_B28d"),y=r("dx_D8nn"),b=r("dx_B2Pt");!function(e){e.ToDoc="to-doc",e.ToComment="to-comment"}(e||(e={}));var _=h.S.isLarkFeed?function(){return null}:function(){var n=Object(u.useRef)(null),r=Object(u.useRef)(null),o=Object(u.useRef)(0),h=Object(u.useRef)(null),_=Object(u.useState)(e.ToComment),x=i()(_,2),k=x[0],E=x[1],O=k===e.ToComment?t("help.to_comment"):t("help.to_doc"),S=k===e.ToComment?a.S:c.S,C=Object(u.useCallback)((function(n){n.forEach((function(n){0===n.intersectionRatio?E(e.ToComment):k===e.ToComment&&(Object(v.J)(),E(e.ToDoc))}))}),[k]),w=Object(u.useCallback)((function(e){n.current=document.querySelector(".".concat(f.b3.ROOT)),h.current=e,r.current=new IntersectionObserver(C,{root:n.current,rootMargin:"0px",threshold:0}),r.current.observe(e)}),[C]),I=Object(u.useCallback)((function(){n.current&&(k===e.ToDoc?(Object(p.P)("ccm_doc_content_page_click",{record_id:Object(l.getToken)(),block_type:g.B.PAGE},{click:"click_return_content"}),n.current.scrollTop=o.current):h.current&&(Object(p.P)("ccm_doc_content_page_click",{record_id:Object(l.getToken)(),block_type:g.B.PAGE},{click:"click_full_comment",target:"ccm_comment_view"}),o.current=n.current.scrollTop,n.current.scrollTop=h.current.offsetTop))}),[k]);return Object(u.useEffect)((function(){return y.S.on(m.H.GlobalCommentDidMount,w),function(){y.S.off(m.H.GlobalCommentDidMount,w)}}),[w]),Object(u.useEffect)((function(){return function(){r.current&&r.current.disconnect()}}),[]),d.a.createElement(b.B,{className:"docx-comment__first-comment-btn"},d.a.createElement(s.Tooltip,{placement:"left",title:O,mouseEnterDelay:200},d.a.createElement(b.N,{onClick:I},d.a.createElement(S,{width:"36",height:"36"}))))};n.S=_}).call(this,r("dx_E9Eu"))},dx_H5sz:function(e,n,r){"use strict";var o=r("dx_RIqP"),i=r.n(o),a=r("dx_J4zp"),c=r.n(a),s=r("dx_TSYQ"),l=r.n(s),u=r("dx_UtDZ"),d=r("dx_cDcd"),f=r.n(d),h=r("dx_lwsE"),p=r.n(h),v=r("dx_W8MJ"),m=r.n(v),g=r("dx_W7W2"),y=r.n(g),b=r("dx_a1gu"),_=r.n(b),x=r("dx_Nsbk"),k=r.n(x),E=r("dx_Nv7e"),O=r("dx_IFC7"),S=r("dx_yzqx");function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=k()(e);if(n){var i=k()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _()(this,r)}}var w=function(e){y()(r,e);var n=C(r);function r(e){var o;p()(this,r),(o=n.call(this,e)).state={loading:!0,src:o.getImageSrc()},o.retryTimes=3,o.handleChoose=function(){var e=o.props,n=e.coverId,r=e.token;(0,e.onChoose)({coverId:n,token:r,contentType:e.contentType,coverSource:"gallery",series:e.seriesId})},o.handleLoad=function(){o.setState({loading:!1}),o.props.onLoad(o.props.token)},o.handleError=function(){o.retryTimes--?o.setState({src:o.getImageSrc(!0)}):o.props.onLoad(o.props.token)};var i=o.state.src;if(S.S.isOpendoc){o.state.src="";var a=Object(O.B)(i);"string"===typeof a?o.state.src=a:a.then((function(e){return e&&o.setState({src:e})})).catch((function(e){return console.log("[cover image] fetch image error",e)}))}return o}return m()(r,[{key:"getImageSrc",value:function(e){var n={};return e&&(n.t="".concat(Number(new Date))),Object(E.y)(this.props.token,n)}},{key:"render",value:function(){var e=this.state,n=e.loading,r=e.src,o=l()("cover-panel-storehouse-img-wrapper",{"cover-panel-storehouse-img-wrapper-loading":n}),i=this.props,a=i.token,c=i.inView,s=i.coverId;return f.a.createElement("div",{className:o,onClick:n?void 0:this.handleChoose,"data-cover-id":a,"data-report-cover-id":s},c?f.a.createElement("img",{className:"cover-panel-storehouse-img",src:r,onLoad:this.handleLoad,onError:this.handleError}):f.a.createElement("span",{className:"img-placeholder"}))}}]),r}(d.PureComponent);r("dx_X5LT");function I(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return T(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var D=u.PerfectScrollbar;n.S=function(e){var n=Object(d.useState)([]),r=c()(n,2),o=r[0],a=r[1],s=e.onChoose,h=e.loading,p=e.coverList,v=e.maxPanelHeight,m=void 0===v?520:v,g=l()("cover-panel-storehouse-wrapper",{"cover-panel-storehouse-wrapper-loading":h});Object(d.useEffect)((function(){if(p.length){var e,n=[],r=I(p);try{for(r.s();!(e=r.n()).done;){var o=e.value.covers;n=n.concat(o.map((function(e){return e.token})))}}catch(i){r.e(i)}finally{r.f()}n.length&&n.splice(0,12),a(n)}}),[p]);var y=function(){if(o.length){var e=i()(o);e.splice(0,1),a(e)}};return f.a.createElement(D.default,{style:{outline:"transparent",maxHeight:m},size:D.ScrollbarSize.Small},f.a.createElement("div",{className:g},h?f.a.createElement(u.SuiteLoading,null):p.map((function(e){var n=e.covers,r=e.series;return f.a.createElement("div",{key:r.seriesId,className:"cover-panel-storehouse"},f.a.createElement("h6",{className:"cover-panel-storehouse-title"},r[function(){var e=u.i18nHelper.getLanguage();return"ja"===e?"jp":e}()]||r.en),f.a.createElement("div",{className:"cover-panel-storehouse-list"},function(e,n){return e.map((function(e){var r=e.id,i=e.token,a=e.mime_type;return f.a.createElement(w,{key:i,token:i,seriesId:n,contentType:a,coverId:r,onChoose:s,onLoad:y,inView:!o.includes(i)})}))}(n,r.seriesId)))}))))}},dx_I5Eh:function(e,n,r){"use strict";(function(t){r.d(n,"B",(function(){return O}));r("dx_QU2i");var e=r("dx_d1El"),o=r.n(e),i=r("dx_lwsE"),a=r.n(i),c=r("dx_W8MJ"),s=r.n(c),l=r("dx_W7W2"),u=r.n(l),d=r("dx_a1gu"),f=r.n(d),h=r("dx_Nsbk"),p=r.n(h),v=r("dx_cDcd"),m=r.n(v),g=(r("dx_EOdM"),r("dx_uPex")),y=r("dx_EnrF"),b=r("dx_D6Aj"),_=r("dx_k9ku"),x=r("dx_X1XY"),k=r("dx_j9jH");function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var O=function(e){u()(r,e);var n=E(r);function r(){var e;a()(this,r);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))).state={isShowDiff:!0,selectedHistoryItem:null,historyItemIsNewest:!1},e.onClickHistoryItem=function(n,r){var o=e.state.isShowDiff;e.setState({selectedHistoryItem:n,historyItemIsNewest:r}),x.r.emit(x.h.SHOW_SNAPSHOT,{historyItem:n,isShowDiff:o,historyItemIsNewest:r}),Object(_.r)("ccm_docs_history_page_click",{click:"click_select_version",target:"none",version_time:Object(y.m)(n),is_large_version:String(Object(y.R)(n))})},e.onHistoryHelp=function(){var e,n,r={LARK:t("history.helpurl.lark"),FEISHU:t("history.helpurl.feishu")},o="feishu"!==(null===(e=window.globalConfig)||void 0===e||null===(n=e.common)||void 0===n?void 0:n.product)?r.LARK:r.FEISHU;window.open(o),Object(_.r)("history",{action:"click_help_histroy",source:"help_history_btn"}),Object(_.r)("ccm_docs_history_page_click",{click:"click_history_help",target:"none"})},e.onSwitchChange=function(n){e.setState({isShowDiff:n}),x.r.emit(x.h.SHOW_SNAPSHOT,{historyItem:e.state.selectedHistoryItem,isShowDiff:n,historyItemIsNewest:e.state.historyItemIsNewest}),Object(_.r)("history",{action:"view_change"}),Object(_.r)("ccm_docs_history_page_click",{click:"click_show_change",target:"none",sub_click:n})},e}return s()(r,[{key:"renderHeader",value:function(){return m.a.createElement("div",{className:"docx-history-right-header"},m.a.createElement("span",{className:"docx-history-right-header-title"}," ",t("nav.tips.history_record")," "),m.a.createElement(o.a,{title:t("guide.help_doc"),placement:"bottom"},m.a.createElement("div",null,m.a.createElement(g.S,{className:"docx-history-right-header-help-icon",onClick:this.onHistoryHelp}))))}},{key:"renderContent",value:function(){return m.a.createElement(k.c,{token:this.props.token,className:"docx-history-right-content",onClickItem:this.onClickHistoryItem})}},{key:"renderFooter",value:function(){return m.a.createElement("div",{className:"docx-history-right-footer"},m.a.createElement("div",{className:"control-item"},m.a.createElement("span",{className:"control-item-title"},t("history.showDiff")),m.a.createElement(b.S,{isOpen:this.state.isShowDiff,onChange:this.onSwitchChange})))}},{key:"render",value:function(){return m.a.createElement("div",{className:"docx-history-right-container"},this.renderHeader(),this.renderContent(),this.renderFooter())}}]),r}(m.a.Component)}).call(this,r("dx_E9Eu"))},dx_IH9J:function(e,n,r){},dx_IUdR:function(e,n,r){"use strict";r.r(n),function(t){var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_UtDZ"),s=r("dx_h6a8"),l=r("dx_cDcd"),u=r("dx_h74D"),d=r("dx_e9eF"),f=r("dx_n007"),h=r("dx_yzqx"),p=r("dx_E2oU"),v=r("dx_Fimk"),m=r("dx_Wkzy"),g=r("dx_D8nn"),y=r("dx_I2IP"),b=r("dx_SOtg"),_=r("dx_vYyK"),x=r("dx_T3mo"),k=r("dx_xMb4"),E=r("dx_qDPQ"),O=r("dx_yhe3"),S="TRANSLATE_NOTICE_KEY",C="DOCX_TRANSLATE_TOAST",w=g.p.TRANSLATE,I=w.TRANSLATE_EVENT_DONE,T=w.TRANSLATE_EVENT_CLOSE,D=w.TRANSLATE_LANGUAGE_CHANGE,A=w.TRANSLATE_SHOW_NOTICE;n.default=function(e){var n=e.translateConfig,r=e.blockManager,i=Object(u.useDispatch)(),w=Object(l.useRef)({start:0,end:0}),j=Object(u.useSelector)(p.X),R=Object(l.useRef)(!1),N=Object(l.useRef)(null),P=Object(l.useCallback)((function(e){var n=e.payload,r=Object(O.l)(n);console.log("[TranslatePC]: handle fetched:",e),function(e){var n=e.src_lang,r=e.target_lang,o=e.enable_auto_translate_doc_body;Object(_.E)()&&o&&n!==r&&!j&&(a=r,R.current=!0,a&&i(c.actions.translate.updateTranslateStatus({translate_start:!0,translating:!0})));var a}(r)}),[]),M=Object(l.useCallback)((function(e,n,r){return r(c.actions.translate.fetchTranslateConfig(e,n))}),[]);function B(){var e;i(c.actions.translate.resetTranslateStatus()),i(c.actions.translate.updateTranslateView({type:E.h.ORIGINAL})),i({type:"TOGGLE_READONLY_MODE",payload:{readonly:!1}});var n=null===(e=r.editorAPI.getService(m.x,{optional:!0}))||void 0===e?void 0:e.getBridge("");null===n||void 0===n||n.unfreeze(),g.S.emit(T),g.S.emit(A,!1),N.current&&N.current.resolve({code:E.t.CANCEL}),N.current=null,Object(b.R)("exit_translation","none"),Object(c.sendOpendocEvent)(c.OPENDOC_EVENT.TRANSLATE_CHANGE)}function L(e){return F.apply(this,arguments)}function F(){return F=a()(o.a.mark((function e(r){var i,a,l,u,d,f,h,p=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>1&&void 0!==p[1]?p[1]:s.noop,c.Toast.show({key:C,content:t("CreationDoc_Translate_TranslatingTo",void 0,void 0,c.translateHelper.getText(n.config.target_lang)),keepAlive:!0}),a=new Promise((function(e,n){N.current={resolve:e,reject:n}})),w.current.start=Date.now(),Object(b.t)(n,R.current?"auto":"manual"),l={code:E.t.FAIL,count:{wordCount:0,charCount:0}},u=c.taskIdController.getTaskId(),k.H.initCollection(u),e.prev=8,d=y.S.startTranslate(),e.next=12,Promise.race([a,d]);case 12:f=e.sent,l=Object.assign(l,f),(h=l.code)===E.t.CANCEL?console.log("[TranslatePC]: translate cancel before translated"):h===E.t.SUCCESS?r():h===E.t.NETWORK_ERROR?(i(),c.Toast.show({type:"error",content:t("CreationDoc_Translate_NoConnectionToast")})):h===E.t.UNAVAILABLE?(i(),c.showPicLimitDialog&&Object(c.showPicLimitDialog)(c.PicLimitType.TRANSLATE,{taskId:c.taskIdController.getTaskId()})):(i(),c.Toast.show({type:"error",content:t("CreationDoc_Translate_FailedToast")})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(8),i(),c.Toast.show({type:"error",content:t("CreationDoc_Translate_FailedToast")});case 22:return e.prev=22,w.current.end=Date.now(),N.current=null,c.Toast.remove(C),k.H.send(u,n),Object(b.A)(n,l.code===E.t.SUCCESS?"trans_success":"trans_failed"),Object(v.N)("ccm_doc_translate_performance_dev",{transalte_time:w.current.end-w.current.start,status:l.code===E.t.SUCCESS?"true":"false",word_count:l.count.wordCount,char_count:l.count.charCount,original_language:n.config.src_lang,target_language:n.config.target_lang,is_auto:String(R.current)}),R.current=!1,e.finish(22);case 31:case"end":return e.stop()}}),e,null,[[8,18,22,31]])}))),F.apply(this,arguments)}function H(e){var n=e.targetLang;i(c.actions.translate.updateTranslateConfig({target_lang:n})),Object(c.sendOpendocEvent)(c.OPENDOC_EVENT.TRANSLATE_CHANGE,n)}function W(e){"translate_banner"===e.source&&Object(b.R)("translation_preference","ccm_space_trans_prefer_setting_view")}function U(){try{localStorage.setItem(S,"1")}catch(e){console.error("[TranslatePC]: set storage fail",e)}}function V(e,n){Object(f.Q)(e,n,"add"),d.S.handleMouseEnter(e,n)}function z(e,n){Object(f.Q)(e,n,"remove"),d.S.handleMouseLeave()}return Object(x.D)(M,P),Object(l.useEffect)((function(){h.S.isOpendoc&&Object(c.registerOpendocApi)(c.OPENDOC_API.toggleTranslate,(function(e,r){var o=n.status,a=o.translated,s=o.translating;e&&r?(H({targetLang:r}),!a&&!s&&i(c.actions.translate.toggleTranslate(!0))):B()}))}),[n.status.translated,n.status.translating]),Object(l.useEffect)((function(){return i(c.actions.translate.updateTranslateView({type:E.h.ORIGINAL})),c.EventEmitter.on(c.EVENTS.PC.COMMON.CLOSE_TRANSLATE,B),c.EventEmitter.on(c.EVENTS.PC.COMMON.REFRESH_TRANSLATE,H),c.EventEmitter.on(c.EVENTS.PC.COMMON.OPEN_TRANSLATE_SETTING,W),function(){B(),y.S.destroy(),c.EventEmitter.off(c.EVENTS.PC.COMMON.CLOSE_TRANSLATE,B),c.EventEmitter.off(c.EVENTS.PC.COMMON.REFRESH_TRANSLATE,H),c.EventEmitter.off(c.EVENTS.PC.COMMON.OPEN_TRANSLATE_SETTING,W)}}),[]),Object(l.useEffect)((function(){return n.status.translated&&(g.S.on(g.p.TRANSLATE.TRANSLATE_MOUSE_OVER,V),g.S.on(g.p.TRANSLATE.TRANSLATE_MOUSE_LEAVE,z)),function(){n.status.translated&&(g.S.off(g.p.TRANSLATE.TRANSLATE_MOUSE_OVER,V),g.S.off(g.p.TRANSLATE.TRANSLATE_MOUSE_LEAVE,z))}}),[n.status.translated]),Object(l.useEffect)((function(){y.S.updateTranslateConfig(n)}),[n.status.translated]),Object(l.useEffect)((function(){n.status.translated&&(c.taskIdController.updateTaskId(),y.S.updateTranslateConfig(n),Object(b.R)("switch_language","none",{original_language:n.config.src_lang,target_language:n.config.target_lang}),L((function(){g.S.emit(D,{targetLanguage:n.config.target_lang})})))}),[n.config.target_lang,n.config.src_lang]),Object(l.useEffect)((function(){n.status.translating&&(Object(v.N)("ccm_docs_translate_page_view"),c.taskIdController.updateTaskId(),y.S.init({blockManager:e.blockManager,translateConfig:n}).then((function(){L((function(){i(c.actions.translate.updateTranslateStatus({translated:!0,translating:!1,comment_enable_translate:!0})),i(c.actions.translate.updateTranslateView({type:E.h.TRANSLATION,isOpenHistory:!1})),i({type:"TOGGLE_READONLY_MODE",payload:{readonly:!0}});var e=r.editorAPI.getService(m.x).getBridge("");null===e||void 0===e||e.freeze(),g.S.emit(I),n.config.display_type===O.V.WITH_ORIGINAL&&(localStorage.getItem(S)||g.S.emit(A,!0,U)),Object(c.sendOpendocEvent)(c.OPENDOC_EVENT.TRANSLATE_CHANGE,n.config.target_lang)}),(function(){B()}))})).catch((function(e){console.log("TranslateModule Init Fail",e.message),console.log("[TranslatePC]: TranslateModule Init Fail",e.message)})))}),[n.status.translating]),Object(l.useEffect)((function(){return window.TranslateModule=y.S,function(){window.TranslateModule=null}}),[]),null}}.call(this,r("dx_E9Eu"))},dx_J2wY:function(e,n,r){"use strict";r.d(n,"o",(function(){return He})),r.d(n,"w",(function(){return We})),r.d(n,"P",(function(){return Ue}));var o=r("dx_o0o1"),i=r.n(o),a=r("dx_lSNA"),c=r.n(a),s=r("dx_RIqP"),l=r.n(s),u=r("dx_yXPU"),d=r.n(u),f=r("dx_a8pA"),h=r("dx_bPy9"),p=r("dx_tgFd"),v=r("dx_TBtt"),m=r("dx_lwsE"),g=r.n(m),y=r("dx_W8MJ"),b=r.n(y),_=r("dx_B28d"),x=r("dx_xI7u"),k=r("dx_h6a8"),E=r("dx_Bs5u");function O(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return S(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function C(e,n){var r=new Set;if(n.id===e)return n;var o=function e(n,o){if(r.has(o.id))return null;if(r.add(o.id),o.children){var i,a=O(o.children);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(c.id===n)return c;var s=e(n,c);if(s)return s}}catch(l){a.e(l)}finally{a.f()}}return null},i=function e(n,i){if(!i)return null;if(r.has(i.id))return null;if(i.id===n)return i;if(r.add(i.id),i.children){var a,c=O(i.children);try{for(c.s();!(a=c.n()).done;){var s=a.value;if(s.id===n)return s;var l=o(n,s);if(l)return l}}catch(u){c.e(u)}finally{c.f()}}return i.parent?e(n,i.parent):null}(e,n);return i||null}function w(e,n,r,o){var i=[],a=n;for(a=n;a<r.length&&(r[a][o]===e[o]&&r[a].userId===e.userId);a++)i.push(r[a].id);return{index:a,sameChangeDetail:{id:e.id,siblings:i,recordId:e.id}}}var I=r("dx_alfx"),T=r("dx_vdIl");function D(e){var n=e.nodeData.text;if(!(null===n||void 0===n?void 0:n.apool))return{deleted:[],added:[]};var r=Object(I.Z)(n.initialAttributedTexts,n.apool),o={deleted:[],added:[]};return r.get(T.x).forEach((function(e){var n;if(e.insert){var r=null===(n=e.attributes)||void 0===n?void 0:n.inlineblock;if(r){var i;if(null===(i=e.attributes)||void 0===i?void 0:i.__edit_del)return void o.deleted.push(r);o.added.push(r)}}})),o}var A=function(){function e(){g()(this,e),this.from={},this.to={}}return b()(e,[{key:"push",value:function(e,n,r){Object.getOwnPropertyDescriptor(this.from,e)||(this.from[e]=n),this.to[e]=r}},{key:"getChanges",value:function(){var e=this,n=Object.keys(this.from),r=Object.keys(this.to);return 0===n.length&&0===r.length?null:(n.filter((function(e){return r.includes(e)})).forEach((function(n){e.from[n]===e.to[n]&&(delete e.from[n],delete e.to[n])})),0===Object.keys(this.from).length&&0===Object.keys(this.to).length?null:{from:this.from,to:this.to})}}]),e}(),j=function(){function e(){g()(this,e),this._children=[]}return b()(e,[{key:"values",value:function(){return this._children}},{key:"addChild",value:function(e,n){for(var r=0,o=0,i=!1,a=0;a<this._children.length;a++){if(!this._children[a].isDeleted){if(e===o){i=!0,this._children.splice(r,0,n);break}o++}r++}i||this._children.push(n)}},{key:"get",value:function(e){for(var n=0,r=0;r<this._children.length;r++){if(e===n&&!this._children[r].isDeleted)return this._children[r];this._children[r].isDeleted||n++}return null}},{key:"getIndex",value:function(e){for(var n=0,r=0;r<this._children.length&&this._children[r].id!==e;r++)this._children[r].isDeleted||n++;return n}},{key:"removeChild",value:function(e){var n=this._children.findIndex((function(n){return n.id===e}));return-1!==n&&this._children.splice(n,1),null}},{key:"removeAllChildren",value:function(){this._children.length=0}}]),e}();function R(e,n,r){if(1===e.length){var o=e.shift();if(!o)return;if(void 0!==n)return void(r[o]=n);Array.isArray(r)?r.splice(parseInt(o),1):delete r[o]}else{var i=e.shift();if(!i)return;r[i]||(r[i]={}),R(e,n,r[i])}}var N=function(){function e(){g()(this,e),this._data={}}return b()(e,[{key:"patchProperty",value:function(e,n){0===e.length?this.data=n:R(Object(k.cloneDeep)(e),n,this.data)}},{key:"patchListChange",value:function(e,n,r){var o=Object(k.cloneDeep)(e),i=o.pop();if(Object(k.isNumber)(i)){var a=Object(k.get)(this.data,o,void 0);Object(k.isArray)(a)&&(n?a.splice(i,0,n):r&&a.splice(i,1))}}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}}]),e}();function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){c()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var B=function(){function e(){g()(this,e),this._nodeData=new N,this._childrenManager=new j,this._changeManager=new A,this.contentChangeDetail=[],this.isError=!1,this.id="",this.originId="",this.type="",this.version=-1,this.isAdded=!1,this.isDeleted=!1,this.isPatched=!1,this.parent=void 0,this.commonBlockNodeProps={},this.isInlineBlock=!1}return b()(e,[{key:"addChild",value:function(e,n){this._childrenManager.addChild(e,n)}},{key:"removeChild",value:function(e){return this._childrenManager.removeChild(e)}},{key:"getBlockIdsByChildren",value:function(){return this.children.filter((function(e){return!e.isInlineBlock})).map((function(e){return e.id}))}},{key:"getSnapshotData",value:function(){var e,n,r,o,i,a,s=this.children.map((function(e){return e.getSnapshotData()})).flat(),u={};for(var d in this.commonBlockNodeProps)if(d in this.nodeData){var f=this.commonBlockNodeProps[d];u[d]=f}return Object.assign.apply(Object,[{},c()({},this.id,{id:this.id,version:this.version,data:M(M(M({},this.nodeData),u),{},(a={parent_id:(null===(e=this.parent)||void 0===e?void 0:e.id)||"",children:this.getBlockIdsByChildren(),_error:this.isError},c()(a,E.A.add,!(null===(n=this.parent)||void 0===n?void 0:n.isDeleted)&&(!(null===(r=this.parent)||void 0===r?void 0:r.isAdded)&&this.isAdded)),c()(a,E.A.del,!(null===(o=this.parent)||void 0===o?void 0:o.isDeleted)&&this.isDeleted),c()(a,E.A.change,(null===(i=this.parent)||void 0===i?void 0:i.isDeleted)||this.isDeleted?null:this._changeManager.getChanges()),c()(a,E.B,this.originId),a))})].concat(l()(s)))}},{key:"getChangeDetail",value:function(){var e=[];if((this._changeManager.getChanges()||this.isAdded||this.isDeleted)&&e.push({id:this.id,siblings:[],recordId:this.id}),e.push.apply(e,l()(this.contentChangeDetail)),this.isAdded||this.isDeleted)return e;for(var n=0;n<this.children.length;n++){var r,o,i,a,c=this.children[n];if(!(null===(r=c.parent)||void 0===r||null===(o=r.addedInlineBlock)||void 0===o?void 0:o.has(c.id))&&!(null===(i=c.parent)||void 0===i||null===(a=i.deletedInlineBlock)||void 0===a?void 0:a.has(c.id)))if(c.isAdded){var s=w(c,n+1,this.children,"isAdded"),u=s.index,d=s.sameChangeDetail;e.push(d),n=u-1}else if(c.isDeleted){var f=w(c,n+1,this.children,"isDeleted"),h=f.index,p=f.sameChangeDetail;n=h-1,e.push(p)}else{var v=c.getChangeDetail();e.push.apply(e,l()(v))}}return e}},{key:"patchChanges",value:function(e,n){if(!this.isPatched){this.isPatched=!0;for(var r=this.getCurrentNodeChanges(e);(null===r||void 0===r?void 0:r.length)>0&&!this.isError;){var o=r.pop(),i=o.change,a=o.user_id,c=void 0===a?"":a,s=i.ops,l=i.revision;if(this.version>=l)break;this.patchProperty(["user_id"],c),this.version=l,this.handleOps(s,e,n,c)}}this.isError||this.children.forEach((function(r){r.patchChanges(e,n)}))}},{key:"handleOtherOp",value:function(e,n,r){var o=e.p,i=e.action.oi;this.isAdded&&this.patchProperty(o,i)}},{key:"getCurrentNodeChanges",value:function(e){var n=this.originId,r=e&&e[n];return r?Object(k.cloneDeep)(r).sort((function(e,n){return n.change.revision-e.change.revision})):[]}},{key:"judgeActionType",value:function(e,n){var r=p.f.UnKnow;switch(e.length){default:r=p.f.ComplexPropertyChange;break;case 1:case 2:r=this.getActionType(e.length,e,n)}return r}},{key:"getActionType",value:function(e,n,r){var o=n[0],i=p.f.NormalPropertyChange;if("children"===o)switch(e){case 1:i=p.f.InsertChildrenNodes;break;case 2:r.li?i=p.f.InsertChildNode:r.ld&&(i=p.f.DeleteNode)}return"text"===o&&(i=p.f.TextChange),"columns_id"!==o&&"rows_id"!==o||(i=p.f.UnKnow),"option_ids"!==o||Object(k.isUndefined)(r.li)&&Object(k.isUndefined)(r.ld)||(i=p.f.ListChange),i}},{key:"patchProperty",value:function(e,n){this._nodeData.patchProperty(e,n)}},{key:"patchListChange",value:function(e,n,r){this._nodeData.patchListChange(e,n,r)}},{key:"handleOps",value:function(e,n,r,o){for(var i=this;e.length>0;){var a=e.shift(),c=a.p,s=a.action,l=s||{},u=l.oi,d=l.od,f=l.li,h=l.ld;switch(this.judgeActionType(c,s)){case p.f.ComplexPropertyChange:this.handleComplexPropertyChange(d,u,c,n,r,o);break;case p.f.InsertChildNode:this.handleInsertNode(parseInt(c[1])||0,f,n,r,o);break;case p.f.InsertChildrenNodes:Array.isArray(u)&&u.forEach((function(e,a){return i.handleInsertNode(a,e,n,r,o)}));break;case p.f.DeleteNode:this.handleDeleteNode(parseInt(c[1]),h,o);break;case p.f.NormalPropertyChange:this.handleNormalPropertyChange(c,d,u,n,r,o);break;case p.f.ListChange:this.handleListChange(a);break;default:this.handleOtherOp(a,n,o)}}}},{key:"handleComplexPropertyChange",value:function(e,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5?arguments[5]:void 0;if("string"===typeof e||"boolean"===typeof e)return this.handleNormalPropertyChange(l()(r),e,n),void this.patchProperty(["user_id"],c);var s=new Set(Object.keys(e||{}).concat(Object.keys(n||{})));s.forEach((function(s){var u=e&&e[s],d=n&&n[s];Object(k.isEqual)(u,d)||o.handleNormalPropertyChange([].concat(l()(r),[s]),u,d,i,a,c)})),this.patchProperty(["user_id"],c)}},{key:"handleInsertNode",value:function(n,r,o,i,a){var c,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=C(r,this)||C("".concat(this.id,"-").concat(r),this);if(!l){l=C("".concat(r,"-del"),this);var u=this._childrenManager.getIndex("".concat(r,"-del"));if(l&&l.parent.id===this.id&&u===n)return l.id=r,l.isDeleted=!1,l}if(l){if(l.parent.id===this.id&&l.id==="".concat(this.id,"-").concat(r))return l;c=e.generateBlockNode(l.type);var d=l.version;c.handleNodeInit("".concat(this.id,"-").concat(r),Object(k.cloneDeep)(l.nodeData),this,!0,r,c,o,i,a,this.commonBlockNodeProps,s,d)}else{var f=Object(k.cloneDeep)(i[r]);f||(f={id:r,version:-1,data:{id:r,parent_id:this.id,page_id:"",version:-1,children:[],type:"unknow"}});var h=f,p=h.data;(c=e.generateBlockNode((null===p||void 0===p?void 0:p.type)||"unknow")).handleNodeInit("".concat(this.id,"-").concat(r),p,this,!0,r,c,o,i,a,this.commonBlockNodeProps,s)}return this.addChild(n,c),c}},{key:"handleDeleteNode",value:function(e,n,r){var o,i;if(isNaN(e)?(i=C("".concat(this.id,"-").concat(n),this))?n="".concat(this.id,"-").concat(n):i=C(n,this):i=this._childrenManager.get(e),i)if(null===(o=i)||void 0===o?void 0:o.isAdded)i.isAdded=!1,this.removeChild(i.id);else if(i.parent.type===_.B.QUOTE)this.removeChild(i.id);else{if(!i)return void console.error("not find need delete block!!!!!!");i.id="".concat(n,"-del"),i.isDeleted=!0,i.isAdded=!1,i.patchProperty(["user_id"],r)}else console.error("\u8bf7\u6821\u9a8c\u751f\u6210\u7684\u53d8\u66f4\u6811\u662f\u5426\u6b63\u786e\uff0c\u8282\u70b9: ".concat(n," \u4fe1\u606f\u7f3a\u5931!!!"))}},{key:"handleListChange",value:function(e){var n;this._nodeData.data;var r=e.action,o=r.li,i=r.ld;this.isAdded||(null===(n=this.parent)||void 0===n?void 0:n.isDeleted)||(o?this._changeManager.push(e.p.join("."),void 0,o):this._changeManager.push(e.p.join("."),i,void 0)),this.patchListChange(e.p,o,i)}},{key:"handleNormalPropertyChange",value:function(n,r,o){var i,a,c,s,l;(null===(i=this.parent)||void 0===i||null===(a=i.addedInlineBlock)||void 0===a?void 0:a.has(this.id))||(null===(c=this.parent)||void 0===c||null===(s=c.deletedInlineBlock)||void 0===s?void 0:s.has(this.id))||this.isAdded||(null===(l=this.parent)||void 0===l?void 0:l.isDeleted)||e.ignoreProps.includes(n[n.length-1])||this._changeManager.push(n[n.length-1],r,o),1===n.length&&"type"===n[0]&&o===_.B.QUOTE&&this._childrenManager.removeAllChildren(),this.patchProperty(n,o)}},{key:"handleNodeInit",value:function(e,n,r,o,i,a,c,s,l){var u,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],h=arguments.length>11?arguments[11]:void 0,p=n.type;a.id=e,a.originId=i,a.type=p,a.isAdded=o,a.parent=r,a.nodeData=n,a.version=Object(k.isUndefined)(h)?-1:h,null===(u=n.children)||void 0===u||u.forEach((function(e,n){a.handleInsertNode(n,e,c,s,l)}));var v=D(a);v.added.length&&v.added.forEach((function(e){return a.handleInsertNode(a.children.length,e,c,s,l,!0)})),a.patchProperty(["type"],p),a.patchProperty(["user_id"],l),a.isInlineBlock=f,a.commonBlockNodeProps=d}},{key:"nodeData",get:function(){return this._nodeData.data},set:function(e){this._nodeData.data=e}},{key:"children",get:function(){return this._childrenManager.values()}},{key:"userId",get:function(){return this.nodeData.user_id}}]),e}();B.ignoreProps=[],B.generateBlockNode=void 0;var L,F=r("dx_iWIM"),H=r.n(F),W=r("dx_W7W2"),U=r.n(W),V=r("dx_a1gu"),z=r.n(V),Q=r("dx_Nsbk"),G=r.n(Q);!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(L||(L={}));var K=function(){function e(n,r){g()(this,e),this.op=n,this.text=r}return b()(e,[{key:"toString",value:function(){return"".concat(this.op,",").concat(this.text)}}]),e}(),q=new(function(){function e(){var n=this;g()(this,e),this.diff=function(e,r){if(null===e||null===r)throw new Error("Null input. (diff)");if(e===r)return e?[new K(L.DIFF_EQUAL,e)]:[];var o=n.diffCommonPrefix(e,r),i=e.substring(0,o);e=e.substring(o),r=r.substring(o),o=n.diffCommonSuffix(e,r);var a=e.substring(e.length-o);e=e.substring(0,e.length-o),r=r.substring(0,r.length-o);var c=n.diffCompute(e,r);return i&&c.unshift(new K(L.DIFF_EQUAL,i)),a&&c.push(new K(L.DIFF_EQUAL,a)),n.diffMerge(c),c},this.diffCommonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,o=Math.min(e.length,n.length),i=o,a=0;r<i;)e.substring(a,i)===n.substring(a,i)?a=r=i:o=i,i=Math.floor((o-r)/2+r);return i},this.diffCommonSuffix=function(e,n){var r=e.length,o=n.length;if(!e||!n||e.charAt(r-1)!==n.charAt(o-1))return 0;for(var i=0,a=Math.min(r,o),c=a,s=0;i<c;)e.substring(e.length-c,e.length-s)===n.substring(n.length-c,n.length-s)?s=i=c:a=c,c=Math.floor((a-i)/2+i);return c},this.diffCompute=function(e,r){var o=[];if(!e)return[new K(L.DIFF_INSERT,r)];if(!r)return[new K(L.DIFF_DELETE,e)];var i=e.length>r.length?e:r,a=e.length>r.length?r:e,c=i.indexOf(a);if(-1!==c)return o.push(new K(L.DIFF_INSERT,i.substring(0,c)),new K(L.DIFF_EQUAL,a),new K(L.DIFF_INSERT,i.substring(c+a.length))),e.length>r.length&&(o[0].op=o[2].op=L.DIFF_DELETE),o;if(1===a.length)return[new K(L.DIFF_DELETE,e),new K(L.DIFF_INSERT,r)];var s=n.diffHalfMatch(e,r);if(s){var l=s[0]||"",u=s[1]||"",d=s[2]||"",f=s[3]||"",h=s[4]||"",p=n.diff(l,d),v=n.diff(u,f);return p.concat([new K(L.DIFF_EQUAL,h)],v)}return n.diffBisect(e,r)},this.diffBisect=function(e,r){var o=e.length,i=r.length,a=Math.ceil((o+i)/2),c=a,s=2*a,l=n.generateV(s),u=l.v1,d=l.v2;u[c+1]=0,d[c+1]=0;for(var f=0,h=0,p=o-i,v=p%2!==0,m=0,g=0,y=0;y<a;y++){for(var b=-y+f;b<=y-h;b+=2){for(var _=c+b,x=void 0,k=(x=b===-y||b!==y&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1)-b;x<o&&k<i&&e.charAt(x)===r.charAt(k);)x++,k++;if(u[_]=x,x>o)h+=2;else if(k>i)f+=2;else if(v){var E=c+p-b;if(E>=0&&E<s&&-1!==d[E])if(x>=o-d[E])return n.diffBisectSplit(e,r,x,k)}}for(var O=-y+m;O<=y-g;O+=2){for(var S=c+O,C=void 0,w=(C=O===-y||O!==y&&d[S-1]<d[S+1]?d[S+1]:d[S-1]+1)-O;C<o&&w<i&&e.charAt(o-C-1)===r.charAt(i-w-1);)C++,w++;if(d[S]=C,C>o)g+=2;else if(w>i)m+=2;else if(!v){var I=c+p-O;if(I>=0&&I<s&&-1!==u[I]){var T=u[I],D=c+T-I;if(T>=(C=o-C))return n.diffBisectSplit(e,r,T,D)}}}}return[new K(L.DIFF_DELETE,e),new K(L.DIFF_INSERT,r)]},this.diffBisectSplit=function(e,r,o,i){var a=e.substring(0,o),c=r.substring(0,i),s=e.substring(o),l=r.substring(i),u=n.diff(a,c),d=n.diff(s,l);return u.concat(d)},this.diffHalfMatch=function(e,r){var o=e.length>r.length?e:r,i=e.length>r.length?r:e;if(o.length<4||2*i.length<o.length)return null;var a,c,s,l,u,d=n.diff_halfMatchI_(o,i,Math.ceil(o.length/4)),f=n.diff_halfMatchI_(o,i,Math.ceil(o.length/2));return d||f?(a=f?d&&d[4].length>f[4].length?d:f:d,e.length>r.length?(c=a&&a[0],s=a&&a[1],l=a&&a[2],u=a&&a[3]):(l=a&&a[0],u=a&&a[1],c=a&&a[2],s=a&&a[3]),[c,s,l,u,a&&a[4]]):null},this.diff_halfMatchI_=function(e,r,o){for(var i=e.substring(o,o+Math.floor(e.length/4)),a=-1,c="",s="",l="",u="",d="";-1!==(a=r.indexOf(i,a+1));){var f=n.diffCommonPrefix(e.substring(o),r.substring(a)),h=n.diffCommonSuffix(e.substring(0,o),r.substring(0,a));c.length<h+f&&(c=r.substring(a-h,a)+r.substring(a,a+f),s=e.substring(0,o-h)||"",l=e.substring(o+f)||"",u=r.substring(0,a-h)||"",d=r.substring(a+f)||"")}return 2*c.length>=e.length?[s,l,u,d,c]:null},this.diffMerge=function(e){e.push(new K(L.DIFF_EQUAL,""));for(var r,o=0,i=0,a=0,c="",s="";o<e.length;)switch(e[o].op){case L.DIFF_INSERT:a++,s+=e[o].text,o++;break;case L.DIFF_DELETE:i++,c+=e[o].text,o++;break;case L.DIFF_EQUAL:i+a>1?(0!==i&&0!==a&&(0!==(r=n.diffCommonPrefix(s,c))&&(o-i-a>0&&e[o-i-a-1].op===L.DIFF_EQUAL?e[o-i-a-1].text+=s.substring(0,r):(e.splice(0,0,new K(L.DIFF_EQUAL,s.substring(0,r))),o++),s=s.substring(r),c=c.substring(r)),0!==(r=n.diffCommonSuffix(s,c))&&(e[o].text=s.substring(s.length-r)+e[o].text,s=s.substring(0,s.length-r),c=c.substring(0,c.length-r))),o-=i+a,e.splice(o,i+a),c.length&&(e.splice(o,0,new K(L.DIFF_DELETE,c)),o++),s.length&&(e.splice(o,0,new K(L.DIFF_INSERT,s)),o++),o++):0!==o&&e[o-1].op===L.DIFF_EQUAL?(e[o-1].text+=e[o].text,e.splice(o,1)):o++,a=0,i=0,c="",s=""}""===e[e.length-1].text&&e.pop();var l=!1;for(o=1;o<e.length-1;)e[o-1].op===L.DIFF_EQUAL&&e[o+1].op===L.DIFF_EQUAL&&(e[o].text.substring(e[o].text.length-e[o-1].text.length)===e[o-1].text?(e[o].text=e[o-1].text+e[o].text.substring(0,e[o].text.length-e[o-1].text.length),e[o+1].text=e[o-1].text+e[o+1].text,e.splice(o-1,1),l=!0):e[o].text.substring(0,e[o+1].text.length)===e[o+1].text&&(e[o-1].text+=e[o+1].text,e[o].text=e[o].text.substring(e[o+1].text.length)+e[o+1].text,e.splice(o+1,1),l=!0)),o++;l&&n.diffMerge(e)}}return b()(e,[{key:"generateV",value:function(e){for(var n=new Array(e),r=new Array(e),o=0;o<e;o++)n[o]=-1,r[o]=-1;return{v1:n,v2:r}}}]),e}()),X=r("dx_k9ku"),Y=r("dx_J4zp"),J=r.n(Y);function Z(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return $(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var ee=["comment-id-"];function te(e,n){if(e=e.filter((function(e){var n=J()(e,1)[0];return!ee.some((function(e){return n.includes(e)}))})),n=n.filter((function(e){var n=J()(e,1)[0];return!ee.some((function(e){return n.includes(e)}))})),e.length!==n.length)return!1;var r=new Map;e.forEach((function(e){return r.set(e[0],e[1])}));var o,i=!0,a=Z(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;if(!r.get(c[0])){i=!1;break}if(r.get(c[0])!==c[1]){i=!1;break}}}catch(s){a.e(s)}finally{a.f()}return i}function ne(e){return e.replace(/\|[a-z0-9]+/g,"")}var re=r("dx_C7Cb");function oe(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return ie(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function ie(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function ae(e,n,r){if(e.size!==n.size)return!1;var o,i=oe(e);try{for(i.s();!(o=i.n()).done;){var a=J()(o.value,2),c=a[0],s=a[1];if(!(null===r||void 0===r?void 0:r.includes(c))&&n.get(c)!==s)return!1}}catch(l){i.e(l)}finally{i.f()}return!0}function ce(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return se(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function se(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var le=["link","bold","strikethrough","italic","underline","textHighlightBackground","inlineCode"];function ue(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le,o=new Map;e.forEach((function(e){r.includes(e[0])||o.set(e[0],e[1])}));var i,a=ce(n);try{for(a.s();!(i=a.n()).done;){var c=J()(i.value,2),s=c[0],l=c[1];o.set(s,l)}}catch(u){a.e(u)}finally{a.f()}return Array.from(o)}function de(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return fe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var he=function(){function e(n,r,o){g()(this,e),this._attributeMap=new Map,this._changeDetail=[],this._attributeIndexes=[],this._id=void 0,this.init(n,r),this._id=o}return b()(e,[{key:"diffAttribute",value:function(n,r,o,i){for(var a=this,c=n+o,s=r+o,l=n,u=r;l<c&&u<s;l++,u++){var d=this.getCurrentIndexAttribute(l),f=i.getCurrentIndexAttribute(u),h=te(d,f),p=this.findLastCommonAttributeLength(d,f,l,u,c,s,i);if(!h)for(var v=this.getChangeDetail(),m=[],g=l;g<l+p;g++){this._attributeIndexes[g]||(this._attributeIndexes[g]=[]);var y=f.some((function(e){return e[0]===E.A.del}));y&&(f=f.filter((function(n){return n[0]!==E.A.del&&n[0]!==e.ChangeIdTag})));var b,_=ue(f,d),x=de(_);try{for(x.s();!(b=x.n()).done;){var k=J()(b.value,2),O=k[0],S=k[1];if(O!==e.ChangeIdTag){var C=this.getAttributeIndex([O,S]);m.push(C)}}}catch(D){x.e(D)}finally{x.f()}if(!_.some((function(e){return e[0]===E.A.add}))&&!y){e.removeAttributeByIndex(g,e.ChangeTag[0],this);var w=this.getAttributeIndex(e.ChangeTag);m.push(w)}if(!y||!te(d,f)){e.removeAttributeByIndex(g,e.ChangeTag[0],this);var I=m.findIndex((function(e){var n;return"author"===(null===(n=a._attributeMap.get(e))||void 0===n?void 0:n[0])}));-1!==I&&m.splice(I,1);var T=this.getAttributeIndex(e.ChangeTag);m.push(T),m.push(v)}this._attributeIndexes[g]=Array.from(new Set(m)).sort()}l+=p-1,u+=p-1}}},{key:"addDeleteAttribute",value:function(n,r,o,i){for(var a=this,c=this.getChangeDetail(),s=n,l=o.length,u="",d=r;d<r+l;d++){var f;if(!i.getCurrentIndexAttributeMap(d).has(E.A.add)){u+=o[d-r],e.removeAttributeByIndex(d,e.AddTag[0],i),e.removeAttributeByIndex(d,e.DeleteTag[0],i),e.removeAttributeByIndex(d,e.ChangeIdTag,i),e.removeAttributeByIndex(d,"author",i);var h=null===(f=i.getCurrentIndexAttribute(d))||void 0===f?void 0:f.map((function(e){return a.getAttributeIndex(e)})),p=this.getAttributeIndex(e.DeleteTag);h.push(p),h.push(c),this._attributeIndexes.splice(s,0,h.sort()),s+=1}}return u}},{key:"addInsertAttribute",value:function(n,r){for(var o=this.getChangeDetail(),i=r.length,a="",c=n;c<n+i;c++){if(this._attributeIndexes[c]||(this._attributeIndexes[c]=[]),!this.getCurrentIndexAttributeMap(c).has(E.A.del)){a+=r[c-n],e.removeAttributeByIndex(c,e.AddTag[0],this),e.removeAttributeByIndex(c,e.DeleteTag[0],this),e.removeAttributeByIndex(c,e.ChangeIdTag,this);var s=this.getAttributeIndex(e.AddTag);this._attributeIndexes[c].push(s),this._attributeIndexes[c].push(o)}}return a}},{key:"getFinalAttributes",value:function(n,r){var o="",i=0,a={};this._changeDetail=[];for(var c=["author",r],s=this.getAttributeIndex(c),l=0;l<this._attributeIndexes.length;l++){var u=this._attributeIndexes[l]||[],d=this.getCurrentIndexAttributeMap(l);if(!d.has(E.A.del)||!d.has(E.A.add)){var f=this.getSerialAttribute(d,l+1);(d=this.getCurrentIndexAttributeMap(l)).has(e.ChangeIdTag)&&this._changeDetail.push({recordId:this._id,siblings:[],id:d.get(e.ChangeIdTag)}),d.has("author")||u.push(s),a[i++]={count:f,attributes:"*".concat(u.map((function(e){return e.toString(36)})).join("*"))},o+=n.substr(l,f),l+=f-1}}var h={};return this._attributeMap.forEach((function(e,n){h[n]=e})),{apool:{nextNum:this._attributeMap.size,numToAttrib:h},initialAttributedTexts:{attribs:{0:Object.values(a).map((function(e){return"".concat(e.attributes,"+").concat(e.count.toString(36))})).join("")},text:{0:o}}}}},{key:"getAllChangeDetail",value:function(){return this._changeDetail}},{key:"getSerialAttribute",value:function(n,r){if(r<this._attributeIndexes.length){var o=this.getCurrentIndexAttributeMap(r);if(o.size!==n.size)return 1;if(o.has(e.ChangeIdTag)&&n.has(e.ChangeIdTag)&&(o.delete(e.ChangeIdTag),n.delete(e.ChangeIdTag)),te(Array.from(o),Array.from(n))){for(var i=this.getCurrentIndexAttributeMap(r),a=1,c=r;c<this._attributeIndexes.length;c++){var s=this.getCurrentIndexAttributeMap(c);if(!ae(s,i,[e.ChangeIdTag]))break;s.has(e.ChangeIdTag)&&n.has(e.ChangeIdTag)&&(s.delete(e.ChangeIdTag),n.delete(e.ChangeIdTag)),a++}return a}}return 1}},{key:"getCurrentIndexAttribute",value:function(e){var n=this._attributeIndexes[e];if(n){var r,o=[],i=de(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;o.push(this._attributeMap.get(a))}}catch(c){i.e(c)}finally{i.f()}return o}return[]}},{key:"getCurrentIndexAttributeMap",value:function(e){var n=new Map;return this.getCurrentIndexAttribute(e).reduce((function(e,n){return e.set(n[0],n[1])}),n)}},{key:"findLastCommonAttributeLength",value:function(e,n,r,o,i,a,c){for(var s=0;r<i&&o<a;){var l=this.getCurrentIndexAttribute(r),u=c.getCurrentIndexAttribute(o);if(!te(e,l)||!te(u,n))return s;r++,o++,s++}return s}},{key:"init",value:function(e,n){var r=this,o=function(e){return(e=ne(e)).match(/(\*[a-z0-9]+)*\+[a-z0-9]+/g)}(e),i=0;null===o||void 0===o||o.forEach((function(e){for(var o=function(e){var n,r;return{attributes:null===(n=(e=ne(e)).match(/(\*[a-z0-9]+)/g))||void 0===n?void 0:n.map((function(e){return e.split("*").filter((function(e){return e.length>0}))})).flat(),num:parseInt((null===(r=e.match(/\+[a-z0-9]+/g))||void 0===r?void 0:r.shift())||"0",36)}}(e),a=o.attributes,c=o.num,s=function(e){var o=[];null===a||void 0===a||a.forEach((function(e){if(e){var i=n[parseInt(e,36)],a=r.getAttributeIndex(i);o.push(a)}})),r._attributeIndexes.push(o)},l=i;l<c+i;l++)s();i+=c}))}},{key:"getChangeDetail",value:function(){var e="change_id_".concat(Object(re.S)()),n={id:e,children:[],recordId:this._id};return this._changeDetail.push(n),this.getAttributeIndex(["change_id",e])}},{key:"getAttributeIndex",value:function(e){var n,r=de(this._attributeMap.entries());try{for(r.s();!(n=r.n()).done;){var o=J()(n.value,2),i=o[0];if(o[1].join("")===e.join(""))return i}}catch(c){r.e(c)}finally{r.f()}var a=this._attributeMap.size;return this._attributeMap.set(a,e),a}}],[{key:"removeAttributeByIndex",value:function(e,n,r){var o=r._attributeIndexes[e].findIndex((function(e){var o;return(null===(o=r._attributeMap.get(e))||void 0===o?void 0:o[0])===n}));-1!==o&&r._attributeIndexes[e].splice(o,1)}}]),e}();he.AddTag=[E.A.add,"true"],he.DeleteTag=[E.A.del,"true"],he.ChangeTag=[E.A.change,"true"],he.ChangeIdTag="change_id";var pe=r("dx_GSgQ");function ve(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=G()(e);if(n){var i=G()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return z()(this,r)}}var me=function(e){U()(r,e);var n=ve(r);function r(){var e;g()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i)))._fullChanges=[],e._originalClientVars=null,e.addedInlineBlock=new Set,e.deletedInlineBlock=new Set,e}return b()(r,[{key:"patchChanges",value:function(e,n){var o=this;if(H()(G()(r.prototype),"patchChanges",this).call(this,e,n),this.nodeData.text){for(;this._fullChanges.length>0;){var i=this._fullChanges.shift(),a=i.op,c=i.userId,s=this.nodeData.text;this.handleTextChangeAction(a,s,c)}var l=new Set(this.children.map((function(e){return e.originId}))),u=D(this);u.added=u.added.filter((function(e){return!l.has(e)})),u.added.reduce((function(e,r){var i=De(o,o.children.length,r,n,o.commonBlockNodeProps,!0);return i&&e.push(i),e}),[]).forEach((function(r){o.addedInlineBlock.add(r.id),r.patchChanges(e,n)})),u.deleted.forEach((function(e){return o.deletedInlineBlock.add(e)}))}}},{key:"handleOtherOp",value:function(e,n,r){var o,i=this,a=e.p,c=e.action,s=null===c||void 0===c?void 0:c.oi;if(!s&&e.subType){var l,u=this._originalClientVars||this.nodeData.text;s=null===(l=function(e,n,r){try{var o=new pe.S(null,n);return o.apply(e),o.getSnapshot()}catch(i){"function"===typeof r&&r(i),console.log(i,"_____applyChangesets err")}}([e],{text:u},(function(n){var r,o,a,c,s;i.isError=!0;var l=null===(r=e.subType.o)||void 0===r||null===(o=r.zone_changesets)||void 0===o?void 0:o[0];Object(X.r)("docx_history_dev",{action:"line_edit_exception",data:{message:n.message,stack:JSON.stringify(n.stack),oldLen:null===(a=u.initialAttributedTexts.text[0])||void 0===a?void 0:a.length,cs:null===l||void 0===l?void 0:l.slice(0,null===l||void 0===l?void 0:l.indexOf("$")),nextNum:null===(c=e.subType.o)||void 0===c||null===(s=c.apool)||void 0===s?void 0:s.nextNum}})})))||void 0===l?void 0:l.text}if(!s)return this.isError=!0,void Object(X.r)("docx_history_dev",{action:"exception",data:{message:"oi is empty"}});this._originalClientVars=Object(k.cloneDeep)(s),this.isAdded||(null===(o=this.parent)||void 0===o?void 0:o.isDeleted)?this.patchProperty(a,s):this._fullChanges.push({op:s,userId:r})}},{key:"handleTextChangeAction",value:function(e,n,r){var o=this.getText(e),i=this.getText(n),a=this.getNumAttributes(e),c=this.getNumAttributes(n),s=this.getAttribs(e),l=this.getAttribs(n),u=new he(s,a,this.id),d=new he(l,c,this.id),f=q.diff(i,o),h="",p=0,v=0;f.forEach((function(e){if(0===e.op)u.diffAttribute(p,v,e.text.length,d),p+=e.text.length,v+=e.text.length,h+=e.text;else if(-1===e.op){var n=u.addDeleteAttribute(p,v,e.text,d);h+=n,v+=e.text.length,p+=n.length}else if(1===e.op){var r=u.addInsertAttribute(p,e.text);p+=e.text.length,h+=r}}));var m=u.getFinalAttributes(h,r);this.patchProperty(["text"],m),u.getAllChangeDetail(),this.contentChangeDetail=u.getAllChangeDetail()}},{key:"getText",value:function(e){return e.initialAttributedTexts.text[0]}},{key:"getNumAttributes",value:function(e){return e.apool.numToAttrib}},{key:"getAttribs",value:function(e){return e.initialAttributedTexts.attribs[0]}}]),r}(B);function ge(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=G()(e);if(n){var i=G()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return z()(this,r)}}var ye=function(e){U()(r,e);var n=ge(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"handleOps",value:function(e,n,r,o){for(;e.length>0;){var i=e.shift(),a=i.p,c=i.action,s=c.oi,l=c.od,u=c.li,d=c.ld;this.handlePropertyChange(l,s,d,u,a,n,r,o)}}},{key:"handlePropertyChange",value:function(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=e||r,d=n||o;this.handleNormalPropertyChange(l()(i),u,d,a,c,s),this.patchProperty(["user_id"],s)}}]),r}(B),be=r("dx_SAZJ"),_e=r.n(be),xe=r("dx_zUqt"),ke=r("dx_QBqw"),Ee=r("dx_bEot");function Oe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Se(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Oe(Object(r),!0).forEach((function(n){c()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Ce(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=G()(e);if(n){var i=G()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return z()(this,r)}}var we=function(e){U()(r,e);var n=Ce(r);function r(){return g()(this,r),n.apply(this,arguments)}return b()(r,[{key:"patchProperty",value:function(e,n){"undefined"!==typeof n&&H()(G()(r.prototype),"patchProperty",this).call(this,e,n)}},{key:"handleComplexPropertyChange",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5?arguments[5]:void 0;this.handleNormalPropertyChange(r,e,n,o,i,a),this.patchProperty(["user_id"],a)}},{key:"handleNormalPropertyChange",value:function(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";if(0===e.length&&r&&!n){var s=r.cell_set;for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&this.handleNormalPropertyChange(["cell_set",l],n,s[l],i,a,c)}if(2===e.length&&"cell_set"===e[0]&&r&&!n){var u=r,d=u.block_id;a[d]&&(a[d].data.children=[]);var f=this.handleInsertNode(0,d,i,a,c);r&&(r.block_id=f.id)}this.isAdded||(null===(o=this.parent)||void 0===o?void 0:o.isDeleted)||B.ignoreProps.includes(e[e.length-1])||this._changeManager.push(e.join("."),n,r),this.patchProperty(e,r)}},{key:"handleOtherOp",value:function(e,n,o){var i=e.p,a=e.action;if(2!==i.length)return H()(G()(r.prototype),"handleOtherOp",this).call(this,e,n,o);var c=a.li,s=a.ld;if(!c&&!s)return H()(G()(r.prototype),"handleOtherOp",this).call(this,e,n,o);if(c){var l=J()(i,2),u=l[0],d=l[1],f=u.split("s_id")[0];this.nodeData["".concat(f,"s_id")].splice(Number(d),0,c)}else if(s){var h=this._changeManager.getChanges(),p=null===h||void 0===h?void 0:h.from;for(var v in p)if(Object.prototype.hasOwnProperty.call(p,v)){var m=p[v];"undefined"!==typeof m&&Object(k.set)(this.nodeData,v,m)}}else;}},{key:"getChangeDetail",value:function(){var e=this._changeManager.getChanges();if(!e)return H()(G()(r.prototype),"getChangeDetail",this).call(this);var n=Object(Ee.u)(e),o=n.changedCellBlockIds,i=n.isAddCell,a=n.isDelCell,c=n.isMerge;if(!i&&!a&&!c)return H()(G()(r.prototype),"getChangeDetail",this).call(this);if(c){var s=H()(G()(r.prototype),"getChangeDetail",this).call(this);return this.filterHideCellData(s)}var l=_e()(o),u=l[0];return[{id:u,siblings:l.slice(1),recordId:u}]}},{key:"getBlockIdByChildren",value:function(){return[]}},{key:"getSnapshotData",value:function(){var e=H()(G()(r.prototype),"getSnapshotData",this).call(this),n=e[this.id];this.transformTableData(this.id,n.data);var o=n.data,i=o.rows_id,a=o.columns_id,s=o.cell_set,l=this.checkTableCellSetIntegrity(i,a,s);if(!l.length)return e;var u=this.generateCellInfoByCellId(l),d=this.generatePatchTableCellSet(u),f=this.generatePatchTableBlockSnapshot(u.map((function(e){return e.blockId})));return Object.assign(e,c()({},this.id,Se(Se({},n),{},{data:Se(Se({},n.data),{},{cell_set:Se(Se({},s),d)})})),f)}},{key:"transformTableData",value:function(e,n){var r=n,o=r.rows_id,i=r.columns_id,a=r.cell_set,c=r.column_set,s={},l={},u=o.map((function(n){return"".concat(n,"-").concat(e)})),d=i.map((function(n){return"".concat(n,"-").concat(e)}));Object.keys(a).forEach((function(n){var r=Object(ke.j)(n),o=J()(r,2),i=o[0],c=o[1];s["".concat(i,"-").concat(e).concat(c,"-").concat(e)]=a[n]})),Object.keys(c).forEach((function(n){l["".concat(n,"-").concat(e)]=c[n]})),delete(n=Object.assign(n,{rows_id:u,columns_id:d,cell_set:s,column_set:l})).children}},{key:"generateCellInfoByCellId",value:function(e){return e.map((function(e){return{cellId:e,blockId:Object(xe.t)()}}))}},{key:"generatePatchTableCellSet",value:function(e){return e.reduce((function(e,n){var r=n.cellId,o=n.blockId;return e[r]={block_id:o,merge_info:{row_span:1,col_span:1}},e}),{})}},{key:"generatePatchTableBlockSnapshot",value:function(e){var n=this;return e.reduce((function(e,r){var o={type:_.B.CELL,id:r,parent_id:n.id,page_id:"",version:1,children:[],comments:[]},i=B.generateBlockNode(_.B.CELL);return n.handleNodeInit(r,o,n,!0,r,i,{},{},n.userId),Object.assign(e,i.getSnapshotData()),e}),{})}},{key:"checkTableCellSetIntegrity",value:function(e,n,r){return e.reduce((function(e,o){return n.forEach((function(n){var i="".concat(o).concat(n);i in r||e.push(i)})),e}),[])}},{key:"filterHideCellData",value:function(e){var n=this.nodeData,r=Object(ke.c)(n),o=[];return r.forEach((function(e){e.forEach((function(e){e.sourceCellId!==e.cellId&&o.push(e.cellRecordId)}))})),e.filter((function(e){var n=!1;return e.recordId.indexOf("-del")>-1&&(n=!0),!n&&o.forEach((function(r){e.recordId.indexOf(r)>-1&&(n=!0)})),!n}))}},{key:"handleNodeInit",value:function(e,n,r,o,i,a,c,s,l){var u=n.type;a.id=e,a.originId=i,a.type=u,a.isAdded=o,a.parent=r,a.nodeData=n;var d=function(e){return e===_.B.TABLE?Object.values(n.cell_set||{}).map((function(e){return e.block_id})):n.children||[]}(u);null===d||void 0===d||d.forEach((function(e,n){a.handleInsertNode(n,e,c,s,l)})),a.patchProperty(["type"],u),a.patchProperty(["user_id"],l)}},{key:"handleInsertNode",value:function(e,n,o,i,a){var c=H()(G()(r.prototype),"handleInsertNode",this).call(this,e,n,o,i,a),s=Object.values(this.nodeData.cell_set||{}).find((function(e){return e.block_id===n}))||i[n];return s&&(s.block_id=c.id),c}}]),r}(B);function Ie(e){var n=null;switch(e){case _.B.TEXT:case _.B.PAGE:case _.B.HEADING1:case _.B.HEADING2:case _.B.HEADING3:case _.B.HEADING4:case _.B.HEADING5:case _.B.HEADING6:case _.B.HEADING7:case _.B.HEADING8:case _.B.HEADING9:case _.B.HEADINGN:case _.B.TODO:case _.B.ORDERED:case _.B.BULLET:case _.B.CODE:case _.B.QUOTE:case _.B.CELL:n=new me;break;case _.B.TABLE:n=new we;break;case _.B.DIAGRAM:n=new ye;break;default:n=new B}return n}function Te(e,n,r,o){if(e.type===_.B.TABLE){var i=e.nodeData.cell_set;n=Object.keys(i).map((function(e){return i[e].block_id}))}if(n.forEach((function(n,i){De(e,i,n,r,o)})),e instanceof me){var a=D(e);a.added.length&&a.added.forEach((function(n){return De(e,e.children.length,n,r,o,!0)}))}}function De(e,n,r,o,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=o[r];if(!c)return null;var s=c.id,l=c.version,u=c.data,d=Ie(u.type);return d.id=s,d.originId=s,d.parent=e,d.nodeData=Object(k.cloneDeep)(u),d.version=l,d.type=u.type,d.commonBlockNodeProps=i,d.isInlineBlock=a,e.addChild(n,d),Te(d,u.children||[],o,i),d}var Ae=[_.B.BITABLE,_.B.SHEET],je=function(){function e(){g()(this,e),this._rootBlockNode=void 0,this._snapshotData=void 0,this._commonBlockNodeProps={}}return b()(e,[{key:"buildSnapshotTree",value:function(e){this._snapshotData=e;var n=function(e){var n=Object.values(e).filter((function(e){var n;return"page"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.type)}));return n&&n[0]?n[0]:null}(e);if(!n)throw new Error("\u5feb\u7167\u4fe1\u606f\u4e0d\u5168\uff0c\u67e5\u627e\u4e0d\u5230\u6839\u8282\u70b9\u5feb\u7167\u4fe1\u606f!!!");var r=n.version,o=n.id,i=n.data;this._rootBlockNode=Ie(i.type),this._rootBlockNode.id=o,this._rootBlockNode.originId=o,this._rootBlockNode.nodeData=i,this._rootBlockNode.version=r,this._rootBlockNode.type=i.type,this._rootBlockNode.commonBlockNodeProps=this._commonBlockNodeProps,Te(this._rootBlockNode,i.children||[],e,this._commonBlockNodeProps)}},{key:"buildChangeTree",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];B.ignoreProps=r,B.generateBlockNode=Ie;var o=e.changes,i=e.new_blocks,a=Object.keys(this._snapshotData),c=Object.keys(o),s=a.filter((function(e){return c.includes(e)}));s.forEach((function(e){var r=C(e,n._rootBlockNode);(null===r||void 0===r?void 0:r.isPatched)||null===r||void 0===r||r.patchChanges(o,i||{})}))}},{key:"getSnapshotDatas",value:function(){return{block_map:this.tagDraggingForSnapshotDatas(this._rootBlockNode.getSnapshotData()),id:this._rootBlockNode.id}}},{key:"tagDraggingForSnapshotDatas",value:function(e){var n=Object.keys(e);return n.forEach((function(r){if(Ae.includes(e[r].data.type)){var o=/-del$/.test(r),i=function(){for(var n=e[r].data.parent_id;n;){if(/-del$/.test(n))return!0;n=e[n].data.parent_id}return!1}();if(o||i){var a=r.replace(/-del$/,""),c=n.find((function(e){if(r===e)return!1;var n=e.split("-");return n[n.length-1]===a}));if(c){var s=e[r];s.data.type=x.y.HISTROY_DRAG_PLACEHOLDER,s.data.isDragged=!0,s.data.draggedTarget=c}}}})),e}},{key:"getChangeDetail",value:function(){return this._rootBlockNode.getChangeDetail()}},{key:"setCommonBlockNodeProps",value:function(e){this._commonBlockNodeProps=e}}]),e}();function Re(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function Ne(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Re(Object(r),!0).forEach((function(n){c()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Pe(e,n){return Me.apply(this,arguments)}function Me(){return(Me=d()(i.a.mark((function e(n,r){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:r,version:n,open_type:1},e.next=3,v.d.fetchHistorySnapshot(o).catch((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,n){return Le.apply(this,arguments)}function Le(){return(Le=d()(i.a.mark((function e(n,r){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={page_id:r,from_ver:n.page_info.from_ver,to_ver:n.page_info.to_ver},e.next=3,v.d.fetchChanges(o).catch((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,n){var r=!1;return e instanceof Error||n instanceof Error?r=!0:e.data?(n&&!n.data||e.code||n&&n.code)&&(r=!0):r=!0,e.code===f.y.KEY_INVALID||n&&n.code===f.y.KEY_INVALID?p.K.NO_SECRET:r?p.K.FAILED:null}function He(e,n,r,o){var i=e.data.block_map;Object.values(i).forEach((function(e){var n,r=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.text;r&&Object(h.U)(r)&&(e.data.text=Object(h.f)(r))}));var a=new je;if(a.setCommonBlockNodeProps({folded:!1}),a.buildSnapshotTree(i),r){var c=null===n||void 0===n?void 0:n.data;a.buildChangeTree(c,["comments"].concat(l()(null!==o&&void 0!==o?o:[])))}return{clientVar:Ne(Ne({},e.data),a.getSnapshotDatas()),historyChangeDetail:a.getChangeDetail()}}function We(e){return e.parentVersion?e.external_block_info:function(e){var n=e.minor_history,r={};return n.forEach((function(e){var n=e.external_block_info;for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=n[o];if(r[o]){var a=r[o];a.from_ver=Math.min(a.from_ver,i.from_ver),a.to_ver=Math.max(a.to_ver,i.to_ver)}else r[o]=Ne({},i)}})),r}(e)}function Ue(e,n,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=d()(i.a.mark((function e(n,r,o){var a,c,s,l,u,d,f,h,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.page_info,c=a.from_ver,s=a.to_ver,u=Pe((l=r&&c!==s)?c:s,o),d=l&&Be(n,o),e.next=7,u;case 7:return f=e.sent,e.next=10,d;case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0=null;case 13:if(h=e.t0,!(p=Fe(f,h))){e.next=17;break}return e.abrupt("return",{errorType:p});case 17:return e.abrupt("return",He(f,h,l));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},dx_J5JQ:function(e,n,r){"use strict";var o,i,a,c;r.d(n,"I",(function(){return o})),r.d(n,"o",(function(){return a})),r.d(n,"Q",(function(){return c})),function(e){e.Image="image",e.Diagram="diagram"}(o||(o={})),function(e){e.Fail="0",e.Success="1"}(i||(i={})),function(e){e.PREVIEW="preview",e.TRANSFORM="transform"}(a||(a={})),function(e){e.OPEN="open",e.CLOSE="close"}(c||(c={}))},dx_JGKO:function(e,n,r){},dx_JXPG:function(e,n,r){},dx_K7kB:function(e){e.exports=JSON.parse('{"code":0,"msg":"Success","data":{"has_more":false,"major_history":[{"description":"","edit_time":1623836088,"editor_ids":["6809803548256108546"],"minor_history":[{"description":"","edit_time":1623836088,"editor_ids":["6809803548256108546"],"name":"","page_info":{"from_ver":1,"title_changes":{"now":"","origin":""},"to_ver":4},"external_block_info":{"shtcnb3lw2sbic36u7emTMqhq7l_4ZRlJQ":{"block_token":"shtcnb3lw2sbic36u7emTMqhq7l_4ZRlJQ","block_type":"SHEET_BLOCK","from_ver":1,"to_ver":2}},"type":2,"version":2048}],"name":"","page_info":{"from_ver":1,"title_changes":{"now":"","origin":""},"to_ver":4},"type":2,"version":2048},{"description":"","edit_time":1623836077,"editor_ids":["6809803548256108546"],"minor_history":[{"description":"","edit_time":1623836077,"editor_ids":["6809803548256108546"],"name":"","page_info":{"from_ver":1,"title_changes":{"now":"","origin":""},"to_ver":1},"type":1,"version":1024}],"name":"","page_info":{"from_ver":1,"title_changes":{"now":"","origin":""},"to_ver":1},"type":1,"version":1024}],"user":{"6809803548256108546":{"anonymity":false,"cn_name":"\u90b1\u56fd\u8f89","en_name":"Guohui Qiu","id":"6809803548256108546"}}}}')},dx_KRfd:function(e,n,r){"use strict";r.d(n,"m",(function(){return x})),r.d(n,"zS",(function(){return k})),r.d(n,"e",(function(){return E})),r.d(n,"S",(function(){return O})),r.d(n,"W",(function(){return S})),r.d(n,"z",(function(){return C})),r.d(n,"h",(function(){return w})),r.d(n,"w",(function(){return I})),r.d(n,"x",(function(){return T})),r.d(n,"n",(function(){return A})),r.d(n,"Z",(function(){return j})),r.d(n,"A",(function(){return R}));var o=r("dx_VkAN"),i=r.n(o),a=r("dx_Dtiu"),c=r.n(a);function s(){var e=i()(["\n  line-height: 20px;\n  padding: 6px 18px;\n  margin-left: 12px;\n  border-radius: 4px;\n  font-size: 14px;\n  color: var(--N00-FG);\n  background-color: var(--B500);\n\n  &:hover {\n    background: var(--B400);\n  }\n  &:active {\n    background: var(--B600);\n  }\n"]);return s=function(){return e},e}function l(){var e=i()(["\n  ","\n"]);return l=function(){return e},e}function u(){var e=i()(["\n  ","\n  &.hidden {\n    display: none;\n  }\n"]);return u=function(){return e},e}function d(){var e=i()(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-top: 20px;\n"]);return d=function(){return e},e}function f(){var e=i()(["\n  flex: 1;\n  height: 18px;\n  line-height: 18px;\n  margin-right: 8px;\n  border: none;\n  text-overflow: ellipsis;\n  font-size: 14px;\n  color: var(--text-title);\n  background-color: unset;\n\n  &::placeholder {\n    margin-left: 2px;\n    color: var(--text-placeholder);\n  }\n"]);return f=function(){return e},e}function h(){var e=i()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 36px;\n  padding-left: 10px;\n  padding-right: 8px;\n  border: 1px solid var(--line-border-card);\n  border-radius: 4px;\n  margin-top: 18px;\n\n  &:hover {\n    border-color: var(--text-link-hover);\n  }\n"]);return h=function(){return e},e}function p(){var e=i()(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  cursor: pointer;\n"]);return p=function(){return e},e}function v(){var e=i()(["\n  position: relative;\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  border-radius: 4px;\n  &:hover {\n    background: var(--fill-hover);\n  }\n  &:active {\n    background: var(--fill-focus);\n  }\n"]);return v=function(){return e},e}function m(){var e=i()(["\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 24px;\n  color: var(--text-title);\n"]);return m=function(){return e},e}function g(){var e=i()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return g=function(){return e},e}function y(){var e=i()(["\n  min-width: 522px;\n  padding: 8px;\n"]);return y=function(){return e},e}function b(){var e=i()(["\n  border-radius: 4px;\n  padding: 8px;\n  line-height: 1.5;\n  font-size: 14px;\n  background-color: var(--bg-float);\n  box-shadow: ",";\n  border: 1px solid ",";\n  color: var(--text-placeholder);\n"]);return b=function(){return e},e}var _=r("dx_lvfY").D,x=c.a.div(b(),_,"var(--line-border-card)"),k=c.a.div(y()),E=c.a.div(g()),O=c.a.div(m()),S=c.a.i(v()),C=c.a.svg(p()),w=c.a.div(h()),I=c.a.input(f()),T=c.a.div(d()),D="\n  height: 26px;\n  line-height: 26px;\n  padding: 0 4px;\n  border-radius: 4px;\n  font-size: 14px;\n  color: var(--text-link-hover);\n\n  &:hover {\n    color: var(--text-link-hover);\n    background: rgba(var(--B500-raw),0.1);\n  }\n  &:active {\n    color: var(--text-link-hover);\n    background: rgba(var(--B500-raw),0.2);\n  }\n",A=c.a.a(u(),D),j=c.a.button(l(),D),R=c.a.button(s())},dx_MlOX:function(e,n,r){},dx_N5RR:function(e,n,r){},dx_N9m0:function(e,n,r){"use strict";r.r(n);var o=r("dx_QILm"),i=r.n(o),a=r("dx_lwsE"),c=r.n(a),s=r("dx_W8MJ"),l=r.n(s),u=r("dx_W7W2"),d=r.n(u),f=r("dx_a1gu"),h=r.n(f),p=r("dx_Nsbk"),v=r.n(p),m=r("dx_PvgT"),g=r("dx_cI7z"),y=r("dx_Icqc"),b=r("dx_WXwX"),_=r("dx_UtDZ"),x=r("dx_cDcd"),k=r.n(x),E=r("dx_h74D"),O=r("dx_O4O8"),S=r.n(O),C=r("dx_z8zm"),w=r("dx_hIkB"),I="COMMON:LIKE:GLOBAL_LIKE_MESSAGE",T=r("dx_bUYd"),D=r("dx_g0R0"),A=function(){function e(){c()(this,e)}return l()(e,[{key:"error",value:function(e,n){Object(T.h)({content:e,errorContext:Object(D.G)(n)})}}]),e}();function j(e){return e()}function R(){}var N=r("dx_zEdG"),P=r("dx_B28d");r("dx_kWjH");function M(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=v()(e);if(n){var i=v()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h()(this,r)}}function B(e,n,r,o){var i=_.LikeMsgHandler.register(e,n,r);return _.EventEmitter.on(I,o),function(){i(),_.EventEmitter.off(I,o)}}function L(){return Object(_.isOnline)()}var F=function(e){d()(r,e);var n=M(r);function r(){var e;c()(this,r);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).ref=Object(x.createRef)(),e._em=new S.a,e.openDetailDirectlyIfNeed=function(){j((function(){var n,r,o=_.urlHelper.parseQuery(_.history.location.search),a=o.show_like_list,c=i()(o,["show_like_list"]);"1"===a&&(null===(n=e.ref)||void 0===n||null===(r=n.current)||void 0===r||r.openDetail(g.t.LARK_INFO),_.history.replace({search:_.urlHelper.formatQuery(c)}))}))},e}return l()(r,[{key:"componentDidMount",value:function(){this._em.on("show_praise_page",(function(e){e.praise_page_source===g.t.CLICK&&Object(N.P)("ccm_doc_content_page_click",{record_id:Object(_.getToken)(),block_type:P.B.PAGE},{click:"click_like_list",target:"none"})})),this._em.on("client_praise_button",(function(e){return n="unlike"===e.action,void Object(N.P)("ccm_doc_content_page_click",{record_id:Object(_.getToken)(),block_type:P.B.PAGE},{click:"click_like",sub_click:n?"cancel":"like",target:"none"});var n})),this.openDetailDirectlyIfNeed()}},{key:"componentWillUnmount",value:function(){this._em.removeAllListeners()}},{key:"componentDidUpdate",value:function(e){this.props.inPresentationMode||e.presentationModeType===w.h.NONE||this.props.presentationModeType!==w.h.NONE||this.ref.current.likeServ.refresh()}},{key:"render",value:function(){var e=this,n=this.props,r=n.suiteType,o=n.curUser,i=n.targetInfo,a=n.style;return k.a.createElement(y.ThemeContext.Consumer,null,(function(){return k.a.createElement(b.t,{locale:_.i18nHelper.getLocale(),theme:Object(y.getCurrentThemeType)()===y.ThemeType.DARK?b.P.DARK:b.P.LIGHT},k.a.createElement("div",{className:"global-like-wrap page-main-item",style:a},k.a.createElement(m.S,{ref:e.ref,suiteType:r,targetInfo:i,curUser:{id:o.get("id"),tenantId:o.get("tenant_id"),name:o.get("name"),avatarUrl:o.get("avatar_url")},Toast:A,openDetail:undefined,registerMsg:B,eventEmitter:e._em,getIsOnline:L,toggleLiked:R,axiosInstance:_.request})))}))}}]),r}(x.Component),H=function(e){return{token:Object(_.selectCurrentSuiteToken)(e),refer_type:22}},W=Object(E.connect)((function(e){return{targetInfo:H(e),suiteType:Object(_.selectCurrentSuiteType)(e),curUser:Object(_.selectCurrentUser)(e),presentationModeType:Object(C.E)(e)}}))(F);n.default=W},dx_NDvC:function(e,n,r){"use strict";(function(t){r.d(n,"a",(function(){return E}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_TSYQ"),p=r.n(h),v=r("dx_cDcd"),m=r.n(v),g=r("dx_ekaZ"),y=r("dx_FbH3"),b=r("dx_yzqx"),_=r("dx_B28d"),x=r("dx_gfVm");r("dx_JXPG");function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var E=function(e){s()(r,e);var n=k(r);function r(){var e;o()(this,r);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).editorDOMRef=void 0,e.titleDOMRef=void 0,e.controller=new x.X,e.handleMouseEnter=function(){e.controller.handleMouseEnter(e.props.block,e.props.target)},e.handleMouseLeave=function(){e.controller.handleMouseLeave()},e}return a()(r,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var n=e.editorDOMRef.current,r=e.titleDOMRef.current;e.props.updateStyle({width:Math.max(n.offsetWidth,r.offsetWidth),height:n.offsetHeight})}),0)}},{key:"componentWillUnmount",value:function(){this.controller.destroy()}},{key:"render",value:function(){this.editorDOMRef=m.a.createRef(),this.titleDOMRef=m.a.createRef();var e=this.props,n=e.block,r=e.target,o=b.S.isMobile?"":t("CreationDoc_Docs_SlashCommand_Input_Placeholder"),i={};i.textAlign=n.props.record.snapshot.align;var a=!n.model.zoneState.isEmpty(),c=p()("text-editor",{"hide-placeholder":[_.D.CENTER,_.D.RIGHT].includes(n.props.record.snapshot.align),"non-empty":a});return m.a.createElement("div",{className:"translate-original-popover text-block"},m.a.createElement("div",{className:"popover-arrow__".concat(this.props.showAtTop?"top":"bottom")},m.a.createElement(g.S,{className:"popover-arrow-content"})),m.a.createElement("div",{className:"translate-original-popover__title",ref:this.titleDOMRef},t("common.translate_original_text")),m.a.createElement("div",{className:"translate-original-popover__main",ref:this.editorDOMRef},m.a.createElement(y.S,{block:n,target:r,editable:!1,copyable:!0,className:c,businessKey:"docx",style:i,placeholder:o})))}}]),r}(m.a.Component)}).call(this,r("dx_E9Eu"))},dx_P3yd:function(e,n,r){},dx_P5qH:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M5.75 5a.75.75 0 00-.743.648L5 5.75v12.507c0 .38.282.694.648.743l.102.007h5.374a.375.375 0 00.368-.3l.007-.075v-.75a.375.375 0 00-.3-.367l-.075-.008H6.5V6.5h10.046v4.128c0 .207.167.375.374.375h.75a.375.375 0 00.375-.375V5.375a.375.375 0 00-.3-.367L17.67 5H5.75zm8.281 6.542c-.11 0-.217.04-.301.11l-3.145 2.661a.467.467 0 000 .713l3.145 2.66a.467.467 0 00.768-.356v-1.824h4.629a.375.375 0 00.375-.375v-.75a.375.375 0 00-.375-.375h-4.63V12.01a.467.467 0 00-.466-.467z",fill:"#2B2F36"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_P5qk:function(e,n,r){"use strict";(function(t){var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_FBWK"),s=r("dx_PcQO"),l=r("dx_TSYQ"),u=r.n(l),d=r("dx_UtDZ"),f=r("dx_h6a8"),h=r("dx_cDcd"),p=r.n(h),v=r("dx_bUYd"),m=r("dx_CZKf"),g=r("dx_g0R0"),y=r("dx_HsgL"),b=r("dx_Je9X"),_=r("dx_D8nn"),x=r("dx_EjFk");r("dx_EGGJ");n.S=function(){var e=function(){return Object(d.getPermTypeAuthorityResult)(d.PermissionType.FILE_UPLOAD)},n=Object(f.throttle)(a()(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e()){n.next=2;break}return n.abrupt("return");case 2:return r=new x.J({pageToken:Object(d.getToken)()}),n.prev=3,n.next=6,r.getFileByDialog();case 6:if(i=n.sent){n.next=9;break}return n.abrupt("return");case 9:_.S.trigger(b.F.SET_COVER_DATA,[{type:m.i.Customize,file:i,imageUploader:r}]),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(3),console.log("[ cover error ]",n.t0),Object(v.h)({type:"error",key:"cover_error_tips",content:p.a.createElement("div",{style:{whiteSpace:"nowrap"}},t("CreationDoc_Docs_DocCover_FailedToModify_Toast")),duration:3e3,errorContext:Object(g.G)(n.t0,new Error("handleUpload failed!"))});case 16:case"end":return n.stop()}}),n,null,[[3,12]])}))),3e3,{trailing:!1});return p.a.createElement("div",{className:"cover-panel-upload-wrapper"},p.a.createElement("div",{className:"cover-panel-upload",onClick:n},function(){var n=!e(),r=u()("cover-panel-upload-btn",{disable:n}),o=p.a.createElement("label",{className:r,htmlFor:n?void 0:"upload-cover"},t("CreationDoc_Docs_DocCover_UploadImage_Button"));return n?p.a.createElement(s.Tooltip,{title:t("CreationDoc_ECM_AdminDisableToast"),destroyOnHide:!0,placement:"bottom",overlayStyle:{zIndex:1001}},o):o}(),p.a.createElement("p",{className:"cover-panel-upload-desc"},t("CreationDoc_Docs_DocCover_MaxSize_Desc"),p.a.createElement("a",{className:"cover-panel-upload-desc-more",onClick:function(e){e.stopPropagation();var n=Object(c.isFeishu)()?t("LarkCCM_Docs_ForMoreInformation_LinkFeishu"):t("LarkCCM_Docs_ForMoreInformation_LinkLark");Object(y.n)(n,"_blank")}},t("LarkCCM_Docs_ForMoreInformation_LearnMore")))))}}).call(this,r("dx_E9Eu"))},dx_Q8Q5:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M18.75 16.875v1.875a.75.75 0 01-.75.75H6a.75.75 0 01-.75-.75v-1.875c0-.207.168-.375.375-.375h.75c.207 0 .375.168.375.375V18h10.5v-1.125c0-.207.168-.375.375-.375h.75c.207 0 .375.168.375.375zm-6-3.348l2.258-2.258a.375.375 0 01.53 0l.53.53a.375.375 0 010 .53l-3.712 3.713a.374.374 0 01-.53 0L8.114 12.33a.375.375 0 010-.53l.53-.531a.375.375 0 01.53 0l2.076 2.076V5.25c0-.207.168-.375.375-.375h.75c.207 0 .375.168.375.375v8.277z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_QwPC:function(e,n,r){"use strict";r.d(n,"j",(function(){return f}));var o=r("dx_lSNA"),i=r.n(o),a=r("dx_J4zp"),c=r.n(a),s=r("dx_EnrF"),l=r("dx_cBZs");function u(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f={versionData:{},generateVersionData:function(e,n){this.resetData();var r=l.J.usersConfig,o={};Object.entries(r).forEach((function(e){var n=c()(e,2),r=n[0],i=n[1];o[r]=d(d({},i),{},{mobile:"",tenant_name:"",bgColor:i.backgroundColor})})),e&&Object.entries(e).forEach((function(e){var r=c()(e,2),i=r[0],a=r[1];f.versionData[i]={fromVer:a.from_ver,toVer:a.to_ver,isShowDiff:n,users:o}}))},resetData:function(){f.versionData={}},getData:function(e,n){var r=Object(s.W)(e,n);return f.versionData[r]}}},dx_R0RU:function(e,n,r){"use strict";r.d(n,"I",(function(){return f})),r.d(n,"v",(function(){return h}));var o=r("dx_VkAN"),i=r.n(o),a=r("dx_Dtiu"),c=r.n(a);function s(){var e=i()(["\n  line-height: 1.68;\n  font-size: 24px;\n  font-weight: 500;\n  text-align: left;\n  padding-bottom: 5px;\n  border-bottom: 1px solid var(--line-border-card);\n  margin-bottom: 8px;\n  color: var(--text-title);\n  user-select: none;\n"]);return s=function(){return e},e}function l(){var e=i()(["\n  padding-bottom: 90px;\n"]);return l=function(){return e},e}function u(){var e=i()(["\n  line-height: 22px;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: left;\n  padding-bottom: 7px;\n  .ipad & {\n    line-height: 21px;\n    font-size: 18px;\n  }\n"]);return u=function(){return e},e}function d(){var e=i()(["\n  user-select: none;\n  padding-bottom: 0.42rem;\n\n  .comment-textarea {\n    position: relative;\n    &.hidden {\n      visibility: hidden;\n    }\n    &__input {\n      padding: 12px 12px;\n      border: 1px solid var(--line-border-card);\n      .ios & {\n        border-width: 1px !important;\n      }\n      border-radius: 6px;\n      font-size: 16px;\n      color: var(--text-placeholder);\n      width: 100%;\n      -webkit-appearance: none;\n      line-height: 1.15;\n      .ipad & {\n        padding: 10px;\n        border-radius: 4px;\n        font-size: 14px;\n      }\n      .ios & {\n        /**\n          * \u89e3\u51b3border-left\u5728iPhoneX\u88ab\u6321\u4f4f\u7684bug\n          * \u53ef\u80fd\u539f\u56e0\u662f\u88ab\u5176\u4ed6\u6e32\u67d3\u5c42\u6321\u4f4f\u4e86\n          * \u5176\u4ed6\u89e3\u51b3\u529e\u6cd5\uff1a\n          * \u2460 \u8bbe\u7f6e border-left-width: 0.9px;\n          * \u2461 \u5220\u9664html.mobile\u7684 overflow-scrolling \u5c5e\u6027\n          * \u2462 \u8bbe\u7f6ewill-change\n          *\n          * android\u4e0b\u589e\u52a0\u8fd9\u4e2a\u6837\u5f0f\u4f1a\u5bfc\u81f4\u6dfb\u52a0\u7b2c\u4e8c\u6761\u5168\u6587\u8bc4\u8bba\u540eborder-bottom\u4e0d\u53ef\u89c1\ud83d\ude02\n          */\n        transform: translateZ(0);\n      }\n    }\n  }\n"]);return d=function(){return e},e}c.a.div(d()),c.a.div(u());var f=c.a.div(l()),h=c.a.div(s())},dx_RDfN:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M17.057 15.996l2.981 2.982a.375.375 0 010 .53l-.53.53a.375.375 0 01-.53 0l-2.982-2.981a7.5 7.5 0 111.06-1.06zM10.5 10.5V8.625a.375.375 0 01.375-.375h.75a.375.375 0 01.375.375V10.5h1.875a.376.376 0 01.375.375v.75a.376.376 0 01-.375.375H12v1.875a.376.376 0 01-.375.375h-.75a.375.375 0 01-.375-.375V12H8.625a.375.375 0 01-.375-.375v-.75a.375.375 0 01.375-.375H10.5zm.75 6.75a6 6 0 100-12 6 6 0 000 12z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_Remz:function(e,n,r){},dx_Rse4:function(e,n,r){},dx_Rswd:function(e,n,r){"use strict";(function(t){r.d(n,"A",(function(){return A}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lwsE"),s=r.n(c),l=r("dx_W8MJ"),u=r.n(l),d=r("dx_NWnn"),f=r("dx_PcQO"),h=r("dx_vDqi"),p=r.n(h),v=r("dx_UtDZ"),m=r("dx_faye"),g=r.n(m),y=r("dx_F0FY"),b=r("dx_bUYd"),_=r("dx_PQBD"),x=r("dx_yzqx"),k=r("dx_Fimk"),E=r("dx_g0R0"),O=r("dx_B28d"),S=r("dx_USRY"),C=r("dx_D8nn"),w=r("dx_U5UJ"),I=r("dx_swd6");r("dx_qBlk");function T(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return D(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var A=function(){function e(n){var r=this;s()(this,e),this.props=n,this.iframe=void 0,this.head=void 0,this.body=void 0,this.isPrintComment=!1,this.shouldTakeScreenshot=!1,this.fileBlocksNeedRender=[],this.run=function(e){r.isPrintComment=e,new I.v({iframe:r.iframe,onBeforePrint:r.handleBeforePrint,onWillPrint:r.handleWillPrint,onPrintFail:r.handlePrintFail,onAfterPrint:r.handleAfterPrint}).run()},this.handleBeforePrint=a()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.showToast(),e.next=3,r.handlePrintContent();case 3:case"end":return e.stop()}}),e)}))),this.handleWillPrint=function(){return new Promise((function(e){r.hideToast(),e(1)}))},this.handlePrintFail=function(e){console.error(e),r.hideToast(),Object(b.h)({content:t("export.print_timeout"),errorContext:Object(E.G)(e)}),Object(k.N)("docs_print_timeout",{token:Object(v.getEncryptToken)(),is_timeout:"true"})},this.handleAfterPrint=function(){var e,n;r.handleSuspendSheet(),null===(e=(n=r.props).onPrinted)||void 0===e||e.call(n),r.addedStyleInfoMap.clear()},this.bitableSheetReady=a()(o.a.mark((function e(){var n,i,a,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.props.blockManager,i=n.allBlockViews,a=T(i),e.prev=3,a.s();case 5:if((c=a.n()).done){e.next=24;break}if(s=c.value,r.getIsShow(s)){e.next=9;break}return e.abrupt("continue",22);case 9:if(l=s.model.snapshot,!Object(_.Y)(l)){e.next=12;break}return e.abrupt("continue",22);case 12:if(s.type!==O.B.BITABLE){e.next=18;break}return r.shouldTakeScreenshot=!0,e.next=16,s.getIsRenderedPromised();case 16:e.next=22;break;case 18:if(s.type!==O.B.SHEET){e.next=22;break}return r.shouldTakeScreenshot=!0,e.next=22,s.getIsRenderedPromised();case 22:e.next=5;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(3),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[3,26,29,32]])}))),this.getIsShow=function(e){return e.props.recursionProps.fold.isShow(e.id)},this.getAddBack=function(e,n,r){var o=e.cloneNode(!0);return n.forEach((function(e){var n=e.cloneNode(!0);o.appendChild(n)})),o.normalize(),o.querySelectorAll(r)},this.handleActiveSheet=function(){return r.notifyCanvasBlock({status:0,detail:{isBlob:!1}})},this.handleSuspendSheet=function(){return r.notifyCanvasBlock({status:1})},this.notifyCanvasBlock=function(){var e=a()(o.a.mark((function e(n){var i,a,c,s,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.props.blockManager,a=i.allBlockViews,c=!1,s=T(a),e.prev=4,s.s();case 6:if((l=s.n()).done){e.next=38;break}if((u=l.value)&&u.takeScreenshot&&r.getIsShow(u)){e.next=10;break}return e.abrupt("continue",36);case 10:if(d=u.model.snapshot,!Object(_.Y)(d)){e.next=13;break}return e.abrupt("continue",36);case 13:if(u.type!==O.B.SHEET){e.next=20;break}if(c){e.next=18;break}return c=!0,e.next=18,u.takeScreenshot(n);case 18:e.next=36;break;case 20:if(u.type!==O.B.MINDMAP){e.next=29;break}return e.next=23,u.getIsRenderedPromised();case 23:if(!e.sent){e.next=27;break}return u.enterBuffer(),e.next=27,u.takeScreenshot(n);case 27:e.next=36;break;case 29:if(u.type!==O.B.BITABLE){e.next=36;break}return e.next=32,u.getIsRenderedPromised();case 32:if(!e.sent){e.next=36;break}return u.enterBuffer(),e.next=36,u.takeScreenshot(n);case 36:e.next=6;break;case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(4),s.e(e.t0);case 43:return e.prev=43,s.f(),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[4,40,43,46]])})));return function(n){return e.apply(this,arguments)}}(),this.handlePrintContent=a()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.iframe.contentDocument,r.head=null===n||void 0===n?void 0:n.querySelector("head"),r.body=null===n||void 0===n?void 0:n.querySelector("body"),e.next=5,r.initHeader();case 5:return e.next=7,r.handleAsyncLoadCommentImg();case 7:return e.next=9,r.initBody();case 9:return e.next=11,Promise.all([r.asyncLoadAllLoadingImg(),r.asyncLoadAllImg(),r.asyncLoadFonts(),r.asyncLoadEquationFonts(),r.handleAsyncLoadCoverImg(r.body),r.handleAsyncLoadCommentTheme(r.body)]);case 11:r.setWaterHeight();case 12:case"end":return e.stop()}}),e)}))),this.addedStyleInfoMap=new Map,this.getParents=function(e,n){for(var r=[],o=e.parentNode;o&&o!==document;)o.classList.contains(n)&&r.push(o),o=o.parentNode;return r},this.asyncLoadEquationFonts=function(){var e=r.iframe.contentDocument;if(e&&r.body.querySelector(".editor-kit-equation-view"))return new Promise((function(n){var o,i,a=[];(Array.from(document.querySelectorAll("head > link")).forEach((function(e){var n;"stylesheet"===e.getAttribute("rel")&&(null===(n=e.getAttribute("href"))||void 0===n?void 0:n.includes("katex"))&&r.head.appendChild(e.cloneNode(!0))})),e.fonts)?(null===(o=(i=e.fonts).forEach)||void 0===o||o.call(i,(function(e){var n;(null===e||void 0===e||null===(n=e.family)||void 0===n?void 0:n.includes(w.l))&&(null===e||void 0===e?void 0:e.load)&&a.push(e.load())})),Promise.all(a).then(n).catch(n)):setTimeout((function(){n()}),1e3)}))},this.getSiblings=function(e,n){var r=[],o=e.parentNode,i=null===o||void 0===o?void 0:o.querySelectorAll(n);if(i)for(var a=0;a<i.length;a++)1===i[a].nodeType&&i[a]!==e&&i[a].parentNode===o&&r.push(i[a]);return r},this.iframe=n.iframe}return u()(e,[{key:"waitAllReady",value:function(){var e=a()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.waitTableReady(),this.waitCanvasReady()]));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitTableReady",value:function(){var e=document.querySelector(".docx-table-block .scrollable-container");e&&(e.scrollLeft=0)}},{key:"waitCanvasReady",value:function(){var e=a()(o.a.mark((function e(){var n,r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=0,r=document.querySelector(w.t),i=null===r||void 0===r?void 0:r.querySelectorAll("canvas"),a=this.getAddBack(r,i,"canvas"),c=0;c<a.length;c++)a[c].setAttribute("data-print",(n++).toString());if(!n&&!this.shouldTakeScreenshot){e.next=16;break}return e.prev=6,e.next=9,this.handleActiveSheet();case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(6),e.next=15,this.handleSuspendSheet();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"setWaterHeight",value:function(){if(x.S.isSafari){var e,n=this.body.querySelectorAll('[data-watermark="1"]'),r=(null===(e=this.iframe.contentWindow)||void 0===e?void 0:e.document.body.scrollHeight)||1e3;n.forEach((function(e){e.style.height="".concat(r,"px")}))}}},{key:"initHeader",value:function(){var e=a()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.head).innerHTML="",n.innerHTML+='<meta charset="UTF-8">',this.initTitle(),e.next=6,this.initStyle();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initBody",value:function(){var e=a()(o.a.mark((function e(){var n,r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initContent();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:this.addMissingStyle(),r=document.body.getAttribute("id")||"",this.body.innerHTML="",this.body.setAttribute("id",r),i=this.initWatermark(),(a=document.createElement("div")).classList.add("print"),i.length>0?(c=a,i.forEach((function(e){c=c.appendChild(e)})),c=c.appendChild(n)):c=n,this.body.appendChild(a).appendChild(c),this.isPrintComment&&this.initComment(n,a);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initTitle",value:function(){var e,n=(null===(e=document.querySelector("title"))||void 0===e?void 0:e.textContent)||"",r=document.createElement("title");r.innerText=n,this.head.appendChild(r)}},{key:"addMissingStyle",value:function(){var e=this;Array.from(document.querySelectorAll("style")).forEach((function(n){var r=e.addedStyleInfoMap.get(n);r||(r={cloneElement:n.cloneNode(!0),addedRules:new Set},e.head.appendChild(r.cloneElement));var o=r,i=o.cloneElement,a=o.addedRules;if("styled"in n.dataset&&"styledVersion"in n.dataset||"styledComponents"in n.dataset||"emotion"in n.dataset)for(var c=0;c<n.sheet.rules.length;c++){var s=n.sheet.rules[c];a.has(s)||(a.add(s),i.sheet.insertRule(s.cssText))}}))}},{key:"initStyle",value:function(){var e=a()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"<style>body{-webkit-print-color-adjust: exact; print-color-adjust: exact;}</style>",this.head.innerHTML+="<style>body{-webkit-print-color-adjust: exact; print-color-adjust: exact;}</style>",this.addMissingStyle(),Object(y.e)(this.head,w.Ei),e.next=6,this.asyncImportAllCSS();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initContent",value:function(){var e=a()(o.a.mark((function e(){var n,r,i,a,c,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.props.blockManager.layoutManager).enableVirtualRender){e.next=4;break}return e.next=4,n.enterForceLayoutForAll();case 4:if(r=document.querySelector(w.t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.bitableSheetReady();case 9:return e.next=11,this.waitAllReady();case 11:return e.next=13,this.handleImageBlockLoad();case 13:return e.next=15,this.pollBlockReady();case 15:return e.next=17,this.fileBlockReady();case 17:if(i=r.cloneNode(!0),!n.enableVirtualRender){e.next=21;break}return e.next=21,n.quitForceLayoutForAll();case 21:return this.fileBlocksNeedRender.forEach((function(e){e.toggleRenderHiddenCardDom(!1)})),this.fileBlocksNeedRender=[],a=i.querySelectorAll(".docx-iframe-block"),Array.prototype.forEach.call(a,(function(e){e.remove()})),c=i.querySelectorAll(".preview-content iframe"),Array.prototype.forEach.call(c,(function(e){var n=s.getParents(e,"box-preview-wrap");e.parentNode.remove();for(var r=0;r<n.length;r++){n[r].querySelectorAll(".drive-cover-preview").forEach((function(e){e.style.display="block";var n=e.querySelector("img"),r=null===n||void 0===n?void 0:n.getAttribute("data-src");r&&(null===n||void 0===n||n.setAttribute("src",r))}))}})),this.handlePollBlock(i),this.handleISVBlock(i),this.removeImagePlacehold(i),e.abrupt("return",i);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initWatermark",value:function(){var e=[];return document.querySelectorAll("div[class*='".concat(w.d,"'].print-watermark")).forEach((function(n){var r=n.cloneNode(!0);r&&(r.style.position="fixed",r.style.top="0",r.setAttribute("data-watermark","1"),r.classList.remove("print-watermark"),e.push(r))})),e}},{key:"initComment",value:function(e,n){var r,o;e.classList.add("has-comment");var i=null===(r=document.querySelector("#docCommentContainer"))||void 0===r?void 0:r.cloneNode(!0);if(i){var a;i.style.transform="translateX(0px)";for(var c=i.getElementsByTagName("div"),s=0;s<c.length;s++){var l=c[s];l.hasAttribute("data-id")&&(l.style.visibility="visible")}var u=i.querySelector(".docx-comment__first-comment-btn");null===u||void 0===u||null===(a=u.parentNode)||void 0===a||a.removeChild(u);var d=null===i||void 0===i?void 0:i.querySelector(".comment-panel--out-viewport");null===d||void 0===d||d.classList.remove("comment-panel--out-viewport"),n.appendChild(i)}var f=null===(o=document.querySelector(".docx-global-comment"))||void 0===o?void 0:o.cloneNode(!0);if(f){f.style.marginLeft="0px";var h=f.querySelectorAll(".comment-list-item__wrapper");Array.prototype.forEach.call(h,(function(e){e.classList.remove("highlight-comment")}));var p=null===f||void 0===f?void 0:f.querySelector(".docx-global-comment__textarea");null===p||void 0===p||p.remove(),e.appendChild(f)}}},{key:"asyncImportAllCSS",value:function(){var e=this,n=Array.from(document.querySelectorAll("link[rel=stylesheet]"));return Promise.all(n.map((function(n){return e.asyncImportCSS(n)})))}},{key:"asyncImportCSS",value:function(e){var n=this,r=e.href;if(r)return new Promise((function(o){p()({url:r,withCredentials:!1}).then((function(r){var i=document.createElement("style");i.media=e.media||"all",i.innerText=r.data,n.head.appendChild(i),o(1)})).catch()}))}},{key:"handleImageBlockLoad",value:function(){var e=this.props.blockManager.allBlockViews,n=[];return e.forEach((function(e){e.type===O.B.IMAGE&&n.push(e.loadImage())})),Promise.all(n)}},{key:"removeImagePlacehold",value:function(e){e.querySelectorAll(".docx-image-block").forEach((function(e){var n=e.querySelector(".docx-block-loading");n&&n.remove()}))}},{key:"handleISVBlock",value:function(e){var n=this.props.blockManager;e.querySelectorAll(".docx-isv-block").forEach((function(e){var r=Number(e.getAttribute("data-block-id")),o=e.getElementsByClassName("isv-block-container")[0],i=e.getElementsByClassName("docx-block-loading-container")[0],a=e.getElementsByClassName("docx-block-loading")[0];i&&(i.classList.remove("docx-block-loading-container-block-loading"),a&&i.removeChild(a));var c=n.getBlockViewByBlockIdNotCheck(r);o&&c&&g.a.render(c.renderPlaceholder(),o)}))}},{key:"pollBlockReady",value:function(){var e=a()(o.a.mark((function e(){var n,r,i,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.blockManager,r=n.allBlockViews,i=[],c=T(r),e.prev=4,c.s();case 6:if((s=c.n()).done){e.next=13;break}if(l=s.value,this.getIsShow(l)){e.next=10;break}return e.abrupt("continue",11);case 10:l.type===O.B.POLL&&i.push(l);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:return e.next=23,Promise.all(i.map(function(){var e=a()(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.resizeFinishPromise();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 23:case"end":return e.stop()}}),e,this,[[4,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"handlePollBlock",value:function(e){e.querySelectorAll(".docx-poll-block").forEach((function(e){e.querySelectorAll(".poll-input-textarea").forEach((function(e){var n=e.parentElement;n&&e&&n.removeChild(e)})),e.querySelectorAll(".poll-input-fake-textarea").forEach((function(e){"DIV"===e.tagName&&(e.style.cssText="position: unset; color: inherit; width: 100%; white-space: pre-wrap; word-break: break-word")}))}))}},{key:"fileBlockReady",value:function(){var e,n=T(this.props.blockManager.allBlockViews);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.getIsShow(r))if(r.type===O.B.FILE)r.getViewType()===S.t.Preview&&(r.toggleRenderHiddenCardDom(!0),this.fileBlocksNeedRender.push(r))}}catch(o){n.e(o)}finally{n.f()}}},{key:"handleAsyncLoadCommentImg",value:function(){if(this.isPrintComment){var e=[];return C.S.trigger(w.E,[function(n){return e.push(n)}]),Promise.all(e)}}},{key:"asyncLoadAllLoadingImg",value:function(){var e=Array.from(this.body.querySelectorAll("i.image-loading:not(.image-loaded)+img"));return Promise.all(e.map(this.asyncLoadLoadingImg))}},{key:"asyncLoadLoadingImg",value:function(e){var n=this;return new Promise((function(r){var o=e.getAttribute("data-src");if(o){var i=n.getSiblings(e,"i.image-loading:not(.image-loaded)"),a=function n(){for(var o=0;o<i.length;o++){var a;null===(a=i[o].parentNode)||void 0===a||a.removeChild(i[o])}r(1),e.removeEventListener("error",n),e.removeEventListener("load",n)};e.addEventListener("error",a),e.addEventListener("load",a);var c=o.replace(/"/g,"").replace(/'/g,"");e.setAttribute("src",c)}else r(1)}))}},{key:"asyncLoadAllImg",value:function(){var e=Array.from(this.body.querySelectorAll("img"));return Promise.all(e.map(this.asyncLoadImg))}},{key:"asyncLoadImg",value:function(e){return new Promise((function(n){e.complete?n(1):(e.addEventListener("load",n),e.addEventListener("error",n))}))}},{key:"checkIsCodeBlockExist",value:function(){return!!document.querySelector(".code-block")}},{key:"asyncLoadFonts",value:function(){var e=this;if(this.checkIsCodeBlockExist())return new Promise((function(n){var r=e.iframe.contentDocument;r&&r.fonts?r.fonts.load('100px "'.concat(w.L,'"'),"BESbswy").then(n).catch():setTimeout(n,1e3)}))}},{key:"handleAsyncLoadCoverImg",value:function(e){var n=Array.from(e.querySelectorAll(".preview-cover-img")).filter((function(e){return e.getAttribute("src")}));return Promise.all(n.map(this.generateCoverImgLoadPromise))}},{key:"handleAsyncLoadCommentTheme",value:function(){var e=a()(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){Object(d.replaceThemeOnHtml)("light",n),e()})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"generateCoverImgLoadPromise",value:function(e){return new Promise((function(n){e.onload=function(){var r=e.closest(".docx-file-block-inner-container"),o=null===r||void 0===r?void 0:r.querySelector(".drive-cover-preview"),i=null===r||void 0===r?void 0:r.querySelector(".preview-content");o&&i&&(i.innerHTML="",i.append(o)),n()},e.onerror=function(){var r=e.closest(".docx-file-block-inner-container");if(r){var o;null===(o=r.querySelector(".preview-wrap"))||void 0===o||o.remove();var i=r.querySelector(".file-card");i&&(i.style.display="flex")}n()}}))}},{key:"showToast",value:function(){f.toast.loading({key:w.a,type:"loading",content:t("export.start_print"),duration:0,showCloseIcon:!1})}},{key:"hideToast",value:function(){f.toast.destroy(w.a)}}]),e}()}).call(this,r("dx_E9Eu"))},dx_S4is:function(e,n,r){},dx_SD0n:function(e,n,r){},dx_SL5O:function(e,n,r){"use strict";(function(t){r.d(n,"S",(function(){return D}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_FBWK"),p=r("dx_PcQO"),v=r("dx_TSYQ"),m=r.n(v),g=r("dx_cDcd"),y=r.n(g),b=r("dx_A3AG"),_=r("dx_qx8A"),x=r.n(_),k=r("dx_VBpI"),E=r("dx_AI6m");r("dx_unwB");function O(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var S=y.a.createElement("div",{className:"help-siderbar__title"},t("Common_Shortcut_Tab"));function C(e){var n=null,r="function"===typeof e?e:function(){return e};return function(){return n||(n=r())}}var w=C((function(){return{position:"fixed",top:Object(E.w)(),right:"0",zIndex:99}})),I=C({padding:"12px 17px 12px 17px",color:Object(h.getThemeColorByToken)("text-title")}),T=C((function(){return{padding:"24px 16px 0px 16px",paddingBottom:Object(E.O)()}})),D=function(e){s()(r,e);var n=O(r);function r(){return o()(this,r),n.apply(this,arguments)}return a()(r,[{key:"componentDidUpdate",value:function(){if(this.props.active){var e=document.getElementsByClassName("bear-web-x-container")[0];null===e||void 0===e||e.classList.add("has-helpsliderbar")}else{var n=document.getElementsByClassName("bear-web-x-container")[0];null===n||void 0===n||n.classList.remove("has-helpsliderbar")}}},{key:"renderShortcuts",value:function(){var e=this;return y.a.createElement("div",{className:"help-siderbar-content"},E.d.map((function(n){var r=n.header,o=n.list,i=n.intro,a=n.headerStyle,c=void 0===a?"":a;return e.renderShortcutsItem(r,o,i,c)})))}},{key:"renderShortcutsItem",value:function(e,n,r,o){return y.a.createElement("div",null,y.a.createElement("div",{className:"help-siderbar__header ".concat(o)},e),y.a.createElement("div",{className:"help-siderbar__body"},y.a.createElement("ul",{className:"help-siderbar__intro"},r?y.a.createElement("div",{className:"content-item__intro"},r):null,n.map((function(e){var n=e.Icon;return y.a.createElement(k.S,{isPlaceholder:e.isPlaceholder,Icon:n,description:e.description,command:e.command,key:e.command})})))))}},{key:"render",value:function(){return y.a.createElement(p.Drawer,{title:S,visible:this.props.active,placement:"right",mask:!1,maskClosable:!1,showCloseIcon:!0,width:"314px",headerStyle:I(),bodyStyle:T(),drawerStyle:{boxShadow:"none",borderLeft:"1px solid var(--line-border-card)"},onClose:function(){return x.a.dispatch(Object(b.l)(!x.a.getState().docx.comment.helpPanelShown))},getContainer:!1,style:w(),zIndex:500},y.a.createElement("div",{className:m()("sidebar",{active:this.props.active})},y.a.createElement("div",{className:"help-siderbar"},y.a.createElement("div",{className:"help-siderbar-wrapper"},this.renderShortcuts()))))}}]),r}(y.a.Component)}).call(this,r("dx_E9Eu"))},dx_SOtg:function(e,n,r){"use strict";r.d(n,"R",(function(){return l})),r.d(n,"t",(function(){return u})),r.d(n,"A",(function(){return d})),r.d(n,"K",(function(){return f}));var o=r("dx_lSNA"),i=r.n(o),a=r("dx_Fimk");function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(a.N)("ccm_docs_translate_page_click",s({click:e,target:n},r))}function u(e,n){l("begin_translation","none",{original_language:e.config.src_lang,target_language:e.config.target_lang,translation_type:n})}function d(e,n){l("translation_status","none",{original_language:e.config.src_lang,target_language:e.config.target_lang,status:n})}function f(e,n){Object(a.N)("ccm_doc_translate_reqeust_dev",s({original_language:n.config.src_lang,target_language:n.config.target_lang},e))}},dx_SVj9:function(e,n,r){"use strict";(function(t){r.d(n,"b",(function(){return e})),r.d(n,"m",(function(){return E}));var e,o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_PcQO"),v=r("dx_TSYQ"),m=r.n(v),g=r("dx_cDcd"),y=r.n(g),b=r("dx_faye"),_=r.n(b),x=r("dx_yzqx");r("dx_MlOX");function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}!function(e){e[e.doc=0]="doc",e[e.comment=1]="comment"}(e||(e={}));var E=function(n){l()(o,n);var r=k(o);function o(){var e;i()(this,o);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).handleChange=function(n){e.props.onChange(n)},e}return c()(o,[{key:"renderPanel",value:function(){var n=this.props,r=n.dialogVisible,o=n.printType,i=n.onConfirm,a=n.onCancel,c=n.onClose;return y.a.createElement(p.Dialog,{className:"print-dialog",title:t("common.doc_print.print_alert_title"),okText:t("common.confirm"),cancelText:t("common.cancel"),width:500,visible:r,destroyOnClose:!0,onOk:i,onCancel:a,onAfterClose:c},y.a.createElement("div",{className:"print-panel"},y.a.createElement(p.Radio.Group,{className:"print-radio-wrap",onChange:this.handleChange,value:o},y.a.createElement("div",{className:"print-radio"},y.a.createElement(p.Radio,{value:e.doc},t("common.doc_print.print_option.body_only"))),y.a.createElement("div",{className:"print-radio"},y.a.createElement(p.Radio,{value:e.comment},t("common.doc_print.print_option.include_comment"))))))}},{key:"renderIframe",value:function(){var e=this.props.getIframe;return y.a.createElement("iframe",{ref:e,name:"printIframe",className:this.iframeClassName,style:this.iframeStyle,src:this.iframeSrc})}},{key:"render",value:function(){return _.a.createPortal(y.a.createElement("div",null,this.renderPanel(),this.renderIframe()),document.body)}},{key:"isUnderIE",get:function(){return window.location.hostname!==document.domain&&x.S.msie}},{key:"iframeClassName",get:function(){return m()("print-iframe",{MSIE:this.isUnderIE})}},{key:"iframeStyle",get:function(){return{display:this.props.isPrinting?"block":"none"}}},{key:"iframeSrc",get:function(){return this.isUnderIE?'javascript:document.write("<head><script>document.domain="'.concat(document.domain,'";\n                       <\/script></head><body></body>")'):void 0}}]),o}(g.PureComponent)}).call(this,r("dx_E9Eu"))},dx_SgwB:function(e,n,r){},dx_T3mo:function(e,n,r){"use strict";r.d(n,"D",(function(){return s}));var o=r("dx_UtDZ"),i=r("dx_cDcd"),a=r("dx_h74D"),c=r("dx_E2oU"),s=function(e,n){var r=Object(a.useDispatch)(),s=Object(a.useSelector)(c.s);Object(i.useEffect)((function(){console.log("[translate]: translateBase init"),e(s,o.NUM_SUITE_TYPE.DOCX,r).then(n).catch((function(e){console.error("[TranslateBase]: fetch config failed: ",e)}))}),[])}},dx_T55T:function(e,n,r){"use strict";r.d(n,"w",(function(){return l}));var o=r("dx_J4zp"),i=r.n(o),a=r("dx_h6a8"),c=r("dx_cDcd"),s=r("dx_D8nn"),l=function(){var e=Object(c.useState)(!1),n=i()(e,2),r=n[0],o=n[1],l=Object(c.useRef)(a.noop),u=Object(c.useCallback)((function(e,n){l.current=n||a.noop,o(e)}),[]);return Object(c.useEffect)((function(){return s.S.on(s.p.TRANSLATE.TRANSLATE_SHOW_NOTICE,u),function(){s.S.off(s.p.TRANSLATE.TRANSLATE_SHOW_NOTICE,u)}}),[]),{visible:r,setVisible:o,clickActionCb:l.current}}},dx_TBtt:function(e,n,r){"use strict";r.d(n,"d",(function(){return g})),r.d(n,"x",(function(){return y})),r.d(n,"A",(function(){return _}));var o=r("dx_o0o1"),i=r.n(o),a=r("dx_J4zp"),c=r.n(a),s=r("dx_yXPU"),l=r.n(s),u=r("dx_QxNg"),d=r("dx_jBAU"),f=r("dx_xI7u"),h=r("dx_eSV8"),p={default:r("dx_Cyk2"),running:{code:0,msg:"Success",data:{status:0}},fail:{code:0,msg:"Success",data:{status:2}},error:{code:1,msg:"Fail"}},v={fetchHistoryList:{default:r("dx_K7kB"),old:{code:0,msg:"Success",data:{major_history:[{id:"major_history_id1",version:0,name:"\u9700\u6c42\u8bc4\u5ba1\u5b9a\u7a3f",edit_time:1617883379,minor_history:[{id:"minor_history1",version:.1,name:"string",edit_time:123456789,type:2,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,10]}],revert_version:{time:123456789,id:"string"},origin:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"},now:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"}}},{id:"minor_history2",version:.2,name:"string",edit_time:123456789,type:2,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,27]}],origin:{title:"string"},now:{title:"string"}}},{id:"minor_history3",version:.3,name:"string",edit_time:123456789,type:2,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,30]},{block_token:"bascnW1nVcill2UU1OZ2CSKVr1g_tblDrQXOW9",block_type:"BITABLE_BLOCK",rev_range:[1,3]}],revert_version:{time:123456789,id:"string"},origin:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"},now:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"}}}],type:1,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,10]}],revert_version:{time:143456789},origin:{icon:{type:2,key:"531967b7-d010-4404-8f89-41348976becg",fs_unit:"eu_nc-cdn"}},now:{icon:{type:2,key:"41d41fdb-6e22-4df2-b913-6932df85516g",fs_unit:"heu_nc-cdn"}}}},{id:"major_history_id2",version:1,name:"",edit_time:1594176346,minor_history:[{id:"minor_history1",version:1.1,edit_time:123456789,type:1,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,10]}],revert_version:{time:123456789,id:"string"},origin:{icon:{type:1,key:"string",fs_unit:"string"},title:"\u9700\u6c42\u6d4b\u8bd5"},now:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"}}}],type:1,user_id:["12345678"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,33]},{block_token:"bascnW1nVcill2UU1OZ2CSKVr1g_tblDrQXOW9",block_type:"BITABLE_BLOCK",rev_range:[1,3]}],origin:{icon:{type:2,key:"531967b7-d010-4404-8f89-41348976becg",fs_unit:"eu_nc-cdn"},title:"\u6d4b\u8bd5\u6587\u6863\u521d\u7a3f"},now:{icon:{type:2,key:"41d41fdb-6e22-4df2-b913-6932df85516g",fs_unit:"heu_nc-cdn"},title:"\u6d4b\u8bd5\u6587\u6863\u4e8c\u7a3f"}}},{id:"major_history_id4",version:2,name:"string 4",edit_time:1594051200,minor_history:[{id:"minor_history1",version:2.1,name:"string",edit_time:123456789,type:1,user_id:["string"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,10]}],revert:{time:123456789,id:"string"},origin:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"},now:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"}}}],type:1,user_id:["string"],content:{changes:[{block_token:"doccnYlCS3JnaulaZC1qXVOfNCh",block_type:"DOC_BLOCK",rev_range:[1,53]},{block_token:"bascnW1nVcill2UU1OZ2CSKVr1g_tblDrQXOW9",block_type:"BITABLE_BLOCK",rev_range:[1,3]},{block_token:"shtcnyNekk4juKGw6uJKis1yrCg",block_type:"SHEET_BLOCK",rev_range:[1,4]}],revert_version:{time:123456789},origin:{icon:{type:1,key:"string",fs_unit:"string"},title:"string"},now:{icon:{type:"int",key:"string",fs_unit:"string"},title:"string"}}}],entities:{user:{12345678:{avatar_url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1594965243083&di=356d7b282289e1eea7c176feb08062af&imgtype=0&src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F267f9e2f07082838685c484ab999a9014c08f11f.jpg",cn_name:"\u4e2d\u6587\u540d\u5b57",email:"guohui@abc.com",en_name:"english name",id:"12345678",suid:"string",tanant_id:"string",anonymity:!1},"6939807648791396371":{avatar_url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1594965243083&di=356d7b282289e1eea7c176feb08062af&imgtype=0&src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F267f9e2f07082838685c484ab999a9014c08f11f.jpg",cn_name:"\u674e\u96e8\u5bb8",email:"xixixi@abc.com",en_name:"\u674e\u96e8\u5bb8",id:"6939807648791396371",suid:"string",tanant_id:"string",anonymity:!1}}},has_more:!0}},noData:{code:0,msg:"Success",data:{major_history:[],entities:{user:{}},has_more:!1}},error:{code:1,msg:"Fail"}},fetchHistorySnapshot:{default:r("dx_t0Gy"),error:{code:1,msg:"Fail"}},revert:{default:{code:0,msg:"Success",data:{query_duration:10,event_id:"mock_event_id"}},error:{code:0,msg:"Fail"}},revertACK:{default:{code:0,msg:"Success",data:{status:1}},running:{code:0,msg:"Success",data:{status:0}},fail:{code:0,msg:"Success",data:{status:2}},error:{code:0,msg:"Fail"}},fetchChanges:p},m={fetchHistoryList:{isUseMock:!1,scene:"default",delay:0},fetchHistorySnapshot:{isUseMock:!1,scene:"default",delay:0},revert:{isUseMock:!1,scene:"default",delay:0},revertACK:{isUseMock:!1,scene:"default",delay:0},fetchChanges:{isUseMock:!1,scene:"default",delay:0}},g=function(e){return Object.keys(m).forEach((function(n){var r=m[n];if(r&&r.isUseMock){var o=r.scene,a=void 0===o?"default":o,c=r.delay,s=void 0===c?0:c;e[n]=l()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[history service] mock ".concat(n,', scene: "').concat(a,'"'),m[n]),e.next=3,Object(h.E)(s);case 3:return(r=v[n][a]).__isMock__=!0,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))}})),e}({fetchHistoryList:d.S.fetchHistoryList,fetchHistorySnapshot:d.S.fetchHistorySnapshot,revert:d.S.revert,revertACK:d.S.revertACK,fetchChanges:function(e){return b.apply(this,arguments)},revertHistoryAndGetStatus:function(e){return x.apply(this,arguments)}});function y(e,n){for(var r=n-e,o=Math.floor(r/f.F),i=e,a=[];o;){var c=i,s=i+=f.F;a.push([c,s]),o--}return i<n&&a.push([i,n]),a}function b(){return(b=l()(i.a.mark((function e(n){var r,o,a,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.page_id,o=n.from_ver,a=n.to_ver,s=y(o,a),l=s.map((function(e){var n=c()(e,2),o=n[0],i=n[1];return d.S.fetchChanges({page_id:r,from_ver:o,to_ver:i})})),e.next=5,Promise.all(l);case 5:return u=e.sent,e.abrupt("return",_(u));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return e.slice(1).reduce((function(e,n){var r=e.data,o=n.data;for(var i in o.changes)i in r.changes?r.changes[i]=r.changes[i].concat(o.changes[i]):r.changes[i]=o.changes[i];return r.new_blocks=Object.assign(r.new_blocks||{},o.new_blocks),r.users&&(r.users=Object.assign(r.users,o.users)),Object.assign(e,{data:r})}),e[0])}function x(){return(x=l()(i.a.mark((function e(n){var r,o,a,c,s,l,d,h,p,v,m,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.revert(n);case 2:return r=e.sent,o=2,a=r.data,c=a.task_id,s=a.query_duration,l=void 0===s?60:s,d=Math.round(l/o),h=!0,p=0,e.next=10,Object(u.E)(1e3*o);case 10:if(h){e.next=13;break}return e.abrupt("break",29);case 13:return p++,e.next=16,g.revertACK({task_id:c,page_id:n.page_id});case 16:if(v=e.sent,m=v.data.status,y=p>=d,!(h=m===f.R.RUNNING&&!y)){e.next=25;break}return e.next=23,Object(u.E)(1e3*o);case 23:e.next=27;break;case 25:return y&&(v.data.isTimeout=!0),e.abrupt("return",v);case 27:e.next=10;break;case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},dx_TCww:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.576l5.421-5.421c.13-.13.341-.13.472 0l.471.471c.13.13.13.341 0 .472L8.471 11.99a.667.667 0 01-.942 0L1.636 6.098a.333.333 0 010-.472l.471-.471c.13-.13.342-.13.472 0L8 10.576z",fill:"#646A73"});n.S=function(e){return i.a.createElement("svg",a({width:16,height:16,viewBox:"0 0 16 16",fill:"none"},e),c)}},dx_U1E0:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M4.875 14.25a.375.375 0 01.375.375v2.625h2.625a.376.376 0 01.375.375v.75a.375.375 0 01-.375.375H4.5a.75.75 0 01-.75-.75v-3.375a.375.375 0 01.375-.375h.75zm15 0a.375.375 0 01.375.375V18a.75.75 0 01-.75.75h-3.375a.376.376 0 01-.375-.375v-.75a.376.376 0 01.375-.375h2.625v-2.625a.376.376 0 01.375-.375h.75zm-3.375-6a.75.75 0 01.75.75v6a.75.75 0 01-.75.75h-9a.75.75 0 01-.75-.75V9a.75.75 0 01.75-.75h9zm-.75 1.5h-7.5v4.5h7.5v-4.5zm-7.875-4.5a.375.375 0 01.375.375v.75a.375.375 0 01-.375.375H5.25v2.625a.375.375 0 01-.375.375h-.75a.375.375 0 01-.375-.375V6a.75.75 0 01.75-.75h3.375zm11.625 0a.75.75 0 01.75.75v3.375a.376.376 0 01-.375.375h-.75a.375.375 0 01-.375-.375V6.75h-2.625a.375.375 0 01-.375-.375v-.75a.376.376 0 01.375-.375H19.5z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_UVHa:function(e,n,r){},dx_UjgB:function(e,n,r){},dx_Ut8A:function(e,n,r){},dx_V7HH:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M8.727 12l6.099 6.099a.375.375 0 010 .53l-.53.53a.375.375 0 01-.53 0l-6.63-6.629a.75.75 0 010-1.06l6.63-6.63a.375.375 0 01.53 0l.53.53a.375.375 0 010 .531L8.727 12z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_VBpI:function(e,n,r){"use strict";r.d(n,"S",(function(){return a}));var o=r("dx_cDcd"),i=r.n(o);r("dx_unwB");function a(e){var n=e.isPlaceholder,r=e.Icon,o=e.description,a=e.command;return n?i.a.createElement("div",{className:"content-item content-item-placeholder"}):i.a.createElement("div",{className:"content-item"},r?i.a.createElement("span",{className:"content-item__icon"},i.a.createElement(r,{style:{color:"var(--icon-n1)",fillOpacity:.6,fontSize:16}})):null,i.a.createElement("span",{className:"content-item__description"},o),i.a.createElement("span",{className:"content-item__command"},a))}},dx_VYve:function(e,n,r){},dx_W3Wi:function(e,n,r){"use strict";r.r(n),r.d(n,"History",(function(){return Y}));var o=r("dx_cDcd"),i=r.n(o),a=r("dx_h74D"),c=r("dx_Uh2b");var s=r("dx_furZ"),l=r("dx_o0o1"),u=r.n(l),d=r("dx_yXPU"),f=r.n(d),h=r("dx_lwsE"),p=r.n(h),v=r("dx_W8MJ"),m=r.n(v),g=r("dx_W7W2"),y=r.n(g),b=r("dx_a1gu"),_=r.n(b),x=r("dx_Nsbk"),k=r.n(x),E=r("dx_UtDZ"),O=r("dx_faye"),S=r.n(O),C=r("dx_z6zn"),w=r("dx_lSNA"),I=r.n(w),T=(r("dx_i1hO"),r("dx_QwPC")),D=r("dx_k3lJ"),A=r("dx_wtrf"),j=r("dx_xI7u"),R=r("dx_tgFd"),N=r("dx_EnrF"),P=r("dx_k9ku"),M=r("dx_J2wY"),B=r("dx_X1XY"),L=r("dx_Dfm3"),F=r("dx_XWdU"),H=r("dx_frSn");function W(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function U(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?W(Object(r),!0).forEach((function(n){I()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function V(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=k()(e);if(n){var i=k()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _()(this,r)}}var z=function(e){y()(r,e);var n=V(r);function r(){var e;p()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).historyHistoryContainerRef=void 0,e.historyExternalChangeManager=new D.w,e.hideLoadingTimeout=void 0,e.state={isShowDiff:!1,historyItem:null,clientVar:null,historyChangeDetail:[],status:j.x.UN_KNOW,historyItemIsNewest:!1,diffCount:0,diffIndex:-1},e.handleExternalHistoryResultAllReady=function(n){var r=n.changes,o=r.length;e.setState({diffCount:o,historyChangeDetail:r})},e.resetHistoryItem=function(){e.setState({historyItem:null})},e.showSnapshot=function(){var n=f()(u.a.mark((function n(r){var o,i,a,c,s,l,d,f,h,p;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.historyItem,i=r.isShowDiff,a=r.historyItemIsNewest,e.historyExternalChangeManager.reset(),o!==e.state.historyItem||i!==e.state.isShowDiff){n.next=4;break}return n.abrupt("return");case 4:return-1,0,e.setState({isShowDiff:i,historyItem:o,historyItemIsNewest:a,diffCount:0,diffIndex:-1}),e.showLoading(),e.hideLoadingTimeout&&window.clearTimeout(e.hideLoadingTimeout),n.next=11,Object(M.P)(o,i,e.props.token);case 11:c=n.sent,s=c.clientVar,l=c.historyChangeDetail,(d=c.errorType)?(e.showError(d),d===R.K.NO_SECRET&&e.setState({historyItem:null})):s&&l&&(f=Object(M.w)(o),T.j.generateVersionData(f,i),e.historyExternalChangeManager.injectOptions({externalBlockInfo:f,changeDetails:l,isShowDiff:i}),e.setState({historyChangeDetail:[],diffCount:0,clientVar:s,diffIndex:-1,status:j.x.NORMAL})),e.hideLoadingTimeout=window.setTimeout((function(){e.hideLoading()}),100),h=Object(N.VD)(o),p=Object(N.S)(o),Object(P.r)("ccm_docs_history_page_view",{history_version:h,history_sub_version:p,is_show_change:String(i)});case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.showLoading=function(){Object(A.s)(e.historyHistoryContainerRef,j.u)},e.hideLoading=function(){Object(A.c)(j.u)},e.showError=function(n){var r,o=(r={},I()(r,R.K.FAILED,j.x.FAILED),I()(r,R.K.NO_DATA,j.x.NO_DATA),I()(r,R.K.OFFLINE,j.x.OFFLINE),I()(r,R.K.NO_SECRET,j.x.NO_SECRET),r)[n]||j.x.UN_KNOW;e.setState({status:o})},e.reload=function(){B.r.emit(B.h.RELOAD)},e}return m()(r,[{key:"componentDidMount",value:function(){B.r.on(B.h.SHOW_LOADING,this.showLoading),B.r.on(B.h.HIDE_LOADING,this.hideLoading),B.r.on(B.h.SHOW_ERROR,this.showError),B.r.on(B.h.SHOW_SNAPSHOT,this.showSnapshot),B.r.on(B.h.RESET_HISTORY_ITEM,this.resetHistoryItem),B.r.on(B.X.EXTERNAL_HISTORY_ALL_READY,this.handleExternalHistoryResultAllReady)}},{key:"componentWillUnmount",value:function(){B.r.off(B.h.SHOW_LOADING,this.showLoading),B.r.off(B.h.HIDE_LOADING,this.hideLoading),B.r.off(B.h.SHOW_ERROR,this.showError),B.r.off(B.h.SHOW_SNAPSHOT,this.showSnapshot),B.r.off(B.h.RESET_HISTORY_ITEM,this.resetHistoryItem),B.r.off(B.X.EXTERNAL_HISTORY_ALL_READY,this.handleExternalHistoryResultAllReady),T.j.resetData(),this.historyExternalChangeManager.destroy(),this.hideLoadingTimeout&&window.clearTimeout(this.hideLoadingTimeout)}},{key:"render",value:function(){var e=this,n=this.state,r=n.status,o=n.clientVar,a=n.historyChangeDetail,c=n.historyItem,s=n.isShowDiff,l=n.historyItemIsNewest,u=n.diffCount,d=n.diffIndex,f=j.x.NORMAL,h=j.x.NO_DATA,p=j.x.OFFLINE,v=j.x.FAILED,m=j.x.NO_SECRET,g={status:r,historyItem:c,isShowDiff:s,historyItemIsNewest:l,diffCount:u,diffIndex:d,token:this.props.token,onDiffIndexChange:function(n){return e.setState({diffIndex:n})}},y=a[d],b=U(U({},this.props),{},{clientVar:o,historyChangeTarget:y,historyExternalChangeManager:this.historyExternalChangeManager});return i.a.createElement("div",{className:"docx-history-left-container"},i.a.createElement(H.y,g),i.a.createElement("div",{className:"docx-history-content-container",ref:function(n){return e.historyHistoryContainerRef=n}},r===f&&o&&i.a.createElement(L.w,b),r===h&&i.a.createElement(F.z,{errorType:R.K.NO_DATA,onReload:this.reload}),r===v&&i.a.createElement(F.z,{errorType:R.K.FAILED,onReload:this.reload}),r===p&&i.a.createElement(F.z,{errorType:R.K.OFFLINE,onReload:this.reload}),r===m&&i.a.createElement(F.z,{errorType:R.K.NO_SECRET})))}}]),r}(i.a.Component),Q=r("dx_I5Eh");r("dx_bMCe");function G(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=k()(e);if(n){var i=k()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _()(this,r)}}var K=function(e){y()(r,e);var n=G(r);function r(){var e;p()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).toggleHistory=function(){var n=f()(u.a.mark((function n(r,o){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("history toggleHistory from \uff1a".concat(o),r),e.props.isShow?e.hideHistory(o):e.showHistory(o);case 2:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),e.onUndo=function(){e.handleEntryToastWhenUndo()},e.undoCount=0,e.resetUndoCountTimeId=void 0,e.handleEntryToastWhenUndo=function(){var n=window.sessionStorage.getItem(j.FZ);if(!n&&"false"!==n){var r=function(){return e.undoCount=0};e.undoCount++,e.undoCount>=10&&(window.sessionStorage.setItem(j.FZ,"true"),r(),e.resetUndoCountTimeId&&window.clearTimeout(e.resetUndoCountTimeId),E.Toast.info({closable:!0,content:C.S,key:j.b,duration:5e3})),0===e.undoCount&&(e.resetUndoCountTimeId=setTimeout(r,1e4))}},e}return m()(r,[{key:"componentDidMount",value:function(){(null===E.EVENTS||void 0===E.EVENTS?void 0:E.EVENTS.PC)&&(E.EventEmitter.on(E.EVENTS.PC.DOCS.HISTORY_X.TOGGLE,this.toggleHistory),E.EventEmitter.on("undo",this.onUndo))}},{key:"componentWillUnmount",value:function(){(null===E.EVENTS||void 0===E.EVENTS?void 0:E.EVENTS.PC)&&(E.EventEmitter.off(E.EVENTS.PC.DOCS.HISTORY_X.TOGGLE,this.toggleHistory),E.EventEmitter.off("undo",this.onUndo))}},{key:"showHistory",value:function(e){this.props.showHistory(),Object(P.r)("history",{action:"open",source:e||"btn"}),Object(P.r)("ccm_space_docs_more_menu_click",{click:"history_version",target:"ccm_docs_history_page_view"})}},{key:"hideHistory",value:function(e){this.props.hideHistory(),Object(P.r)("history",{action:"close",source:e||"btn or keyboard"}),Object(P.r)("ccm_docs_history_page_click",{click:"click_back_to_docs",target:"none"})}},{key:"render",value:function(){return this.props.isShow?S.a.createPortal(i.a.createElement("div",{className:"docx-history-container"},i.a.createElement(z,this.props),i.a.createElement(Q.B,this.props)),document.body):null}}]),r}(i.a.Component),q={showHistory:function(){return{type:c.R.showHistory}},hideHistory:function(){return{type:c.R.hideHistory}}},X=Object(a.connect)((function(e){return{isShow:Object(s.m)(e)}}),q)(K),Y=function(e){return i.a.createElement(X,e)}},dx_WATO:function(e,n,r){"use strict";(function(t){r.d(n,"K",(function(){return _}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_iWIM"),s=r.n(c),l=r("dx_W7W2"),u=r.n(l),d=r("dx_a1gu"),f=r.n(d),h=r("dx_Nsbk"),p=r.n(h),v=r("dx_dUaq"),m=r("dx_cDcd"),g=r.n(m),y=r("dx_TOCS");r("dx_BxH2");function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var _=function(e){u()(r,e);var n=b(r);function r(){return o()(this,r),n.apply(this,arguments)}return a()(r,[{key:"render",value:function(){return this.props.record.snapshot._error?g.a.createElement("div",{className:"history-error-boundary-tip"},g.a.createElement(v.S,null),g.a.createElement("span",{className:"history-error-boundary-tip-text"},t("CreationDoc_DocX_UnableToLoadName_Toast"))):s()(p()(r.prototype),"render",this).call(this)}}]),r}(y.s)}).call(this,r("dx_E9Eu"))},dx_Wv6T:function(e,n,r){},dx_X5LT:function(e,n,r){},dx_XWdU:function(e,n,r){"use strict";(function(t){r.d(n,"z",(function(){return w}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_GP3E"),p=r("dx_K5vg"),v=r("dx_lmGU"),m=r("dx_Wz8R"),g=r("dx_l3lQ"),y=r("dx_PcQO"),b=r("dx_cDcd"),_=r.n(b),x=r("dx_tgFd");r("dx_Wv6T");function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var E=Object(h.S)(p.S),O=Object(h.S)(v.S),S=Object(h.S)(m.S),C=Object(h.S)(g.S),w=function(e){s()(r,e);var n=k(r);function r(){return o()(this,r),n.apply(this,arguments)}return a()(r,[{key:"componentDidMount",value:function(){console.log("fail view componentDidMount")}},{key:"getFailedView",value:function(){return _.a.createElement("div",{className:"render-failed"},_.a.createElement("div",{className:"fail-img"},_.a.createElement(E,null)),_.a.createElement("div",{className:"fail-text"},t("feed.load_failed")),this.props.onReload&&_.a.createElement("div",{className:"fail-btn"},_.a.createElement(y.Button,{type:"primary",onClick:this.props.onReload},_.a.createElement("span",null,t("history.reload")))))}},{key:"getNoneView",value:function(){return _.a.createElement("div",{className:"render-failed"},_.a.createElement("div",{className:"fail-img"},_.a.createElement(S,null)),_.a.createElement("div",{className:"fail-text"},t("nav.tips.no_history_record")))}},{key:"getOfflineView",value:function(){return _.a.createElement("div",{className:"render-failed"},_.a.createElement("div",{className:"fail-img"},_.a.createElement(O,null)),_.a.createElement("div",{className:"fail-text"},t("common.network_error")))}},{key:"getSecretView",value:function(){return _.a.createElement("div",{className:"render-failed"},_.a.createElement("div",{className:"fail-img"},_.a.createElement(C,null)),_.a.createElement("div",{className:"fail-text"},t("CreationDoc_Docs_KeyInvalidCanNotRead")))}},{key:"render",value:function(){var e=this.props.errorType;return _.a.createElement("div",{className:"history-error-page-container"},e===x.K.FAILED&&this.getFailedView(),e===x.K.OFFLINE&&this.getOfflineView(),e===x.K.NO_DATA&&this.getNoneView(),e===x.K.NO_SECRET&&this.getSecretView())}}]),r}(_.a.Component)}).call(this,r("dx_E9Eu"))},dx_XfT8:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("mask",{id:"history-drag-placeholder_svg__a",maskUnits:"userSpaceOnUse",x:0,y:0,width:80,height:80},i.a.createElement("path",{fill:"#C4C4C4",d:"M0 0h80v80H0z"})),s=i.a.createElement("g",{mask:"url(#history-drag-placeholder_svg__a)"},i.a.createElement("path",{fill:"#D7DAE0",d:"M2 12h41v48H2z"}),i.a.createElement("path",{d:"M9 18h41v48H9V18z",fill:"#fff"}),i.a.createElement("path",{d:"M19 68.564s1.243-11.779 9.112-11.343C35.982 57.658 37.64 69 37.64 69S43.5 37 53 36",stroke:"#2B2F36",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55.88 18.388L48 24.544l6.157 7.88 7.88-6.156-6.157-7.88zM65.336 11l-7.88 6.157 6.157 7.88 7.88-6.157L65.336 11zm-9.948 23l7.88-6.156 6.157 7.88-7.88 6.157L55.388 34zm17.336-13.544l-7.88 6.157 6.157 7.88 7.88-6.157-6.157-7.88z",fill:"#FFC60A"}),i.a.createElement("rect",{x:13,y:25,width:27,height:1,rx:.5,fill:"#2B2F36"}),i.a.createElement("rect",{x:13,y:28,width:27,height:1,rx:.5,fill:"#2B2F36"}),i.a.createElement("rect",{x:13,y:31,width:27,height:1,rx:.5,fill:"#2B2F36"}));n.S=function(e){return i.a.createElement("svg",a({width:80,height:80,viewBox:"0 0 80 80",fill:"none"},e),c,s)}},dx_Xl99:function(e,n,r){"use strict";r.d(n,"B",(function(){return c}));var o=r("dx_RIqP"),i=r.n(o),a=r("dx_cDcd");function c(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(a.useEffect)((function(){var r=function(r){e.current&&e.current===document.activeElement&&n.forEach((function(e){var n=r.metaKey,o=r.ctrlKey,i=r.altKey,a=r.shiftKey,c=r.code,s=e.metaKey,l=e.ctrlKey,u=e.altKey,d=e.shiftKey,f=e.code,h=e.handler;Boolean(s)===Boolean(n)&&Boolean(l)===Boolean(o)&&Boolean(u)===Boolean(i)&&Boolean(d)===Boolean(a)&&c===f&&h(r)}))};return document.addEventListener("keyup",r),function(){document.removeEventListener("keyup",r)}}),[e].concat(i()(r)))}},dx_YEav:function(e,n,r){"use strict";r.r(n);var o=r("dx_AA3h"),i=r("dx_h74D"),a=r("dx_o0o1"),c=r.n(a),s=r("dx_yXPU"),l=r.n(s),u=r("dx_lwsE"),d=r.n(u),f=r("dx_W8MJ"),h=r.n(f),p=r("dx_PJYZ"),v=r.n(p),m=r("dx_W7W2"),g=r.n(m),y=r("dx_a1gu"),b=r.n(y),_=r("dx_Nsbk"),x=r.n(_),k=r("dx_UtDZ"),E=r("dx_cDcd"),O=r("dx_CqjN"),S=r("dx_sNGG"),C=r("dx_yDa2");function w(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=x()(e);if(n){var i=x()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return b()(this,r)}}var I=function(e){g()(r,e);var n=w(r);function r(){var e;d()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).findReplaceModule=void 0,e.selectedIndex=0,e.isFinding=!1,e.matches=[],e.handleClearSearchResult=function(){e.isInBitableFullScreen||e.resetSearchStatus()},e.handleDocumentClick=Object(O.i)({onClick:function(){e.isInBitableFullScreen||e.exitSearch()}}),e.onFindTextChange=function(){var n=l()(c.a.mark((function n(r){var o,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.content,!e.isInBitableFullScreen){n.next=3;break}return n.abrupt("return");case 3:return e.findReplaceModule||e.initModule(),null===(o=e.props.commentModule)||void 0===o||o.setCommentViewPortLock(!1),n.next=7,e.triggerFind(i);case 7:e.setSelectIndex(0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.handleSwitchResult=function(n){var r=n.index;e.isInBitableFullScreen||e.setSelectIndex(r)},e.exitSearch=function(){window.lark.biz.content.exitSearch(),e.resetSearchStatus()},e.resetSearchStatus=function(){var n;null===(n=e.findReplaceModule)||void 0===n||n.destroy(),e.findReplaceModule=void 0,e.selectedIndex=0,e.isFinding=!1,e.matches=[]},e.updateSelectedIndex=function(){var n=v()(e),r=n.matches,o=n.selectedIndex;if(0===r.length)e.setSelectIndex(-1);else if(e.isFinding)e.setSelectIndex(0),e.isFinding=!1;else{var i=Math.max(0,Math.min(o,r.length-1));i!==o&&e.setSelectIndex(i)}},e.onMatchesChange=function(n){e.isFinding&&(e.matches=n,e.updateSelectedIndex(),e.updateCounts())},e.updateCounts=function(){window.lark.biz.content.updateSearchResult({currentIndex:e.selectedIndex,totalNum:e.matches.length})},e}return h()(r,[{key:"componentDidMount",value:function(){k.EventEmitter.on("lark.biz.content.search",this.onFindTextChange),k.EventEmitter.on("lark.biz.content.switchSearchResult",this.handleSwitchResult),k.EventEmitter.on("lark.biz.content.clearSearchResult",this.handleClearSearchResult),this.props.eventEmitter.on(S.Y.EXIT_FIND_SEARCH,this.exitSearch),this.bindListenerClickEvent("add")}},{key:"componentWillUnmount",value:function(){k.EventEmitter.off("lark.biz.content.search",this.onFindTextChange),k.EventEmitter.off("lark.biz.content.switchSearchResult",this.handleSwitchResult),k.EventEmitter.off("lark.biz.content.clearSearchResult",this.exitSearch),this.props.eventEmitter.off(S.Y.EXIT_FIND_SEARCH,this.exitSearch),this.bindListenerClickEvent("remove")}},{key:"bindListenerClickEvent",value:function(e){document["".concat(e,"EventListener")]("touchstart",this.handleDocumentClick),document["".concat(e,"EventListener")]("touchend",this.handleDocumentClick)}},{key:"triggerFind",value:function(){var e=l()(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFinding=!0,e.next=3,this.findReplaceModule.find(n);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"initModule",value:function(){var e=this.props,n=e.blockManager,r=e.eventEmitter,o=e.fold,i=e.viewport,a=e.rect,c=e.scrollContainer;this.findReplaceModule=new C.O({blockManager:n,eventEmitter:r,fold:o,viewport:i,rect:a,scrollContainer:c.querySelector(".bear-web-x-container")}),this.findReplaceModule.onMatchesChange(this.onMatchesChange)}},{key:"setSelectIndex",value:function(e){var n=this.matches[e];this.selectedIndex=e,n&&this.findReplaceModule.highlightAt(e)}},{key:"render",value:function(){return null}},{key:"isInBitableFullScreen",get:function(){return!!this.props.fullScreenBitableTableId}}]),r}(E.Component);n.default=Object(i.connect)((function(e){return{fullScreenBitableTableId:Object(o.getFullScreenTableId)(e)}}),{})(I)},dx_YVDp:function(e,n,r){"use strict";r.d(n,"S",(function(){return O}));var o,i=r("dx_lSNA"),a=r.n(i),c=r("dx_J4zp"),s=r.n(c),l=r("dx_lwsE"),u=r.n(l),d=r("dx_W8MJ"),f=r.n(d),h=r("dx_W7W2"),p=r.n(h),v=r("dx_a1gu"),m=r.n(v),g=r("dx_Nsbk"),y=r.n(g),b=r("dx_NWnn"),_=r("dx_O1Ou");function x(e,n){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"===typeof e)return k(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,n)}(e))||n&&e&&"number"===typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=y()(e);if(n){var i=y()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return m()(this,r)}}!function(e){e.COMMENT_IMAGE_PREVIEW="CommentImagePreview",e.COMMENT_EXPAND="CommentExpand"}(o||(o={}));var O=function(e){p()(r,e);var n=E(r);function r(e){var i;return u()(this,r),(i=n.call(this)).pluginName="GlobalCommentFollow",i.vcController=void 0,i.unregisterVcController=void 0,i.eventEmitter=void 0,i.expandedCommentIds=new Set,i.replayFollowActionHandler=function(e){try{var n=e.uuid,r=e.actionType,a=e.data;if(r===o.COMMENT_IMAGE_PREVIEW){var c,s=a,l=s.commentId,u=s.replyId,d=s.imageIndex;if(!s.isGlobal)return void i.vcController.reportReplay(_.s.IGNORE,n,"no global comment image");i.eventEmitter.trigger("imagePreview",[{commentId:l,replyId:u,imageIndex:d}]),null===(c=i.vcController)||void 0===c||c.reportReplay(_.s.SUCCESS,n)}else if(e.actionType===o.COMMENT_EXPAND){if(!e.data.expanded||!(e.data.expanded instanceof Array))return void i.vcController.reportReplay(_.s.IGNORE,n,"no need");i.handleCommentExpandStatusUpdate(a.expanded),i.vcController.reportReplay(_.s.SUCCESS,n)}}catch(f){i.vcController.reportReplay(_.s.FAIL,e.uuid,f.message)}},i.handleCommentExpandStatusUpdate=function(e){var n,r=new Set(i.expandedCommentIds),o=new Set,a=x(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;i.expandedCommentIds.has(c)?r.delete(c):o.add(c)}}catch(k){a.e(k)}finally{a.f()}var l,u=x(o);try{for(u.s();!(l=u.n()).done;){var d=l.value.split("$$"),f=s()(d,2),h=f[0],p=f[1];i.eventEmitter.trigger("setTextExpandStatus",[{commentId:h,replyId:p,expanded:!0}])}}catch(k){u.e(k)}finally{u.f()}var v,m=x(r);try{for(m.s();!(v=m.n()).done;){var g=v.value.split("$$"),y=s()(g,2),b=y[0],_=y[1];i.eventEmitter.trigger("setTextExpandStatus",[{commentId:b,replyId:_,expanded:!1}])}}catch(k){m.e(k)}finally{m.f()}i.expandedCommentIds=new Set(e)},i.textExpandStatusDidUpdate=function(e,n,a){a?i.expandedCommentIds.add("".concat(e,"$$").concat(n)):i.expandedCommentIds.delete("".concat(e,"$$").concat(n)),i.vcController.sendState(r.MODULE_NAME,o.COMMENT_EXPAND,{expanded:Array.from(i.expandedCommentIds)},!0)},i.vcController=e.vcController,i.eventEmitter=e.eventEmitter,i.registerVcController(),i}return f()(r,[{key:"registerVcController",value:function(){var e,n;this.unregisterVcController||(this.unregisterVcController=null===(e=this.vcController)||void 0===e?void 0:e.register({moduleName:r.MODULE_NAME,defaultState:(n={},a()(n,o.COMMENT_IMAGE_PREVIEW,{commentId:"",replyId:"",imageIndex:-1,isGlobal:!0}),a()(n,o.COMMENT_EXPAND,{expanded:[]}),n),replayHandler:this.replayFollowActionHandler,retryOnVersionMatched:"fail-only"}))}},{key:"commentImagePreviewed",value:function(e){var n,i=e.commentId,a=e.replyId,c=e.imageIndex;i&&a&&(null===(n=this.vcController)||void 0===n||n.sendState(r.MODULE_NAME,o.COMMENT_IMAGE_PREVIEW,{commentId:i,replyId:a,imageIndex:c,isGlobal:!0},!0))}},{key:"destroy",value:function(){var e;null===(e=this.unregisterVcController)||void 0===e||e.call(this)}}]),r}(b.CommentViewPlugin);O.MODULE_NAME=_.a.DocComment},dx_Yoqx:function(e,n,r){"use strict";r.d(n,"I",(function(){return y}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_cDcd"),v=r.n(p),m=r("dx_cBZs");r("dx_bHyS");function g(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var y=function(e){l()(r,e);var n=g(r);function r(){var e;i()(this,r);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={},e}return c()(r,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=m.J.getUserInfoById(this.props.userId),n=e.name,r=e.textColor;return v.a.createElement("div",{className:"history-timeline-user-label"},v.a.createElement("span",{className:"user-color",style:{background:r}}),v.a.createElement("span",{className:"user-name"},n))}}]),r}(v.a.Component)},dx_YqZF:function(e,n,r){},dx_Z5ZW:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M15.209 12l-6.1-6.099a.375.375 0 010-.53l.531-.53a.375.375 0 01.53 0l6.63 6.629a.75.75 0 010 1.06l-6.63 6.63a.375.375 0 01-.53 0l-.53-.53a.375.375 0 010-.531L15.209 12z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_Z5Zd:function(e,n,r){},dx_ZESM:function(e,n,r){"use strict";(function(t){var e=r("dx_cDcd"),o=r.n(e),i=r("dx_tgFd");n.S=function(e){var n=e.desc,r=e.isCurrent;return o.a.createElement("div",{className:"version-desc"},r?o.a.createElement("div",{className:"desc-item"},t("history.time_line.current_version")):null,n.versionTime?o.a.createElement("div",{className:"desc-item"},n.versionTime):null,n.revertTime?function(){var e=t("history.doc_events.restored_from_version",{},"",n.revertTime||"");return o.a.createElement("div",{className:"desc-item"},e)}():o.a.createElement("div",null,"string"===typeof n.rename?function(){var n=t("history.doc_events.renamed_doc",{},"",e.desc.rename||"");return o.a.createElement("div",{className:"desc-item"},n)}():null),n.created?o.a.createElement("div",{className:"desc-item"},t("history.doc_events.created_doc")):null,n.cover&&function(){var e=n.cover,r=null;return e===i.S.add&&(r=t("CreationDoc_Docs_DocCover_History_AddCover_Desc")),e===i.S.modify&&(r=t("CreationDoc_Docs_DocCover_History_EditCover_Desc")),e===i.S.remove&&(r=t("CreationDoc_Docs_DocCover_History_RemoveCover_Desc")),r}())}}).call(this,r("dx_E9Eu"))},dx_ZXMN:function(e,n,r){"use strict";r.d(n,"b",(function(){return i}));var o=r("dx_cDcd");function i(){var e=Object(o.useRef)([]),n=Object(o.useCallback)((function(n){e.current.push(n)}),[]);return Object(o.useEffect)((function(){e.current.length>0&&(e.current.forEach((function(e){return e()})),e.current=[])})),n}},dx_Zgrh:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M19.675 5H4.825C4.369 5 4 5.356 4 5.794v11.912c0 .439.37.794.825.794h14.85c.456 0 .825-.355.825-.794V5.794c0-.438-.37-.794-.825-.794zM5.5 17V6.5H19V17H5.5zm6-4.5H13V14h-1.5v-1.5zm1.5-3h-1.5V11H13V9.5zm-5.72 1.198a.188.188 0 01-.28-.163v-.936c0-.135.073-.26.19-.327l.842-.474a.375.375 0 01.184-.048H9.25c.207 0 .375.168.375.375v5.25a.375.375 0 01-.375.375h-.757a.375.375 0 01-.375-.375v-4.154l-.838.477zm7.22-.163c0 .144.155.234.28.163l.838-.477v4.154c0 .207.168.375.375.375h.757a.375.375 0 00.375-.375v-5.25a.375.375 0 00-.375-.375h-1.034a.375.375 0 00-.184.048l-.841.474a.375.375 0 00-.191.327v.936z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_ZpFx:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.166 6.243l-4.69 3.41A.3.3 0 014 9.412V2.589a.3.3 0 01.476-.242l4.69 3.41a.3.3 0 010 .486z",fill:"#646A73"});n.S=function(e){return i.a.createElement("svg",a({width:12,height:12,viewBox:"0 0 12 12",fill:"none"},e),c)}},dx_aftT:function(e,n,r){"use strict";(function(t){r.d(n,"l",(function(){return g}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_cDcd"),p=r.n(h),v=r("dx_XfT8");r("dx_Rse4");function m(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var g=function(e){s()(r,e);var n=m(r);function r(){return o()(this,r),n.apply(this,arguments)}return a()(r,[{key:"render",value:function(){return p.a.createElement("div",{className:"history-drag-placeholder-wrapper"},p.a.createElement(v.S,null),p.a.createElement("span",{className:"history-drag-placeholder-wrapper-content"},t("CreationDoc_DocX_History_Drag_Desc1"),p.a.createElement("a",{className:"history-jump",onClick:this.props.onClickAnchor},t("CreationDoc_DocX_History_Drag_Desc2"))))}}]),r}(h.PureComponent)}).call(this,r("dx_E9Eu"))},dx_agmI:function(e,n,r){},dx_b5b5:function(e,n,r){},dx_bEot:function(e,n,r){"use strict";function o(e){var n={isAddCell:!1,isDelCell:!1,isMerge:!1,changedCellBlockIds:[],changedCellIds:[]},r=(null===e||void 0===e?void 0:e.from)||{},o=(null===e||void 0===e?void 0:e.to)||{},i=Object.keys(r),a=i.every((function(e){return!r[e]})),c=i.every((function(e){return!o[e]}));return n.isAddCell=a&&!c,n.isDelCell=!a&&c,n.isMerge=i.some((function(e){return/cell_set\..+\.merge_info/.test(e)})),i.filter((function(e){return 0===e.indexOf("cell_set")})).forEach((function(e){var i=e.split(".")[1];n.changedCellIds.push(i);var a=(r[e]||o[e]).block_id;a&&n.changedCellBlockIds.push(a)})),n}r.d(n,"u",(function(){return o}))},dx_bHyS:function(e,n,r){},dx_bMCe:function(e,n,r){},dx_bs0v:function(e,n,r){},dx_d3dq:function(e,n,r){},dx_e9eF:function(e,n,r){"use strict";var o=r("dx_gfVm");n.S=new o.X},dx_eFoE:function(e,n,r){"use strict";r.d(n,"e",(function(){return a})),r.d(n,"p",(function(){return c})),r.d(n,"h",(function(){return s})),r.d(n,"k",(function(){return l})),r.d(n,"y",(function(){return u})),r.d(n,"G",(function(){return d})),r.d(n,"o",(function(){return f})),r.d(n,"KP",(function(){return h})),r.d(n,"K",(function(){return p})),r.d(n,"x",(function(){return v})),r.d(n,"Y",(function(){return m}));var o=r("dx_puQj"),i=r.n(o),a=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}};function c(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=e.classList).add.apply(n,o)}function s(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=e.classList).remove.apply(n,o)}function l(e,n,r){e.setAttribute(n,r)}function u(e,n){Object.assign(e.style,n)}function d(e,n,r,o){e.addEventListener(n,r,o)}function f(e,n,r,o){e.removeEventListener(n,r,o)}function h(e){return i.a.mac?e.metaKey:e.ctrlKey}function p(e,n){var r=e.getBoundingClientRect(),o=a(),i=o.width;return{isBottomEdge:o.height-r.bottom>=0,isTopEdge:r.top>=0,isLeftEdge:r.left>=0,isRightEdge:i-r.right>=0}}function v(e,n){var r=n.isBottomEdge,o=n.isTopEdge,i=n.isLeftEdge,a=n.isRightEdge;return 0!==e.deltaY?e.deltaY<0?o:r:0===e.deltaX||(e.deltaX<0?i:a)}function m(e,n){var r=n.getBoundingClientRect(),o=r.top,i=r.right,a=r.bottom,c=r.left,s=e.x,l=e.y;return s>=c&&l<=i&&l>=o&&l<=a}},dx_eJHT:function(e,n,r){},dx_ekaZ:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M8-.5H0v1a5.44 5.44 0 014.065 1.825l2.814 3.166a1.5 1.5 0 002.242 0l2.814-3.166A5.438 5.438 0 0116 .5v-1H8z"});n.S=function(e){return i.a.createElement("svg",a({width:16,height:8,viewBox:"0 0 16 8"},e),c)}},dx_fFOs:function(e,n,r){"use strict";(function(t){var e=r("dx_J4zp"),o=r.n(e),i=r("dx_TSYQ"),a=r.n(i),c=r("dx_h6a8"),s=r("dx_cDcd"),l=r.n(s),u=r("dx_zghO"),d=r("dx_JkhV");r("dx_P3yd");n.S=function(e){var n=e.selectionAPI,r=e.blockManager,i=Object(s.useState)(),f=o()(i,2),h=f[0],p=f[1],v=Object(s.useMemo)((function(){return Object(c.debounce)((function(){var e,o,i,a,c=n.getSelection(),s="";(c.length>1&&n.isBlockSelection(c)||1===c.length&&((null===(e=c[0])||void 0===e||null===(o=e.selection)||void 0===o?void 0:o.start)!==(null===(i=c[0])||void 0===i||null===(a=i.selection)||void 0===a?void 0:a.end)||c[0].type===u.j.BLOCK)||n.isTextSelectionAcrossBlocks(c))&&(s=Object(d.o)(r,c));var l=Object(d.E)(s).wordCount;p(l)}),100)}),[n,r]);Object(s.useEffect)((function(){return function(){return v.cancel()}}),[v]),Object(s.useEffect)((function(){return n.onSelectionChange(v),function(){n.offSelectionChange(v)}}),[n,v]);var m=a()("rangecode-bomb-container",{show:!!h});return l.a.createElement("div",{className:m},l.a.createElement("span",null,h),l.a.createElement("span",null," ".concat(t("etherpad.word"))))}}).call(this,r("dx_E9Eu"))},dx_fGrr:function(e,n,r){"use strict";r.d(n,"Q",(function(){return f})),r.d(n,"S",(function(){return h}));var o=r("dx_RIqP"),i=r.n(o),a=r("dx_cDcd"),c=r.n(a);r("dx_YqZF");var s=function(e){var n=!(!e.showName||!e.name);return c.a.createElement("span",{className:"short-cut-wrapper"},n?e.name&&c.a.createElement("span",null,e.name):null,n?c.a.createElement("span",null," (",e.keys.join(" + "),")"):c.a.createElement("span",null,e.keys.join(" + ")))},l=(r("dx_yzqx"),r("dx_SUdB")),u=r("dx_OJCf"),d=r("dx_XW5M");function f(e){return void 0===e?e:e.startsWith("Digit")||e.startsWith("Key")?e[e.length-1]:e}function h(e){var n,r=e.handler,o=e.panelType,a=e.showName,h=void 0===a||a,p=u.P.find((function(e){return e.handler===r}));if(!p)return null;var v=[{key:p.ctrlKey,icon:l.p},{key:p.metaKey,icon:l.b},{key:p.shiftKey,icon:l.n},{key:p.altKey,icon:l.l}].filter((function(e){return e.key})),m=[d.t.TextualToolbar,d.t.TextualBlockToolbar],g=!!h&&!m.includes(o);return c.a.createElement(s,{name:p.name,keys:[].concat(i()(v.map((function(e){return e.icon}))),[null!==(n=p.printKey)&&void 0!==n?n:void 0===p.key?f(p.code):p.key]),showName:g})}},dx_fYsZ:function(e,n,r){"use strict";r.d(n,"d",(function(){return s}));var o=r("dx_VkAN"),i=r.n(o),a=r("dx_Dtiu");function c(){var e=i()(["\n  display: block;\n  position: fixed;\n  bottom: 38px;\n  right: 38px;\n  z-index: 60;\n"]);return c=function(){return e},e}var s=r.n(a).a.div(c())},dx_frSn:function(e,n,r){"use strict";(function(t){r.d(n,"y",(function(){return A}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lwsE"),s=r.n(c),l=r("dx_W8MJ"),u=r.n(l),d=r("dx_W7W2"),f=r.n(d),h=r("dx_a1gu"),p=r.n(h),v=r("dx_Nsbk"),m=r.n(v),g=r("dx_PcQO"),y=r("dx_UtDZ"),b=r("dx_cDcd"),_=r.n(b),x=(r("dx_JGKO"),r("dx_bUYd")),k=r("dx_g0R0"),E=r("dx_D8nn"),O=r("dx_TCww"),S=r("dx_P5qH"),C=r("dx_xI7u"),w=r("dx_TBtt"),I=r("dx_EnrF"),T=r("dx_k9ku");function D(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=m()(e);if(n){var i=m()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return p()(this,r)}}var A=function(e){f()(r,e);var n=D(r);function r(){var e;s()(this,r);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=n.call.apply(n,[this].concat(c))).state={recovering:!1},e.modalOpened=!1,e.emitHistoryRestore=function(){E.N.emit(C.f)},e.onRecover=a()(o.a.mark((function n(){var r,i,a,c,s,l,u,d,f,h,p,v,m,y,b,_,O,S;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=e.props.historyItem)&&!e.modalOpened){n.next=3;break}return n.abrupt("return");case 3:return a=Object(I.R)(i),(null===(r=i.minor_history)||void 0===r?void 0:r.length)&&(i=i.minor_history[0]),c=1e3*i.edit_time,s=Object(I.U)(c),Object(T.r)("history",{action:"restore_popup",source:"restore_btn"}),Object(T.r)("ccm_docs_history_page_click",{click:"click_restore_entrance",target:"none",version_time:Object(I.m)(i),is_large_version:String(a)}),n.next=11,e.showRevertConfirmModal(s);case 11:if(n.sent){n.next=14;break}return Object(T.r)("ccm_docs_history_page_click",{click:"click_cancel_restore",target:"none",version_time:Object(I.m)(i),is_large_version:String(a)}),n.abrupt("return");case 14:return Object(T.r)("history",{action:"restore",source:"restore_confirm_btn"}),l=Object(I.VD)(i),u=Object(I.S)(i),Object(T.r)("ccm_docs_history_page_click",{history_version:l,history_sub_version:u,click:"click_restore",target:"none",version_time:Object(I.m)(i),is_large_version:String(a)}),console.log("\u8fd8\u539f\u5230\u7248\u672c",i),d=i.version,f={page_id:e.props.token,minor_version:d},h=e.showRevertLoading(),e.setState({recovering:!0}),E.S.emit(E.p.HISTORY.TOGGLE_REVERT),p=(new Date).getTime(),n.next=27,w.d.revertHistoryAndGetStatus(f).catch((function(e){return e}));case 27:v=n.sent,m=(new Date).getTime(),h(),e.setState({recovering:!1}),y=parseInt(((m-p)/1e3).toFixed(0),10),(b=Object(I.u)(v.data))===C.T.SUCCESS?(g.toast.success({content:t("history.restore_success.message",{},"",s),showCloseIcon:!1}),e.hideHistory(),e.emitHistoryRestore(),Object(T.r)("history",{action:"restore_success",restore_status:"none",restore_duration:y}),Object(T.r)("ccm_docs_history_page_click",{click:"restore_status",target:"none",version_time:Object(I.m)(i),is_large_version:String(a),status:"restore_success"})):b===C.T.PARTIAL_SUCCESS?(g.toast.error({content:t("LarkCCM_Docs_RestoreVersion_ErrorEdge_Toast"),showCloseIcon:!0}),e.hideHistory(),e.emitHistoryRestore(),Object(T.r)("ccm_docs_history_page_click",{click:"restore_status",target:"none",version_time:Object(I.m)(i),is_large_version:String(a),status:"restore_part_success"})):(_={204:t("history.other_user_restoring"),fail:t("history.operate_error")},console.info("[new history] Revert failed"),O=_[v.code]||_.fail,S=new Error("[new history] Revert failed"),Object(x.h)({content:O,showCloseIcon:!1,errorContext:Object(k.G)(v,S)}),Object(T.r)("ccm_docs_history_page_click",{click:"restore_status",target:"none",version_time:Object(I.m)(i),is_large_version:String(a),status:"restore_failed"}));case 34:case"end":return n.stop()}}),n)}))),e.jumpToNext=function(){e.jumpTo(e.props.diffIndex+1),Object(T.r)("history",{action:"click_next",source:"btn"}),Object(T.r)("ccm_docs_history_page_click",{click:"click_edit_item",target:"none",sub_click:"next"})},e.jumpToPrev=function(){e.jumpTo(e.props.diffIndex-1),Object(T.r)("history",{action:"click_previous",source:"btn"}),Object(T.r)("ccm_docs_history_page_click",{click:"click_edit_item",target:"none",sub_click:"previous"})},e.jumpTo=function(n){var r=e.props.diffCount;n<0?n+=r:n>=r&&(n-=r),e.props.onDiffIndexChange(n)},e}return u()(r,[{key:"showRevertLoading",value:function(){var e=t("history.restoring");return g.toast.loading({content:e,duration:0,showCloseIcon:!1,key:"history_reverting"}),function(){g.toast.destroy("history_reverting")}}},{key:"showRevertConfirmModal",value:function(e){var n=this;return new Promise((function(r){n.modalOpened=!0,g.Dialog.confirm({title:t("history.restore_history.title"),content:_.a.createElement("div",null,_.a.createElement("div",{className:"revert-modal-content-text"},t("history.restore_confirm.message",{},"",e))),okText:t("history.new.restore"),cancelText:t("history.cancel"),icon:null,onOk:function(){r(!0),n.modalOpened=!1},onCancel:function(){r(!1),n.modalOpened=!1}})}))}},{key:"hideHistory",value:function(){(null===y.EVENTS||void 0===y.EVENTS?void 0:y.EVENTS.PC)&&y.EventEmitter.emit(y.EVENTS.PC.DOCS.HISTORY_X.TOGGLE)}},{key:"renderBack",value:function(){return _.a.createElement("div",{className:"header-item back",onClick:this.hideHistory.bind(this)},_.a.createElement(S.S,{className:"exit-btn"}),_.a.createElement("span",{className:"back-text"},t("docs.history.back_btn")))}},{key:"renderRecover",value:function(){var e=this.props,n=e.historyItem,r=e.historyItemIsNewest,o=e.status,i=this.state.recovering;if(o===C.x.NO_SECRET)return null;if(!n)return null;var a=((null===n||void 0===n?void 0:n.edit_time)||0)<C.Y,c=i||r||a,s=t(r?"history.restore_tips":"CreationDoc_DocX_VersionHistory_restore_no_hover");return _.a.createElement("div",{className:"header-item recover"},c?_.a.createElement(g.Tooltip,{title:s,placement:"bottom",disabled:i},_.a.createElement(g.Button,{type:"primary",disabled:!0,className:"disabled"},t("docs.history.recover_btn"))):_.a.createElement(g.Button,{type:"primary",className:"recover-button",onClick:this.onRecover},t("docs.history.recover_btn")))}},{key:"getChangeCountText",value:function(){var e=this.props,n=e.diffCount,r=void 0===n?0:n,o=e.diffIndex,i=(void 0===o?0:o)+1,a=r>1,c=i>0,s="".concat(i,"/").concat(r),l="";return a||c?a&&!c?l=t("history.change_count_plural",{},"",r.toString()):!a&&c?l=t("history.change_count_has_heighlight_singular",{},"",s):a&&c&&(l=t("history.change_count_has_heighlight_plural",{},"",s)):l=t("history.change_count_singular",{},"",r.toString()),l}},{key:"renderControl",value:function(){var e=this.props,n=e.isShowDiff,r=void 0!==n&&n,o=e.diffCount,i=r&&(void 0===o?0:o)>0;return e.status===C.x.NO_SECRET?null:i?_.a.createElement("div",{className:"header-item play-control"},_.a.createElement("span",{className:"change-count"},this.getChangeCountText()),_.a.createElement(g.Tooltip,{title:t("history.prev_edit"),placement:"bottom"},_.a.createElement("span",{className:"up",onClick:this.jumpToPrev},_.a.createElement(O.S,null))),_.a.createElement(g.Tooltip,{title:t("history.next_edit"),placement:"bottom"},_.a.createElement("span",{className:"down",onClick:this.jumpToNext},_.a.createElement(O.S,null)))):null}},{key:"render",value:function(){return _.a.createElement("div",{className:"docx-history-left-header"},this.renderBack(),this.renderRecover(),this.renderControl())}}]),r}(_.a.Component)}).call(this,r("dx_E9Eu"))},dx_gZ0V:function(e,n,r){"use strict";r.d(n,"w",(function(){return a}));var o=r("dx_cDcd"),i=r.n(o),a=function(e){var n=e.children&&i.a.Children.toArray(e.children),r=e.name,o=n?r.split(/(\$\{[0-9]+})/g).map((function(e){var r=/\$\{([0-9]+)}/.exec(e);if(r){var o=parseInt(r[1],10)-1;return n[o]}return e})):r;return e.noWrapper?i.a.createElement(i.a.Fragment,null,o):i.a.createElement("span",null,o)}},dx_gfVm:function(e,n,r){"use strict";r.d(n,"X",(function(){return N}));var o=r("dx_lSNA"),i=r.n(o),a=r("dx_lwsE"),c=r.n(a),s=r("dx_W8MJ"),l=r.n(s),u=r("dx_W7W2"),d=r.n(u),f=r("dx_a1gu"),h=r.n(f),p=r("dx_Nsbk"),v=r.n(p),m=r("dx_UtDZ"),g=r("dx_cDcd"),y=r.n(g),b=r("dx_faye"),_=r.n(b),x=r("dx_h74D"),k=r("dx_rQGm"),E=r("dx_D9db"),O=r("dx_B28d"),S=r("dx_D8nn"),C=r("dx_NDvC");function w(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?w(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function T(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=v()(e);if(n){var i=v()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h()(this,r)}}var D=16,A=12,j=10,R=function(e){d()(r,e);var n=T(r);function r(e){var o;c()(this,r),(o=n.call(this,e)).wrapperRef=y.a.createRef(),o.getAuthorityCopyable=function(){return Object(m.getPermTypeAuthorityResult)(m.PermissionType.FILE_COPY)},o.getCopyable=function(){return m.selectors.share.selectCurrentSuiteOtherPermissions(m.store.getState()).copyable&&o.getAuthorityCopyable()},o.handleShowTextToolBar=function(e){e&&o.props.handleMouseLeaveWrapper()},o.handleScroll=function(){var e=o.props.target.getBoundingClientRect();o.setState({targetRect:e},(function(){o.state.editorRect&&o.updateStyle(o.state.editorRect)}))},o.handleMouseEnter=function(){o.props.handleMouseEnterWrapper()},o.handleMouseLeave=function(){o.props.handleMouseLeaveWrapper()},o.handleCopy=function(e){!1===o.getCopyable()&&(m.store.dispatch(m.actions.permission.copyTextWithoutPermission()),e.preventDefault()),Object(E.fB)(E.f.COPY)};var i=e.block,a=e.target,s=a.getBoundingClientRect(),l=o.initConatinerWidthAndHeight(i,a),u=l.containerWidth,d=l.containerHeight,f=s.top;return o.state={targetRect:s,containerWidth:u,containerHeight:d,showAtTop:!0,wrapperTop:f,containerLeft:0},o}return l()(r,[{key:"componentDidMount",value:function(){S.S.on(S.p.COMMON.TEXT_TOOLBAR_STATUS_CHANGE,this.handleShowTextToolBar),this.props.block.boundary.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){S.S.off(S.p.COMMON.TEXT_TOOLBAR_STATUS_CHANGE,this.handleShowTextToolBar),this.props.block.boundary.removeEventListener("scroll",this.handleScroll)}},{key:"getRootRect",value:function(e){var n=e.rootBlockId;return e.getBlockViewByBlockId(n).getHostRect()}},{key:"initConatinerWidthAndHeight",value:function(e,n){var r,o=e.blockManager.rootBlockId,i=window.PageMain.rect.getBlockRect(o),a=n.getBoundingClientRect().width,c=[O.B.CELL,O.B.GRID_COLUMN];if(r=i.width+34,e.model.parent){var s=e.model.parent;c.includes(s.type)&&(r=a+34+1,this.props.target.offsetWidth<120&&(r=160))}return{containerWidth:r,containerHeight:i.height}}},{key:"calcShowAtTop",value:function(e,n){var r=!0,o=n,i=e.top,a=e.top-k.mM,c=window.innerHeight-e.bottom,s=n+A+j;return a>=s?(r=!0,o=a-A-j):c>=s?(r=!1,o=c-A-j):Math.max(a,c)>.25*document.body.offsetHeight+A+j?(r=a>=c,o=Math.max(a,c)-A-j):(r=!0,i=(o=.25*document.body.offsetHeight)+A+j+k.mM),{showAtTop:r,containerHeight:Math.min(n,o),calcWrapperTop:i}}},{key:"initStyle",value:function(){var e=this.state,n=e.targetRect,r=e.showAtTop,o={border:"".concat(1,"px solid var(--line-border-card)"),boxShadow:"var(--shadow-s4-down)",borderRadius:"8px",position:"absolute",backgroundColor:"var(--bg-body)",padding:"".concat(12,"px 0")};return{wrapper:{position:"absolute",zIndex:87},container:o=r?Object.assign(o,{bottom:10}):Object.assign(o,{top:n.height+10})}}},{key:"updateStyle",value:function(e){var n,r=this,o=e.width,i=e.height,a=this.getRootRect(this.props.block.blockManager),c=o>a.width;c&&(o=a.width);var s=this.state.containerWidth;s=o+34+1;var l=[O.B.CELL,O.B.GRID_COLUMN];if(this.props.block.model.parent){var u=this.props.block.model.parent;l.includes(u.type)&&(s=o+34+1)}var d=document.createRange(),f=null===(n=this.props.target.querySelector('div[data-line-wrapper="true"]'))||void 0===n?void 0:n.childNodes;if(f){d.setStart(f[0],0),d.setEnd(f[f.length-1],1);var h=d.getBoundingClientRect(),p=i+26+17+8,v=c?a.left-D:.5*(2*h.left+h.width-s),m=this.calcShowAtTop(this.state.targetRect,p),g=m.showAtTop,y=m.containerHeight,b=m.calcWrapperTop;this.setState((function(){return{containerWidth:s,containerHeight:y,containerLeft:v,showAtTop:g,wrapperTop:b,editorRect:e,isHalfFullScreen:c}}),(function(){r.wrapperRef.current.style.visibility="visible"}))}}},{key:"render",value:function(){var e=this.initStyle();return y.a.createElement("div",{style:I({visibility:"hidden",top:this.state.wrapperTop},e.wrapper),ref:this.wrapperRef},y.a.createElement("div",{style:I({width:this.state.containerWidth,height:this.state.isHalfFullScreen?this.state.containerHeight+11:this.state.containerHeight,left:this.state.containerLeft},e.container),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onCopy:this.handleCopy,onCut:this.handleCopy},y.a.createElement("div",{className:"translate-scroll",style:{overflowY:"scroll",overflowX:this.state.isHalfFullScreen?"scroll":"hidden",height:"100%",width:"100%",padding:"0 ".concat(5,"px 0 ").concat(D,"px")}},y.a.createElement(C.a,{block:this.props.block,target:this.props.target,showAtTop:this.state.showAtTop,updateStyle:this.updateStyle.bind(this)}))))}}]),r}(y.a.Component),N=function(){function e(){c()(this,e),this.context=null,this.showTimer=null,this.hideTimer=null,this.isInWrapper=!1}return l()(e,[{key:"clearTimers",value:function(){this.showTimer&&(window.clearTimeout(this.showTimer),this.showTimer=null),this.hideTimer&&(window.clearTimeout(this.hideTimer),this.hideTimer=null)}},{key:"clearContext",value:function(){this.context&&(_.a.unmountComponentAtNode(this.context.container),this.context.container.remove(),this.context=null)}},{key:"handleMouseEnter",value:function(e,n){var r=this;this.clearTimers(),this.showTimer=window.setTimeout((function(){r.showTimer=null,r.show(e,n)}),100)}},{key:"handleMouseLeave",value:function(){var e=this;this.isInWrapper||(this.clearTimers(),this.hideTimer=window.setTimeout((function(){e.hideTimer=null,e.hide()}),100))}},{key:"isNeedToShow",value:function(e){if(e.model.isEmpty)return!1;if(this.isBlockOnlyEquation(e))return!1;var n=e.selectionAPI,r=e.blockManager,o=n.getSelection();if(o.length>0){if(n.isBlockSelection(o))return!1;var i,a=r.getBlockViewByBlockIdNotCheck(o[0].id);return Boolean(null===(i=a.model.getSelection())||void 0===i?void 0:i.isCollapsed())}return!0}},{key:"isBlockOnlyEquation",value:function(e){var n=["author","equation","objectID"],r=e.model.snapshot.text,o=/comment-id-[0-9]+/;return!(!Object.values(r.initialAttributedTexts.text).every((function(e){return 0===e.trim().length}))||!Object.values(r.apool.numToAttrib).every((function(e){return n.includes(e[0])||o.test(e[0])})))}},{key:"show",value:function(e,n){if(this.isNeedToShow(e)){if(this.context){if(e.id!==this.context.block.id){_.a.unmountComponentAtNode(this.context.container);var r=y.a.createRef();this.context=I(I({},this.context),{},{show:!0,ref:r,block:e,target:n})}}else{var o=document.createElement("div");document.body.appendChild(o);var i=y.a.createRef();this.context={container:o,show:!0,ref:i,block:e,target:n}}this.context.container.style.display="block",_.a.render(y.a.createElement(x.Provider,{store:m.store},y.a.createElement(R,{block:this.context.block,target:this.context.target,ref:this.context.ref,handleMouseEnterWrapper:this.handleMouseEnterWrapper.bind(this),handleMouseLeaveWrapper:this.handleMouseLeaveWrapper.bind(this)})),this.context.container)}else this.hide()}},{key:"hide",value:function(){this.context&&(this.context.container.style.display="none",this.context.show=!1)}},{key:"hold",value:function(){this.context&&this.clearTimers()}},{key:"handleMouseLeaveWrapper",value:function(){var e=this;this.isInWrapper=!1,this.hideTimer=window.setTimeout((function(){e.hideTimer=null,e.hide()}),100)}},{key:"handleMouseEnterWrapper",value:function(){this.isInWrapper=!0,this.hold()}},{key:"destroy",value:function(){this.clearTimers(),this.clearContext()}}]),e}()},dx_h3hp:function(e,n,r){"use strict";r.d(n,"s",(function(){return g}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_cDcd"),v=r.n(p);function m(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var g=function(e){l()(r,e);var n=m(r);function r(){return i()(this,r),n.apply(this,arguments)}return c()(r,[{key:"render",value:function(){return this.props.date?v.a.createElement("div",{className:"history-timeline-date-group-container"},v.a.createElement("span",null,this.props.date)):null}}]),r}(v.a.Component)},dx_h8ix:function(e,n,r){"use strict";n.S=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=function(){var o=e.scrollTop,i=e.scrollHeight;o+e.clientHeight+r>=i&&n()};return e.addEventListener("scroll",o),function(){e.removeEventListener("scroll",o)}}},dx_h9hb:function(e,n,r){"use strict";(function(t){r.d(n,"S",(function(){return f}));var e=r("dx_J4zp"),o=r.n(e),i=r("dx_FBWK"),a=r("dx_cDcd"),c=r.n(a),s=r("dx_rQGm"),l=r("dx_Xl99"),u=r("dx_yruC"),d=r("dx_KRfd");function f(e){var n,r=e.onConfirm,f=e.defaultUrl,h=e.left,p=e.top,v=e.placeholder,m=e.onClose,g=e.title,y=e.helpLink,b=e.onShowExample,_=e.scroller,x=Object(a.useState)(f||""),k=o()(x,2),E=k[0],O=k[1],S=(n=O,function(e){var r=e.target.value;n(r)}),C=Object(a.useRef)(null);Object(l.B)(C,[{code:"Enter",handler:function(){E&&r(E)}}],[E]);return Object(a.useEffect)((function(){setTimeout((function(){(null===C||void 0===C?void 0:C.current)&&C.current.focus()}),100)}),[C]),c.a.createElement(u.M,{basePosition:{x:h,y:p},placement:"bottomRight",adjustPlacement:["topRight","top","right","left"],style:{zIndex:99,position:"absolute"},onClose:m,container:_,visible:!0,checkScroll:!0},c.a.createElement(d.m,{className:s.b3.LAZY_SELECTION_NODE},c.a.createElement(d.zS,null,c.a.createElement(d.e,null,c.a.createElement(d.S,null,g),c.a.createElement(d.W,{onClick:m},c.a.createElement(d.z,{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.a.createElement("g",{id:"icon_global_close_nor"},c.a.createElement("g",{id:"Combined-Shape"},c.a.createElement("path",{d:"M18.0129203,5.74210499 L18.507895,6.23707973 C18.6641047,6.39328945 18.6641047,6.64655544 18.507895,6.80276516 L13.0599477,12.2499477 L18.257895,17.4472348 C18.4141047,17.6034446 18.4141047,17.8567105 18.257895,18.0129203 L17.7629203,18.507895 C17.6067105,18.6641047 17.3534446,18.6641047 17.1972348,18.507895 L11.9999477,13.3099477 L7.05276516,18.257895 C6.89655544,18.4141047 6.64328945,18.4141047 6.48707973,18.257895 L5.99210499,17.7629203 C5.83589527,17.6067105 5.83589527,17.3534446 5.99210499,17.1972348 L10.9399477,12.2499477 L5.74210499,7.05276516 C5.58589527,6.89655544 5.58589527,6.64328945 5.74210499,6.48707973 L6.23707973,5.99210499 C6.39328945,5.83589527 6.64655544,5.83589527 6.80276516,5.99210499 L11.9999477,11.1899477 L17.4472348,5.74210499 C17.6034446,5.58589527 17.8567105,5.58589527 18.0129203,5.74210499 Z",id:"Combined-Shape",fill:Object(i.getThemeColorByToken)("icon-n2"),fillRule:"nonzero"}))))))),c.a.createElement(d.h,null,c.a.createElement(d.w,{type:"text",value:E,ref:C,onChange:S,placeholder:v||t("block.iframe_input_placeholder")}),y?c.a.createElement(d.n,{target:"_blank",href:y},t("CreationDocs_Embeds_URL_HelpCenter")):null),c.a.createElement(d.x,null,c.a.createElement(d.Z,{onClick:b},t("block.iframe_show_example")),c.a.createElement(d.A,{onClick:function(){r(E)}},t("common.confirm"))))))}}).call(this,r("dx_E9Eu"))},dx_hbGB:function(e,n,r){},dx_hdH6:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M12 10.94l5.788-5.789a.375.375 0 01.53 0l.53.53a.375.375 0 010 .53L13.062 12l5.788 5.788a.375.375 0 010 .53l-.53.53a.375.375 0 01-.53 0L12 13.062l-5.788 5.788a.375.375 0 01-.53 0l-.53-.53a.375.375 0 010-.53L10.94 12 5.15 6.212a.375.375 0 010-.53l.53-.53a.375.375 0 01.531 0L12 10.938z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_hjqN:function(e,n,r){"use strict";(function(t){var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lSNA"),s=r.n(c),l=r("dx_RIqP"),u=r.n(l),d=r("dx_J4zp"),f=r.n(d),h=r("dx_Icqc"),p=r("dx_NWnn"),v=r("dx_UtDZ"),m=r("dx_cDcd"),g=r.n(m),y=r("dx_h74D"),b=r("dx_oncg"),_=r("dx_rQGm"),x=r("dx_yzqx"),k=r("dx_UHze"),E=r("dx_ZXMN"),O=r("dx_CtN0"),S=r("dx_Fimk"),C=r("dx_c6Cp"),w=r("dx_imty"),I=r("dx_Ayao"),T=r("dx_D8nn"),D=r("dx_sNGG"),A=r("dx_U5UJ"),j=r("dx_qx8A"),R=r.n(j),N=r("dx_oQzG"),P=r("dx_R0RU"),M=r("dx_YVDp");function B(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function L(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?B(Object(r),!0).forEach((function(n){s()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.S=Object(b.withRouter)((function(e){var n=e.commentModule,r=e.isCommentable,i=e.style,c=Object(E.b)(),s=Object(m.useRef)(null),l=Object(m.useRef)(null),d=Object(m.useRef)(null),b=Object(y.useSelector)(v.selectCurrentSuiteShareable),j=Object(m.useRef)(b),B=v.selectors.share.selectCurrentSuiteOtherPermissions,F=Object(y.useSelector)(B).copyable,H=Object(m.useRef)(F),W=n.getInnerCommentModule(),U=Object(m.useRef)();U.current=new p.Reporter({serviceToken:W.serviceToken,serviceType:W.serviceType,isWhole:!0,view:"globalDocX",reporterHandler:function(e,n){return Object(S.N)(e,n)}});var V=[];if(W.hasInitCommentData){V=W.getData().comments.filter((function(e){return e.isWhole&&!e.finished}));var z=W.getPlugin("translate");z&&z.triggerLangDetection(V)}var Q=Object(m.useState)(V),G=f()(Q,2),K=G[0],q=G[1],X=Object(m.useState)(t("comment.full_text")),Y=f()(X,2),J=Y[0],Z=Y[1],$=Object(v.getMinaConfig)("ccm.gpe.comment.optimize.loading_and_fail_pc",!1),ee=Object(v.getMinaConfig)("ccm.gpe.comment.optimize.loading_v2_pc",!1),te=Object(v.getMinaConfig)("ccm.platform.pc.common_mention",!1),ne=Object(m.useRef)(null),re=Object(m.useRef)(null),oe=Object(m.useCallback)((function(e,n,r){var o=e.comments.filter((function(e){return e.isWhole&&!e.finished}));q(o),function(e){var n=[];e.forEach((function(e){e.replyList.forEach((function(r){r.rangeList&&n.push.apply(n,u()(r.rangeList.map((function(n){return L({commentId:e.commentId,replyId:r.replyId},n)}))))}))})),T.s.emit(D.Y.GLOBAL_COMMENT_MATCH_CHANGE,n)}(o)}),[W]),ie=Object(m.useCallback)((function(e,n,r){var o=e.comments.filter((function(e){return e.isWhole&&!e.finished})),i=W.getPlugin("translate");if(i&&(i.triggerLangDetection(o),R.a.getState().appState.translate.status.translated)){var a=e.comments.filter((function(e){return e.isWhole&&!e.finished})).map((function(e){return{commentId:e.commentId,replyIds:e.replyList.filter((function(e){return!e.deleted})).map((function(e){return e.replyId}))}})),c=R.a.getState().appState.translate.config.target_lang;i.batchTranslate({comments:a,targetLang:c})}}),[W]),ae=Object(m.useCallback)((function(){var e=x.S.mac?t("common.mac_meta_key"):t("common.window_meta_key");Z(t("CreationDoc_Docs_EnterComment_placeholder",void 0,void 0,e))}),[]),ce=Object(m.useCallback)((function(){Z(t("comment.full_text"))}),[]),se=Object(m.useCallback)((function(e,n){if(ne.current){var r=K.find((function(n){return n.commentId===e}));if(r){var o=r.replyList.find((function(e){return e.replyId===n}));if(o){var i=W.data.getUser(o.userId);i&&(Object(p.editorFirstIsUser)(ne.current,i.id)||Object(p.performAtToEditor)(ne.current,{token:i.id,name:i.name}),Object(p.focusEditorLastSelection)(ne.current),re.current&&re.current.scrollIntoView())}}}}),[K,W]),le=Object(m.useCallback)((function(e){ne.current=e}),[]),ue=Object(m.useState)((function(){return Object(h.getCurrentThemeType)()===h.ThemeType.DARK?"dark":"light"})),de=f()(ue,2),fe=de[0],he=de[1],pe=Object(O.D)((function(r){var o=new p.EventEmitter,i=new p.CommentViewHooks,a=v.commentSDKHelper.MentionPlugin,c=v.commentSDKHelper.TranslateLimitPlugin,s=v.commentSDKHelper.UserProfilePlugin,l=v.commentSDKHelper.UnloadReminderPlugin,u=v.commentSDKHelper.AdminControlPlugin,f=v.commentSDKHelper.getCommentImageEnabled,h={commentSDK:W,logContext:Object(C.d)(n,!0),isGlobal:!0},m=[new a({commentSDK:W}),new s,new l({eventEmitter:o,history:v.history}),new N.S,new v.commentPieces.CommentReporterNewPlugin(h),new v.commentPieces.CommentWilldeprecatedReporterPlugin(h),new u,new c];if(e.vcController&&!d.current){var g=new M.S({vcController:e.vcController,eventEmitter:o});m.push(g),d.current=g}return m.forEach((function(e){e.attachHooks(i)})),{lang:v.i18nHelper.getLocale(),commentSDK:W,eventEmitter:o,request:new p.Request({requestInstance:v.request}),logger:new p.Logger({level:"DEBUG",moduleName:"Global Comment"}),registerEditorPlugin:v.commentSDKHelper.registerEditorPlugin,scrollContainer:document.querySelector(".bear-web-x-container"),hooks:i,modules:{translate:{enabled:!Object(k.E)(),getConfig:v.commentSDKHelper.getTranslateConfig},image:{enabled:f(),useBlob:x.S.isOpendoc,lineImageCount:1/0},search:{enabled:!0},permission:L({enabled:!0,getShowGrantPopover:function(){return j.current}},v.getCommentCopyableOptions?Object(v.getCommentCopyableOptions)():{}),mention:{enabled:!0,mentionBox:{zIndex:999,udMention:te}},optimize:{loadingAndFail:$,loadingV2:ee}},theme:r}}),[fe]);s.current=pe;var ve=function(e){var n=e.mode;he(n&&"DARK"===n.toUpperCase()?"dark":"light")},me=function(e){var n=e.commentId,r=e.replyId,o=e.options;pe&&pe.eventEmitter&&pe.eventEmitter.trigger("highlightReply",[n,r,o])},ge=function(e){pe&&pe.eventEmitter&&pe.eventEmitter.trigger("searchMatchHighlight",e)},ye=function(e){s.current&&s.current.eventEmitter&&s.current.eventEmitter.trigger("loadImageCover",[e])},be=function(){var e=a()(o.a.mark((function e(){var n,r,i,a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W.getData().comments.filter((function(e){return e.isWhole&&!e.finished})),r=n.map((function(e){return{commentId:e.commentId,replyIds:e.replyList.filter((function(e){return!e.deleted})).map((function(e){return e.replyId}))}})),i=W.getPlugin("translate"),a=v.commentSDKHelper.showPicLimitDialogIfNecessary,!i){e.next=11;break}return i.resetAllTranslateStatus(),c=R.a.getState().appState.translate.config.target_lang,e.next=9,i.batchTranslate({comments:r,targetLang:c,taskId:v.taskIdController.getTaskId()});case 9:(s=e.sent)&&a(s.code);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=W.getPlugin("translate");e&&e.resetAllTranslateStatus()};Object(m.useEffect)((function(){H.current=F}),[F]),Object(m.useEffect)((function(){j.current=b}),[b]),Object(m.useEffect)((function(){return T.s.on(T.p.TRANSLATE.TRANSLATE_EVENT_DONE,be),T.s.on(T.p.TRANSLATE.TRANSLATE_EVENT_CLOSE,_e),T.s.on(T.p.TRANSLATE.TRANSLATE_LANGUAGE_CHANGE,be),function(){T.s.off(T.p.TRANSLATE.TRANSLATE_EVENT_DONE,be),T.s.off(v.EVENTS.PC.COMMON.CLOSE_TRANSLATE,_e),T.s.off(T.p.TRANSLATE.TRANSLATE_LANGUAGE_CHANGE,be)}}),[]),Object(m.useEffect)((function(){return T.s.on(A.E,ye),function(){T.s.off(A.E,ye)}}),[]),Object(m.useEffect)((function(){if(!x.S.isMobile)return n.on(I.M.HIGHLIGHT_WHOLE_COMMENT,me),T.s.on(D.Y.GLOBAL_COMMENT_HIGHLIGHT_CHANGE,ge),function(){n.off(I.M.HIGHLIGHT_WHOLE_COMMENT,me),T.s.off(D.Y.GLOBAL_COMMENT_HIGHLIGHT_CHANGE,ge)}}),[]),Object(m.useEffect)((function(){return function(){d.current&&d.current.destroy()}}),[]);var xe=Object(m.useCallback)((function(){pe&&pe.eventEmitter&&pe.eventEmitter.trigger("scrollContainerScroll",[])}),[]),ke=Object(m.useCallback)((function(){c((function(){if(re.current){var e=document.querySelector(".".concat(_.b3.ROOT));if(e){var n=e.scrollTop+e.offsetHeight,r=re.current.offsetTop+re.current.offsetHeight;r>n&&(e.scrollTop+=r-n+90)}}}))}),[c]);Object(m.useEffect)((function(){l.current&&T.s.trigger(w.H.GlobalCommentDidMount,[l.current])}),[]),Object(m.useEffect)((function(){var e=document.querySelector(".bear-web-x-container");null===e||void 0===e||e.addEventListener("scroll",xe),W.on("commentDataChange",oe),W.on("commentDataChangeRemote",ie);var n=Object(h.onUIStateChange)(ve);return function(){n(),null===e||void 0===e||e.removeEventListener("scroll",xe),W.off("commentDataChange",oe),W.off("commentDataChangeRemote",ie)}})),Object(m.useEffect)((function(){var e;null===(e=n.setGlobalCommentLoaded)||void 0===e||e.call(n)}),[]);return g.a.createElement(v.WithBeforeUnloadReminder,{history:e.history,hasUnSaveData:function(){return!!K.find((function(e){return e.unSubmitted}))||!!ne.current&&"\n"!==ne.current.getRep().alltext},getUnSaveTip:function(){return t("comment.leave_page_warning_message")}},g.a.createElement(p.CommentPerfReporter,{reporter:U.current,watchList:K},g.a.createElement(P.I,{style:L({paddingBottom:90},i),className:"page-main-item ".concat(_.b3.LAZY_SELECTION_NODE," docx-global-comment"),ref:l},g.a.createElement(p.CommentViewContext.Provider,{value:pe},K.length?g.a.createElement(P.v,null,t("common.full.text_review")):null,K.map((function(e){return g.a.createElement(p.ReplyList,{key:e.commentId,commentId:e.commentId,editable:r,canResolve:r,theme:"global",replyList:e.replyList,containerVisible:!0,onReplyClick:se})})),r&&g.a.createElement("div",{ref:re,className:"docx-global-comment__textarea"},g.a.createElement(p.Textarea,{style:{marginTop:24},placeholder:J,onFocus:ae,onBlur:ce,onRequestError:function(e,n){s.current&&s.current.eventEmitter&&s.current.eventEmitter.trigger("setRetryCallback",[{replyId:e,retryCallback:n}])},isWhole:!0,onEditorChange:le,confirmBtnText:t("comment.post"),size:"large",onConfirm:ke}))))))}))}).call(this,r("dx_E9Eu"))},dx_i1hO:function(e,n,r){},dx_i30i:function(e,n,r){"use strict";(function(t){var e=r("dx_J4zp"),o=r.n(e),i=r("dx_gEUD"),a=r("dx_OKGb"),c=r("dx_PcQO"),s=r("dx_cDcd"),l=r.n(s),u=r("dx_yruC"),d=(r("dx_Z5Zd"),"docx-bookmark-popup");n.S=function(e){var n=e.left,r=e.top,f=e.onConfirm,h=e.onShowExample,p=e.onClickHelp,v=e.onClose,m=e.scroller,g=Object(s.useState)(""),y=o()(g,2),b=y[0],_=y[1],x=Object(s.useRef)(null),k=Object(s.useRef)(!1);Object(s.useEffect)((function(){setTimeout((function(){(null===x||void 0===x?void 0:x.current)&&x.current.focus()}),100)}),[x]);return l.a.createElement(u.M,{basePosition:{x:n,y:r},placement:"bottomRight",adjustPlacement:["topRight","top","right","left"],style:{zIndex:99,position:"absolute"},onClose:v,container:m,visible:!0,checkScroll:!0},l.a.createElement("div",{className:"".concat(d)},l.a.createElement("div",{className:"".concat(d,"-head")},l.a.createElement("div",{className:"".concat(d,"-title")},t("CreationDoc_Docs_WebBookmark_PasteLink_Title"),l.a.createElement(c.Tooltip,{title:t("CreationDoc_Docs_WebBookmark_PasteLink_Help_Tooltip"),placement:"top"},l.a.createElement("div",{className:"".concat(d,"-tip-icon")},l.a.createElement(c.Button,{type:"icon",size:"small",icon:l.a.createElement(i.S,null),onClick:p})))),l.a.createElement(c.Button,{className:"".concat(d,"-close"),type:"icon",size:"small",icon:l.a.createElement(a.S,null),onClick:e.onClose})),l.a.createElement("div",{className:"".concat(d,"-input-wrapper")},l.a.createElement("input",{ref:x,className:"".concat(d,"-input"),type:"text",value:b,onChange:function(e){return _(e.target.value)},placeholder:t("CreationDoc_Docs_WebBookmark_PasteLink_Placeholder"),onCompositionStart:function(){k.current=!0},onCompositionEnd:function(){k.current=!1},onKeyDown:function(e){!k.current&&b&&("Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),f(b)))}})),l.a.createElement("div",{className:"".concat(d,"-footer")},l.a.createElement("button",{className:"".concat(d,"-example-btn"),onClick:h},t("CreationDoc_Docs_WebBookmark_Example_Button")),l.a.createElement("div",{className:"".concat(d,"-btn-wrapper")},l.a.createElement("button",{className:"".concat(d,"-btn-confirm"),onClick:function(){f(b)}},t("common.confirm"))))))}}).call(this,r("dx_E9Eu"))},dx_j13B:function(e,n,r){"use strict";r.r(n);var o=r("dx_o0o1"),i=r.n(o),a=r("dx_yXPU"),c=r.n(a),s=r("dx_UtDZ"),l=r("dx_BaZy"),u=r.n(l);n.default=u()({loader:function(){var e=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof s.loadBidirectionalLinkListAdapter){e.next=3;break}return e.next=3,Object(s.loadBidirectionalLinkListAdapter)();case 3:return e.abrupt("return",r.e("dx_q3q").then(r.bind(null,"dx_f2fv")));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loading:function(){return null}})},dx_j2jX:function(e,n,r){"use strict";(function(t){r.d(n,"S",(function(){return S}));var e=r("dx_cDf5"),o=r.n(e),i=r("dx_lwsE"),a=r.n(i),c=r("dx_W8MJ"),s=r.n(c),l=r("dx_W7W2"),u=r.n(l),d=r("dx_a1gu"),f=r.n(d),h=r("dx_Nsbk"),p=r.n(h),v=r("dx_cDcd"),m=r.n(v),g=r("dx_PcQO"),y=r("dx_UtDZ"),b=r("dx_Sz92"),_=(r("dx_s5s6"),r("dx_h6a8")),x=r("dx_xs2W"),k=r("dx_DgOD"),E=r("dx_gZ0V");function O(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var S=function(e){u()(r,e);var n=O(r);function r(e){var o;return a()(this,r),(o=n.call(this,e)).logInfoObj=void 0,o.domStructureArray=void 0,o.handleConfirm=function(){return o.props.onConfirm(o.state.isCheckboxClicked),!0},o.onToggleCheckbox=function(){o.setState((function(e){return{isCheckboxClicked:!e.isCheckboxClicked}}))},o.linkToPrivacyPolicy=function(){Object(x.T)("https://www.feishu.cn/zh/privacy","_blank")},o.linkToTermsOfService=function(){Object(x.T)("https://www.feishu.cn/zh/terms","_blank")},o.showDetailedLog=function(){o.setState({detailedLogVisible:!0})},o.enabledPolicyStatement=function(e){return m.a.createElement(v.Fragment,null,m.a.createElement("div",{className:"upload-dialog-content"},m.a.createElement(E.w,{name:t("common_log_upload_full_msg_newVariable")},m.a.createElement("span",{className:"upload-log-link",onClick:o.showDetailedLog},t("common.log_info")),m.a.createElement("span",{className:"upload-log-link",onClick:o.linkToPrivacyPolicy},t("common.privacy_policy")),m.a.createElement("span",{className:"upload-log-link",onClick:o.linkToTermsOfService},t("common.service_terms"))),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("div",null,t("common.upload_log"))),e)},o.getCopywriting=function(){var e=m.a.createElement(g.Dialog,{visible:o.state.detailedLogVisible,title:"Additional info",centered:!0,width:400,zIndex:1005,footer:null,onCancel:function(){o.setState({detailedLogVisible:!1})},style:{height:700},bodyStyle:{height:646,overflow:"auto"}},m.a.createElement(m.a.Fragment,null,o.domStructureArray.length?o.domStructureArray:null));return o.enabledPolicyStatement(e)},o.renderItemStructure=function(e,n,r){return m.a.createElement(v.Fragment,{key:"".concat(e+r)},m.a.createElement("dt",{className:"log-attr-info"},e.replace(/\./g,"-")),m.a.createElement("dd",{className:"log-value-info"},String(n)))},o.renderFooter=function(){var e=o.props.uploading,n=o.state.isCheckboxClicked;return m.a.createElement("div",{className:"upload-dialog"},m.a.createElement("div",{className:"dialog-checkbox"},m.a.createElement(g.Checkbox,{checked:n,onChange:o.onToggleCheckbox},m.a.createElement("span",{className:"checkbox-text"},t("guide.no_more_remind")))),m.a.createElement(g.Button,{className:"cancel-button",onClick:function(){return o.props.onCancel()}},t("common.cancel")),m.a.createElement(g.Button,{className:"confirm-button",type:"primary",loading:e,onClick:o.handleConfirm},t("common.file_upload")))},o.state={isCheckboxClicked:!1,detailedLogVisible:!1},o.domStructureArray=[],o}return s()(r,[{key:"componentDidMount",value:function(){this.fetchLogs()}},{key:"fetchLogs",value:function(){var e=this,n=Object(k.S)();Object(y.getCustomLogs)(n).then((function(n){e.setState({detailedLogObject:JSON.parse(n)})}))}},{key:"parseLogInfoObj",value:function(e){var n=this,r=[];if(this.logInfoObj)for(var i=function(i){var a=Object(_.get)(n.logInfoObj,e[i]),c=o()(a);if("string"===c&&a.length||"number"===c||"boolean"===c)r.push(n.renderItemStructure(e[i],a,c));else if(a&&"object"===c){var s=Object.keys(a).map((function(n){return"".concat(e[i],".").concat(n)}));r.push(n.parseLogInfoObj(s))}},a=0;a<e.length;a++)i(a);return r}},{key:"render",value:function(){var e=this,n=this.props,r=n.visible,o=n.onCancel,i=this.state.detailedLogObject;if(i){this.logInfoObj=i,this.logInfoObj.domain=document.domain,this.logInfoObj.language=y.i18nHelper.getLanguage(),this.logInfoObj.userAgent=i.ua,this.logInfoObj.slardarWebId=Object(b.X)("SLARDAR_WEB_ID"),this.logInfoObj.spreadSheetId=i.ssid;this.domStructureArray=[{name:"Product info",value:["domain","scm","scmDocx","language","userId","slardarWebId"]},{name:"Browser info",value:["userAgent","memory","timezone","io.localStorage"]},{name:"Page info",value:["otherMsg.engineSyncLog","heartbeatRequestStatus","spreadSheetId","token","fileType","memberId","teaSessionId","activeSheetId","activeSheetRowCount","activeSheetColumnCount","sheetCount","sheetIds","sheetRevision","networkLogQueue","members"]}].map((function(n){return m.a.createElement("div",{key:n.name},m.a.createElement("h3",{className:"log-title-attr"},n.name),m.a.createElement("dl",null,e.parseLogInfoObj(n.value)),m.a.createElement("br",null))}))}return m.a.createElement(g.Dialog,{visible:r,title:t("guide.upload_log"),centered:!0,width:400,closable:!0,onCancel:o,destroyOnClose:!0,footer:this.renderFooter()},this.getCopywriting())}}]),r}(v.Component)}).call(this,r("dx_E9Eu"))},dx_j9jH:function(e,n,r){"use strict";(function(t){r.d(n,"c",(function(){return L}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lwsE"),s=r.n(c),l=r("dx_W8MJ"),u=r.n(l),d=r("dx_W7W2"),f=r.n(d),h=r("dx_a1gu"),p=r.n(h),v=r("dx_Nsbk"),m=r.n(v),g=r("dx_TSYQ"),y=r.n(g),b=r("dx_UtDZ"),_=r("dx_h6a8"),x=r("dx_cDcd"),k=r.n(x),E=r("dx_bdgK"),O=r("dx_yzqx"),S=r("dx_D9db"),C=r("dx_a8pA"),w=r("dx_xI7u"),I=r("dx_TBtt"),T=r("dx_tgFd"),D=r("dx_EnrF"),A=r("dx_h8ix"),j=r("dx_X1XY"),R=r("dx_wtrf"),N=r("dx_cBZs"),P=r("dx_h3hp"),M=r("dx_n1na");r("dx_bHyS");function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=m()(e);if(n){var i=m()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return p()(this,r)}}var L=function(e){f()(r,e);var n=B(r);function r(){var e;s()(this,r);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=n.call.apply(n,[this].concat(c))).listContainerDom=void 0,e.majorHistoryInstances=[],e.retryNum=0,e.destroyScrollBottomEvent=void 0,e.state={isLoading:!1,majorHistoryList:[],isShowDiff:!0,selectedHistoryItem:null,nextCursor:0,hasMore:!0,isShowDocSecretPrompt:!1},e.containerResizeObserver=new E.S(Object(_.debounce)((function(){e.shouldTryToLoadMoreData()&&e.tryToLoadMoreData()}),100)),e.reload=function(){e.setState({majorHistoryList:[],selectedHistoryItem:null,nextCursor:0,hasMore:!0}),e.initList()},e.tryToLoadMoreData=a()(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.state.hasMore){n.next=2;break}return n.abrupt("return");case 2:if(!e.state.isLoading){n.next=4;break}return n.abrupt("return");case 4:if(!e.state.isShowDocSecretPrompt){n.next=6;break}return n.abrupt("return");case 6:return e.setState({isLoading:!0}),n.next=9,e.fetchHistoryList();case 9:r=n.sent,e.handleData(r),e.setState({isLoading:!1});case 12:case"end":return n.stop()}}),n)}))),e.handleClickBySecretItem=function(){j.r.emit(j.h.SHOW_ERROR,T.K.NO_SECRET),j.r.emit(j.h.RESET_HISTORY_ITEM),e.resetSelectedItem()},e.onClickItem=function(n){var r,o;if(!Object(R.T)(w.u)&&e.state.selectedHistoryItem!==n){e.setState({selectedHistoryItem:n});var i=e.isNewest(n);null===(r=(o=e.props).onClickItem)||void 0===r||r.call(o,n,i),Object(S.fB)(S.f.VIEW_HISTORY,{ccm_history_verid:"".concat(n.version)})}},e.resetSelectedItem=function(){e.setState({selectedHistoryItem:null})},e.listContainerRef=function(n){n&&(e.listContainerDom=n,e.destroyScrollBottomEvent=Object(A.S)(n,e.tryToLoadMoreData),e.containerResizeObserver.disconnect(),e.containerResizeObserver.observe(n))},e}return u()(r,[{key:"componentDidMount",value:function(){j.r.on(j.h.RELOAD,this.reload),this.initList()}},{key:"componentWillUnmount",value:function(){j.r.off(j.h.RELOAD,this.reload),this.destroyScrollBottomEvent&&this.destroyScrollBottomEvent(),this.containerResizeObserver.disconnect()}},{key:"componentDidUpdate",value:function(){!this.state.isLoading&&this.shouldTryToLoadMoreData()&&this.tryToLoadMoreData()}},{key:"initList",value:function(){var e=a()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(D.Ux)()){e.next=3;break}return setTimeout((function(){j.r.emit(j.h.SHOW_ERROR,T.K.OFFLINE)}),100),e.abrupt("return");case 3:return this.showLoading(),e.next=6,this.fetchHistoryList();case 6:n=e.sent,this.handleData(n),this.hideLoading(),this.state.majorHistoryList.length&&(this.openFirstMajorHistoryWithMultipleMinorHistories(),!1!==this.props.selectable&&this.setFirstHistoryOnBoarding());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldTryToLoadMoreData",value:function(){return this.state.hasMore&&this.listContainerDom&&Object(b.isOnline)()&&!this.hasOverflowedLimit&&this.listContainerDom.scrollHeight<=this.listContainerDom.clientHeight&&!this.state.isShowDocSecretPrompt}},{key:"showLoading",value:function(){this.setState({isLoading:!0}),j.r.emit(j.h.SHOW_LOADING)}},{key:"hideLoading",value:function(){this.setState({isLoading:!1}),j.r.emit(j.h.HIDE_LOADING)}},{key:"fetchHistoryList",value:function(){var e=a()(o.a.mark((function e(){var n,r,i,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state,r=n.nextCursor,i=n.hasMore,a={page_id:this.props.token,count:10},r&&i&&(a.cursor=r),e.next=5,I.d.fetchHistoryList(a).catch((function(e){return e}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleData",value:function(e){var n=this.state.majorHistoryList,r=e instanceof Error||0!==e.code;if((null===e||void 0===e?void 0:e.code)===C.y.KEY_INVALID)return this.setState({isShowDocSecretPrompt:!0}),void(this.state.nextCursor||j.r.emit(j.h.SHOW_ERROR,T.K.NO_SECRET));if(r)return this.retryNum+=1,void j.r.emit(j.h.SHOW_ERROR,T.K.FAILED);var o=e.data.major_history;o.forEach((function(e){var n;null===(n=e.minor_history)||void 0===n||n.forEach((function(n){n.parentVersion=e.version}))}));var i=n.concat(o);if(i.length){var a=e.data.next_cursor||0,c=e.data.has_more;this.setState({majorHistoryList:i,nextCursor:a,hasMore:c}),N.J.setUsersConfig(e.data.user)}else j.r.emit(j.h.SHOW_ERROR,T.K.NO_DATA)}},{key:"openFirstMajorHistoryWithMultipleMinorHistories",value:function(){var e=this.majorHistoryInstances.find((function(e){return null===e||void 0===e?void 0:e.hasMultipleMinorHistories()}));null===e||void 0===e||e.handleIconClick(!1)}},{key:"setFirstHistoryOnBoarding",value:function(){var e=this.state.majorHistoryList[0].minor_history;if(1!==e.length){var n=e[0];this.onClickItem(n)}else{var r=this.state.majorHistoryList[0];this.onClickItem(r)}}},{key:"isNewest",value:function(e){var n=this.state.majorHistoryList[0];return e===n||e===n.minor_history[0]}},{key:"majorHistoryRef",value:function(e,n){this.majorHistoryInstances[e]=n}},{key:"render",value:function(){var e=this,n=this.state,r=n.majorHistoryList,o=n.isShowDocSecretPrompt,i="",a=y()(["history-timeline-scroller",this.props.className,{mobile:O.S.mobile}]);return k.a.createElement("div",{className:a,ref:this.listContainerRef},r.map((function(n,r){var o=Object(D.Z)(1e3*n.edit_time),a=i!==o;return i=o,[a&&k.a.createElement(P.s,{key:"".concat(n.version,"-date"),date:o}),k.a.createElement(M.l,{key:"".concat(n.version,"major_history"),ref:e.majorHistoryRef.bind(e,r),selectedHistoryItem:e.state.selectedHistoryItem,majorHistory:n,onClickItem:e.onClickItem,hideSelectedStyle:e.props.hideSelectedStyle,isCurrent:0===r})]})),o&&k.a.createElement("div",{className:"no-secret-item",onClick:this.handleClickBySecretItem},t("CreationDoc_Docs_KeyInvalidHistory")))}},{key:"hasOverflowedLimit",get:function(){return this.retryNum>=w.a}}]),r}(k.a.Component)}).call(this,r("dx_E9Eu"))},dx_jAXy:function(e,n,r){"use strict";r.d(n,"G",(function(){return B}));var o=r("dx_lSNA"),i=r.n(o),a=r("dx_o0o1"),c=r.n(a),s=r("dx_yXPU"),l=r.n(s),u=r("dx_lwsE"),d=r.n(u),f=r("dx_W8MJ"),h=r.n(f),p=r("dx_PJYZ"),v=r.n(p),m=r("dx_W7W2"),g=r.n(m),y=r("dx_a1gu"),b=r.n(y),_=r("dx_Nsbk"),x=r.n(_),k=r("dx_uxuX"),E=r("dx_UtDZ"),O=r("dx_h6a8"),S=r("dx_cDcd"),C=r("dx_yzqx"),w=r("dx_zUqt"),I=r("dx_Fimk"),T=r("dx_O1Ou"),D=r("dx_oCpo"),A=r("dx_J5JQ"),j=function(){function e(n,r,o){d()(this,e),this.component=n,this.uuid=r,e.currentActionUuid[o]=r}return h()(e,[{key:"detectImageView",value:function(n){var r;if(this.uuid===e.currentActionUuid.preview){var o=n.id,i=n.type,a="".concat(D.l,"-preview");if(i===A.Q.CLOSE){var c="[".concat(a,"]: viewer not close"),s=!this.component.getViewerVisible();return s?this.success():this.fail(c),void(!s&&Object(I.N)("vc_action_apply_dev",{code:1,info:c,action:a,string_param_1:"",string_param_2:JSON.stringify(n)}))}if(!this.component.getViewerVisible()){var l="[".concat(a,"]: viewer not open");return this.fail(l),void Object(I.N)("vc_action_apply_dev",{code:1,info:l,action:a,string_param_1:"",string_param_2:JSON.stringify(n)})}var u=(null===(r=this.component.getCurrentImage())||void 0===r?void 0:r.recordId)===o,d="[".concat(a,"]: showing image is not match");u?this.success():this.fail(d),Object(I.N)("vc_action_apply_dev",{code:u?0:1,info:d,action:a,string_param_1:JSON.stringify(this.component.getCurrentImage()||{}),string_param_2:JSON.stringify(n),string_param_3:u?JSON.stringify(this.component.getCurrTransformInfo()):void 0})}else this.ignore("outdated by new action")}},{key:"detectImageTransform",value:function(n,r){if(this.uuid===e.currentActionUuid.transform){var o="".concat(D.l,"-transform"),i=Object.keys(n).filter((function(e){return n[e]!==r[e]})),a=!i.length,c="[".concat(o,"]: transform fail with this attrs - ").concat(i.toString());a?this.success():this.fail(c),!a&&Object(I.N)("vc_action_apply_dev",{code:1,info:c,action:o,string_param_1:JSON.stringify(r),string_param_2:JSON.stringify(n)})}else this.ignore("outdated by new action")}},{key:"success",value:function(){var e;null===(e=this.component.props.vcController)||void 0===e||e.reportReplay(T.s.SUCCESS,this.uuid)}},{key:"fail",value:function(e){var n;null===(n=this.component.props.vcController)||void 0===n||n.reportReplay(T.s.FAIL,this.uuid,e)}},{key:"ignore",value:function(e){var n;null===(n=this.component.props.vcController)||void 0===n||n.reportReplay(T.s.IGNORE,this.uuid,e)}}]),e}();j.currentActionUuid={preview:"",transform:""};var R=r("dx_u13u");function N(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?N(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function M(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=x()(e);if(n){var i=x()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return b()(this,r)}}var B=function(e){g()(r,e);var n=M(r);function r(){var e;d()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).unregisterVcController=void 0,e.openImageRetryTimer=void 0,e.isSupportTransform=!0,e.clearReplayOpenImageRetryTimer=void 0,e.latestReplayPreviewType=A.Q.CLOSE,e.replayHandler=function(n){var r=n.actionType,o=n.data,i=n.uuid;switch(r){case A.o.PREVIEW:e.replayPreviewAction(o,i);break;case A.o.TRANSFORM:e.replayTransformAction(o,i)}},e.presenterHandler=function(n){var r=n.actionType,o=n.data;if(r===A.o.PREVIEW)e.sendPosition(T.f.PRESENTER,o)},e.cycleHandler=function(n){n===k.STOP_FOLLOW&&e.clearTimer()},e.replayPreviewAction=function(n,r){var o,i,a=n.id,s=n.type,u=new j(v()(e),r,"preview"),d=e.getViewerVisible();switch(e.clearOpenImageRetryTimer(),null===(o=(i=e).clearReplayOpenImageRetryTimer)||void 0===o||o.call(i),e.latestReplayPreviewType=s,s){case A.Q.OPEN:if(d&&e.switchImage(a)){u.success();break}var f=function(){var r=l()(c.a.mark((function r(o){var i,a,s,l,d,h=arguments;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=h.length>1&&void 0!==h[1]?h[1]:0,s=null===(i=e.blockManager)||void 0===i?void 0:i.getBlockModelsByRecordId(o)[0],!e.blockManager||!s){r.next=9;break}return r.next=5,e.blockManager.layoutManager.renderNodeById([s.id]);case 5:l=e.blockManager.getBlockViewByBlockId(s.id),e.openViewer(l,(function(){u.detectImageView(n)})),r.next=10;break;case 9:a<D.A?(d=setTimeout((function(){e.clearReplayOpenImageRetryTimer=void 0,f(o,a+1)}),D.L),e.clearReplayOpenImageRetryTimer=function(){clearTimeout(d),e.clearReplayOpenImageRetryTimer=void 0,u.ignore("no use")}):u.fail("[".concat(D.l,"]: (preview) retried too many times"));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();f(a);break;case A.Q.CLOSE:if(!d)return void u.ignore("is closed");e.closeViewer(D.w.VC,(function(){u.detectImageView(n)}))}},e.replayTransformAction=function(n,r){if(e.isSupportTransform){var o=n.id,i=n.info,a=e.getCurrentImage(),c=new j(v()(e),r,"transform");if(o)if(e.latestReplayPreviewType!==A.Q.CLOSE){var s=e.getViewerVisible(),l=e.checkViewerImageLoadComplete();if(!s||!l||(null===a||void 0===a?void 0:a.recordId)!==o){var u="".concat(D.l,"-transform"),d="current show image is not same with transform image";return s||(d="viewer is not visible"),l||(d="image is loading"),c.fail(d),void Object(I.N)("vc_action_apply_dev",{code:1,info:"[".concat(u,"]: ").concat(d),action:u,string_param_1:JSON.stringify(a),string_param_2:JSON.stringify(n)})}var f=e.updateImageTransform(i);e.sendVcTransformState(o,i),c.detectImageTransform(n.info,f)}else c.ignore("latest preview type is close");else c.ignore("id is null")}else{var h;null===(h=e.props.vcController)||void 0===h||h.reportReplay(T.s.IGNORE,r,"Mobile is not support image transform")}},e.sendVcPreviewState=function(n,r){var o,i={id:n,type:r?A.Q.OPEN:A.Q.CLOSE};null===(o=e.props.vcController)||void 0===o||o.sendState(D.l,A.o.PREVIEW,i,!0)},e}return h()(r,[{key:"componentDidMount",value:function(){this.registerVcController()}},{key:"componentDidUpdate",value:function(e,n){var r=this.props.vcController;!e.vcController&&r&&this.registerVcController()}},{key:"componentWillUnmount",value:function(){var e;this.clearTimer(),null===(e=this.unregisterVcController)||void 0===e||e.call(this),this.sendVcPreviewState("",!1)}},{key:"registerVcController",value:function(){var e,n=this,r=this.props.vcController;r&&!this.unregisterVcController&&(this.unregisterVcController=r.register({moduleName:D.l,defaultState:(e={},i()(e,A.o.PREVIEW,{id:"",type:A.Q.CLOSE}),i()(e,A.o.TRANSFORM,{id:"",info:R.v}),e),replayHandler:this.replayHandler,presenterHandler:this.presenterHandler,cycleHandler:this.cycleHandler,retryOptions:{retryTimes:8,retryIntervalMs:400},retryOnVersionMatched:"fail-only",checkSame:function(e,r,o){switch(e){case A.o.PREVIEW:var i=r,a=i.id,c=i.type,s=o,l=s.id;return c===s.type&&(c!==A.Q.OPEN||a===l);case A.o.TRANSFORM:if(C.S.isMobile||n.latestReplayPreviewType===A.Q.CLOSE||!n.getViewerVisible())return!0;var u=r,d=u.id,f=u.info;if(!d)return!0;var h=o,p=h.id,v=h.info,m=P(P({},R.v),f),g=P(P({},R.v),v);return d===p&&Object(O.isEqual)(m,g);default:return!1}}}))}},{key:"sendVcTransformState",value:function(e,n){var r;null===(r=this.props.vcController)||void 0===r||r.sendState(D.l,A.o.TRANSFORM,{id:e,info:n},!0)}},{key:"clearTimer",value:function(){var e;this.clearOpenImageRetryTimer(),null===(e=this.clearReplayOpenImageRetryTimer)||void 0===e||e.call(this)}},{key:"sendPosition",value:function(e,n){var r,o=n.id,i=n.type;null===(r=this.props.vcController)||void 0===r||r.sendPosition(e,{space:i===A.Q.OPEN?o:Object(E.encryptTea)(Object(w.k)())})}},{key:"clearOpenImageRetryTimer",value:function(){this.openImageRetryTimer&&clearTimeout(this.openImageRetryTimer),this.openImageRetryTimer=void 0}},{key:"blockManager",get:function(){var e;return null===(e=this.props.vcController)||void 0===e?void 0:e.blockManager}},{key:"isFollowing",get:function(){var e;return null===(e=this.props.vcController)||void 0===e?void 0:e.isFollow}}]),r}(S.Component)},dx_jeRx:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M17.057 15.996l2.981 2.982a.375.375 0 010 .53l-.53.53a.375.375 0 01-.53 0l-2.982-2.981a7.5 7.5 0 111.06-1.06zM11.25 17.25a6 6 0 100-12 6 6 0 000 12zM8.625 10.5h5.25a.376.376 0 01.375.375v.75a.376.376 0 01-.375.375h-5.25a.375.375 0 01-.375-.375v-.75a.375.375 0 01.375-.375z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_k3lJ:function(e,n,r){"use strict";r.d(n,"w",(function(){return d}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_B28d"),l=r("dx_EnrF"),u=r("dx_X1XY"),d=function(){function e(){var n=this;i()(this,e),this.externalBlockInfo=void 0,this.recordIdToIndexMap=new Map,this.externalBlockType=new Set([s.B.BITABLE,s.B.SHEET]),this.blockTokenToRecordIdMap=new Map,this.blockTokenLoadedStatus=new Map,this.tempChangeDetails=[],this.hasExternalChange=!1,this.isShowDiff=!0,this.handleExternalHistoryResultReady=function(e){var r=e.mainToken,o=e.subToken,i=e.result;i.forEach((function(e){var o="".concat(r,"_").concat(e),i=n.blockTokenLoadedStatus.get(o);if(!0!==i&&void 0!==i){n.blockTokenLoadedStatus.set(o,!0);var a=n.blockTokenToRecordIdMap.get(o);n.tempChangeDetails.push({recordId:a,id:a,siblings:[],type:"external"})}}));var a="".concat(r,"_").concat(o);0===i.length&&n.blockTokenLoadedStatus.has(a)&&n.blockTokenLoadedStatus.set(a,!0),Array.from(n.blockTokenLoadedStatus.values()).every((function(e){return!0===e}))&&n.emitReadyEvent()}}return c()(e,[{key:"injectOptions",value:function(e){this.externalBlockInfo=e.externalBlockInfo,this.tempChangeDetails=e.changeDetails,u.r.on(u.X.EXTERNAL_HISTORY_RESULT_READY,this.handleExternalHistoryResultReady)}},{key:"injectBlockManager",value:function(e){var n=this;if(this.isShowDiff){var r=[];e.traverse(e.rootBlockId,(function(o){var i=e.getRecordByBlockId(o),a=i.id,c=i.snapshot;r.push(a);var s=c.type,u=c.token,d=Object(l.W)(s,u);return n.externalBlockType.has(s)&&n.externalBlockInfo[d]&&(n.hasExternalChange=!0,n.blockTokenToRecordIdMap.set(u,a),n.blockTokenLoadedStatus.set(u,!1)),!0})),r.forEach((function(e,r){n.recordIdToIndexMap.set(e,r)})),this.hasExternalChange||this.emitReadyEvent()}}},{key:"emitReadyEvent",value:function(){u.r.emit(u.X.EXTERNAL_HISTORY_ALL_READY,{changes:this.getChangeDetailsWithExternalChange()})}},{key:"getChangeDetailsWithExternalChange",value:function(){var e=this;return this.hasExternalChange?this.tempChangeDetails.map((function(n){return[e.recordIdToIndexMap.get(n.recordId),n]})).sort((function(e,n){return e[0]===n[0]?"external"===e[1].type?1:-1:e[0]<n[0]?-1:e[0]>n[0]?1:0})).map((function(e){return e[1]})):this.tempChangeDetails}},{key:"reset",value:function(){this.recordIdToIndexMap.clear(),this.blockTokenLoadedStatus.clear(),this.blockTokenToRecordIdMap.clear(),this.hasExternalChange=!1,this.tempChangeDetails.length=0,this.isShowDiff=!0,u.r.off(u.X.EXTERNAL_HISTORY_RESULT_READY,this.handleExternalHistoryResultReady)}},{key:"destroy",value:function(){u.r.off(u.X.EXTERNAL_HISTORY_RESULT_READY,this.handleExternalHistoryResultReady)}}]),e}()},dx_k9ku:function(e,n,r){"use strict";r.d(n,"r",(function(){return i}));var o=r("dx_Fimk");function i(e,n){return Object(o.N)(e,n)}},dx_kWjH:function(e,n,r){},dx_lICl:function(e,n,r){"use strict";r.d(n,"l",(function(){return a})),r.d(n,"Q",(function(){return u}));var o,i,a,c=r("dx_lSNA"),s=r.n(c);!function(e){e.ZH="zh",e.EN="en",e.JA="ja",e.ZHTW="zh-TW",e.ZHHK="zh-HK"}(i||(i={})),function(e){e.ZH="zh-CN",e.EN="en-US",e.JA="ja-JP",e.ZHTW="zh-TW",e.ZHHK="zh-HK"}(a||(a={}));var l=(o={},s()(o,i.ZH,a.ZH),s()(o,i.EN,a.EN),s()(o,i.JA,a.JA),s()(o,i.ZHTW,a.ZHTW),s()(o,i.ZHHK,a.ZHHK),o);function u(){return l[window._lang||i.EN]||a.EN}},dx_m0mm:function(e,n,r){"use strict";r.r(n);var o=r("dx_UtDZ"),i=r("dx_h74D"),a=r("dx_furZ"),c=r("dx_o0o1"),s=r.n(c),l=r("dx_yXPU"),u=r.n(l),d=r("dx_lwsE"),f=r.n(d),h=r("dx_W8MJ"),p=r.n(h),v=r("dx_W7W2"),m=r.n(v),g=r("dx_a1gu"),y=r.n(g),b=r("dx_Nsbk"),_=r.n(b),x=r("dx_cDcd"),k=r.n(x),E=r("dx_eSV8"),O=r("dx_MUMK"),S=r("dx_OJCf"),C=r("dx_zghO"),w=r("dx_w0Wf"),I=r("dx_PcQO"),T=r("dx_TSYQ"),D=r.n(T),A=r("dx_sNGG"),j=r("dx_lROi"),R=r("dx_J4zp"),N=r.n(R),P=r("dx_j01j"),M=r.n(P),B=(r("dx_SgwB"),"react-draggable-disable-node");function L(e){var n=Object(x.useState)(!1),r=N()(n,2),o=r[0],i=r[1];return k.a.createElement("div",{className:D()("draggable-wrapper",{"draggable-wrapper-mask":o})},k.a.createElement(M.a,{bounds:"body",cancel:".".concat(B),onStart:function(){e.deactivateSelection(),i(!0)},onStop:function(){e.activateSelection(),i(!1)}},e.children))}r("dx_hbGB");function F(e){var n=e.showReplace?k.a.createElement(H,{isReplacingAll:e.isReplacingAll,count:e.count,replaceAble:e.replaceAble,replaceAllAble:e.replaceAllAble,onReplace:function(){e.onReplace&&e.onReplace(),Object(j.K)("click_replace")},onReplaceAll:function(){e.onReplaceAll&&e.onReplaceAll(),Object(j.K)("click_replace_all")}}):null,r=0===e.count||1===e.count||e.isReplacingAll,o=e.isReplacingAll?{marginRight:"5px"}:{marginRight:"12px"},i=D()("button-group-wrapper",{"button-group-wrapper-align-right":!e.showReplace});return k.a.createElement("div",{className:i},n,k.a.createElement(I.Tooltip,{title:A.H.prev,placement:"bottom"},k.a.createElement(I.Button,{style:o,disabled:r,onMouseDown:function(n){n.preventDefault(),e.onFindPrev(),Object(j.K)("click_scroll_result",{sub_click:"previous"})},className:"".concat(B)},A.x.prevBtn)),k.a.createElement(I.Tooltip,{title:A.H.next,placement:"bottom"},k.a.createElement(I.Button,{disabled:r,onMouseDown:function(n){n.preventDefault(),e.onFindNext(),Object(j.K)("click_scroll_result",{sub_click:"next"})},className:"".concat(B)},A.x.nextBtn)))}function H(e){var n=0===e.count,r=n||!e.replaceAllAble,o=n||!e.replaceAble||e.isReplacingAll,i=e.isReplacingAll?{marginRight:"5px"}:{marginRight:"12px"};return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.Button,{style:i,loading:e.isReplacingAll,onClick:e.onReplaceAll,disabled:r,className:"".concat(B),type:"primary"},A.x.replaceAllBtn),k.a.createElement(I.Button,{style:i,onClick:e.onReplace,disabled:o,className:"".concat(B)},A.x.replaceBtn))}function W(){var e={marginRight:"12px"};return k.a.createElement("div",{id:A.X},k.a.createElement(I.Button,{style:e,type:"primary"},A.x.replaceAllBtn),k.a.createElement(I.Button,{style:e},A.x.replaceBtn),k.a.createElement(I.Button,{style:e},A.x.prevBtn),k.a.createElement(I.Button,null,A.x.nextBtn))}var U=r("dx_yzqx"),V=r("dx_KTtu");r("dx_pYMQ");function z(e){var n=0===e.count;return k.a.createElement("span",{className:"counter"},n?0:e.index+1," / ",e.count)}var Q=r("dx_gEUD"),G=r("dx_FnUg");r("dx_d3dq");function K(e){if(!e.canNotReplaceCount||e.canNotReplaceCount<=0)return null;return k.a.createElement("div",{className:"replace-tips"},k.a.createElement("span",null,A.x.noPermissionTips(e.canNotReplaceCount)),k.a.createElement(I.Tooltip,{title:A.x.helpCenter},k.a.createElement(Q.S,{className:"tips-icon",onClick:function(){window.open(Object(G.L)(G.J.FINDREPLACEMENT),"_blank")}})))}r("dx_DcuS");var q=k.a.forwardRef((function(e,n){var r=Object(x.useRef)(!1),o=Object(x.useState)(e.textValue),i=N()(o,2),a=i[0],c=i[1];return Object(x.useEffect)((function(){c(e.textValue)}),[e.textValue]),k.a.createElement("div",{className:"find-field",style:e.wrapperStyle},e.showLabel&&k.a.createElement("label",null,A.x.findLabel),k.a.createElement(I.Input,{ref:n,className:D()("field-input",B),width:"100%",value:a,placeholder:A.x.findInputPlaceholder,suffix:k.a.createElement(z,{count:e.count,index:e.index}),onChange:function(n){var o=n.target.value;c(o),r.current||e.onTextChange(o)},onKeyDown:function(n){var o=e.count,i=e.onFindPrev,a=e.onFindNext;if(!(o<=0||r.current)){var c="Enter"===n.key||13===n.keyCode;n.shiftKey&&c&&i?(i(),j.I.report(V.S.PREV)):c&&a&&(a(),j.I.report(V.S.NEXT))}},onCompositionStart:function(){r.current=!0},onCompositionEnd:function(){r.current=!1,U.S.isFF||e.onTextChange(a)}}),k.a.createElement(K,{canNotReplaceCount:e.canNotReplaceCount}))}));function X(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=_()(e);if(n){var i=_()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return y()(this,r)}}var Y=function(e){m()(r,e);var n=X(r);function r(){var e;f()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).inputRef=k.a.createRef(),e}return p()(r,[{key:"focusFindInput",value:function(){var e,n=null===(e=this.inputRef)||void 0===e?void 0:e.current;n&&(n.focus(),window.requestAnimationFrame((function(){n.setSelectionRange(0,n.value.length)})))}},{key:"render",value:function(){var e=this.props;return k.a.createElement(I.Space,{style:{width:"100%"},direction:"vertical",size:0},k.a.createElement(q,{textValue:e.findText,count:e.count,index:e.index,onTextChange:e.onFindTextChange,onFindPrev:e.onFindPrev,onFindNext:e.onFindNext,ref:this.inputRef}),k.a.createElement(F,{count:e.count,replaceAble:e.replaceAble,replaceAllAble:e.replaceAllAble,onFindPrev:e.onFindPrev,onFindNext:e.onFindNext}))}}]),r}(k.a.Component),J=(r("dx_pP6z"),k.a.forwardRef((function(e,n){return k.a.createElement("div",{className:"replace-field",style:e.wrapperStyle},e.showLabel&&k.a.createElement("label",null,A.x.replaceLabel),k.a.createElement(I.Input,{ref:n,className:D()("field-input",B),width:"100%",placeholder:A.x.replaceInputPlaceholder,value:e.textValue,onChange:function(n){return e.onTextChange(n.target.value)}}))})));function Z(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=_()(e);if(n){var i=_()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return y()(this,r)}}var $=function(e){m()(r,e);var n=Z(r);function r(){var e;f()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).findInputRef=k.a.createRef(),e.replaceInputRef=k.a.createRef(),e}return p()(r,[{key:"focusFindInput",value:function(){this.focusInput(this.findInputRef)}},{key:"focusReplaceInput",value:function(){this.focusInput(this.replaceInputRef)}},{key:"focusInput",value:function(e){var n=null===e||void 0===e?void 0:e.current;n&&(n.focus(),window.requestAnimationFrame((function(){n.setSelectionRange(0,n.value.length)})))}},{key:"render",value:function(){var e=this.props;return k.a.createElement(I.Space,{style:{width:"100%"},direction:"vertical",size:0},k.a.createElement(q,{showLabel:!0,textValue:e.findText,count:e.count,index:e.index,canNotReplaceCount:e.canNotReplaceCount,ref:this.findInputRef,onTextChange:e.onFindTextChange,onFindPrev:e.onFindPrev,onFindNext:e.onFindNext}),k.a.createElement(J,{showLabel:!0,textValue:e.replaceText,onTextChange:e.onReplaceTextChange,ref:this.replaceInputRef}),k.a.createElement(F,{showReplace:!0,count:e.count,replaceAble:e.replaceAble,replaceAllAble:e.replaceAllAble,isReplacingAll:e.isReplacingAll,onFindPrev:e.onFindPrev,onFindNext:e.onFindNext,onReplace:e.onReplace,onReplaceAll:e.onReplaceAll}))}}]),r}(k.a.Component);r("dx_SD0n");function ee(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=_()(e);if(n){var i=_()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return y()(this,r)}}var te;!function(e){e.FIND="0",e.REPLACE="1"}(te||(te={}));var ne=function(e){m()(r,e);var n=ee(r);function r(e){var o;f()(this,r),(o=n.call(this,e)).findRef=k.a.createRef(),o.replaceRef=k.a.createRef(),o.currentTabKey=te.FIND,o.onTabClick=function(e){var n=e===te.FIND?"click_find_tab":"click_replace_tab";Object(j.K)(n)},o.onTabChange=function(e){o.currentTabKey=e},o.state={findText:e.findText,boxWidth:A.i};var i=e.isSelectFindTab,a=e.showReplaceTab;return o.currentTabKey=i||!a?te.FIND:te.REPLACE,o}return p()(r,[{key:"focusFindArea",value:function(){var e,n;this.currentTabKey===te.FIND?null===(e=this.findRef.current)||void 0===e||e.focusFindInput():null===(n=this.replaceRef.current)||void 0===n||n.focusFindInput()}},{key:"focusFindAreaOnlyWhenOnTabReplace",value:function(){var e;this.currentTabKey===te.REPLACE&&(null===(e=this.replaceRef.current)||void 0===e||e.focusFindInput())}},{key:"componentDidMount",value:function(){this.onMount()}},{key:"onMount",value:function(){this.getBoxWidth()}},{key:"getBoxWidth",value:function(){try{var e=document.querySelector("#".concat(A.X)),n=null===e||void 0===e?void 0:e.getBoundingClientRect().width;n&&n>0&&this.setState({boxWidth:n+50})}catch(r){console.error("find box get box width failed.",r)}}},{key:"render",value:function(){var e=this.props,n=e.findText,r=e.replaceText,o=e.replaceAble,i=e.replaceAllAble,a=e.canNotReplaceCount,c=e.count,s=e.index,l=e.showReplaceTab,u=e.isSelectFindTab,d=e.isReplacingAll,f=e.onFindTextChange,h=e.onFindPrev,p=e.onFindNext,v=e.onReplaceTextChange,m=e.onReplace,g=e.onReplaceAll,y=e.onClose,b=e.activateSelection,_=e.deactivateSelection,x=u||!l?te.FIND:te.REPLACE;return k.a.createElement(k.a.Fragment,null,k.a.createElement(L,{activateSelection:b,deactivateSelection:_},k.a.createElement(I.Dialog.Content,{className:D()("find-replace-box-wrapper"),style:{width:this.state.boxWidth},header:null,footer:null,onCancel:y},k.a.createElement(I.Tabs,{size:"large",defaultActiveKey:x,onTabClick:this.onTabClick,onChange:this.onTabChange,className:"find-replace-tab"},k.a.createElement(I.Tabs.TabPane,{tab:A.x.findTab},k.a.createElement(Y,{findText:n,count:c,index:s,replaceAble:o,replaceAllAble:i,onFindTextChange:f,onFindPrev:h,onFindNext:p,ref:this.findRef})),l&&k.a.createElement(I.Tabs.TabPane,{tab:A.x.replaceTab},k.a.createElement($,{findText:n,replaceText:r,count:c,index:s,replaceAble:o,replaceAllAble:i,canNotReplaceCount:a,isReplacingAll:d,onReplaceTextChange:v,onFindPrev:h,onFindNext:p,onFindTextChange:f,onReplace:m,onReplaceAll:g,ref:this.replaceRef}))))),k.a.createElement(W,null))}}]),r}(x.Component),re=r("dx_yDa2");function oe(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=_()(e);if(n){var i=_()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return y()(this,r)}}var ie=function(e){m()(r,e);var n=oe(r);function r(){var e;f()(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).findReplaceModule=void 0,e.blockSelection=void 0,e.isFinding=!1,e.isReplacing=!1,e.afterSetIsReplacingAllAnimationFrame=new w.P,e.boxRef=k.a.createRef(),e.preSelectedMatchId=void 0,e.state={selectedIndex:0,isReplacingAll:!1,findText:"",replaceText:"",matches:[],count:0,replaceAble:!1,replaceAllAble:!1,canNotReplaceCount:0},e.handleKeyDown=function(n){if(e.props.isOpen){if(27===n.keyCode)return e.onClose(),void j.I.report(V.S.ESC);var r;if(Object(S.u)(n)===O.F.onFind)e.setSelectionTextIfNeed(),null===(r=e.boxRef.current)||void 0===r||r.focusFindArea();else if(Object(S.u)(n)===O.F.onReplace){var o;null===(o=e.boxRef.current)||void 0===o||o.focusFindAreaOnlyWhenOnTabReplace()}}},e.onMatchesChange=function(n){e.setState({matches:n},(function(){e.updateSelectedIndex(),e.updateCounts(),e.updateAllReplaceAble()}))},e.onFindTextChange=function(n){e.findReplaceModule||e.initModule(),e.setState({findText:n}),e.triggerFind(n)},e.onReplaceTextChange=function(n){e.setState({replaceText:n})},e.onFindNext=function(){var n=e.state,r=n.matches,o=n.selectedIndex,i=o>=r.length-1?0:o+1;e.setSelectIndex(i,!0)},e.onFindPrev=function(){var n=e.state,r=n.matches,o=n.selectedIndex,i=0===o?r.length-1:o-1;e.setSelectIndex(i,!0)},e.onReplace=function(){e.props.editable&&!e.isReplacing&&(e.isReplacing=!0,e.findReplaceModule.replace(e.state.replaceText))},e.onReplaceAll=u()(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.props.editable){n.next=2;break}return n.abrupt("return");case 2:return e.isReplacing=!0,e.setState({isReplacingAll:!0}),n.next=6,e.afterSetIsReplacingAllAnimationFrame.request(!1,100);case 6:return n.next=8,Promise.all([e.findReplaceModule.replaceAll(e.state.replaceText),Object(E.E)(300)]);case 8:e.setState({isReplacingAll:!1});case 9:case"end":return n.stop()}}),n)}))),e.onClose=function(){e.props.closeFindReplaceBox(),e.findReplaceModule&&e.findReplaceModule.destroy(),e.findReplaceModule=null},e.deactivateSelection=function(){e.props.selectionAPI.deactivate()},e.activateSelection=function(){e.props.selectionAPI.activate()},e}return p()(r,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),j.I.setObjectBlockData(this.props.blockManager)}},{key:"componentDidUpdate",value:function(e){var n=e.isOpen,r=this.props.isOpen;!n&&r&&(!this.setSelectionTextIfNeed()&&this.state.findText&&this.onFindTextChange(this.state.findText),Object(j.X)())}},{key:"setSelectionTextIfNeed",value:function(){var e;if(!this.props.copyable)return!1;var n=null===(e=window.getSelection())||void 0===e?void 0:e.toString();if(null===n||void 0===n?void 0:n.trim()){var r=this.props.selectionAPI.getSelection()[0];return r&&r.type===C.j.TEXT&&r.selection&&(this.blockSelection=r),this.onFindTextChange(n),!0}return!1}},{key:"componentWillUnmount",value:function(){this.findReplaceModule&&this.findReplaceModule.destroy(),this.findReplaceModule=null,this.afterSetIsReplacingAllAnimationFrame.cancel(),document.removeEventListener("keydown",this.handleKeyDown)}},{key:"updateSelectedIndex",value:function(){var e=this.state,n=e.matches,r=e.selectedIndex;if(0===n.length)this.setSelectIndex(-1,!1);else if(this.isFinding){var o=this.blockSelection?this.findSelectionIndex(n):void 0;void 0!==o?this.setSelectIndex(o,!0):this.setSelectIndex(0,!0),this.blockSelection=null,this.isFinding=!1}else if(this.isReplacing){var i=Math.max(0,Math.min(r,n.length-1));this.setSelectIndex(i,!0)}else{var a=Math.max(0,Math.min(r,n.length-1));this.setSelectIndex(a,!1)}this.isReplacing=!1}},{key:"findSelectionIndex",value:function(e){var n,r=this;return e.find((function(e,o){if([V.V.TextBlock,V.V.TextEmbedBlock].indexOf(e.type)>-1){var i=r.blockSelection,a=i.selection,c=i.id,s=a,l=s.start,u=s.end,d=e,f=d.range;if(c===d.blockId&&f[0]===l&&f[1]===u)return n=o,!0}return!1})),n}},{key:"initModule",value:function(){var e=this.props,n=e.blockManager,r=e.eventEmitter,o=e.fold,i=e.viewport,a=e.rect,c=e.scrollContainer,s=e.commentModule;this.findReplaceModule=new re.O({blockManager:n,eventEmitter:r,fold:o,viewport:i,rect:a,scrollContainer:c,commentModule:s}),this.findReplaceModule.onMatchesChange(this.onMatchesChange)}},{key:"setSelectIndex",value:function(e,n){var r=this,o=this.state.matches[e];(null===o||void 0===o?void 0:o.matchId)!==this.preSelectedMatchId&&this.setState({selectedIndex:e,replaceAble:!!o&&o.isReplaceable},(function(){r.preSelectedMatchId=null===o||void 0===o?void 0:o.matchId})),o&&n&&this.findReplaceModule.highlightAt(e)}},{key:"triggerFind",value:function(e){this.isFinding=!0,this.findReplaceModule.find(e)}},{key:"updateCounts",value:function(){this.setState((function(e){return{count:e.matches.length||0}}))}},{key:"updateAllReplaceAble",value:function(){var e=this.state.matches,n=!!e.find((function(e){return e.isReplaceable})),r=e.reduce((function(e,n){return n.isReplaceable||e++,e}),0);this.setState({replaceAllAble:n,canNotReplaceCount:r})}},{key:"render",value:function(){var e=this.props,n=e.isSelectFindTab,r=e.isOpen,o=e.editable;if(!r)return null;var i=this.state,a=i.findText,c=i.replaceText,s=i.selectedIndex,l=i.count,u=i.replaceAble,d=i.replaceAllAble,f=i.canNotReplaceCount,h=i.isReplacingAll;return k.a.createElement(ne,{isSelectFindTab:n,index:s,count:l,findText:a,showReplaceTab:o,replaceAble:u,replaceAllAble:d,canNotReplaceCount:f,isReplacingAll:h,ref:this.boxRef,onFindTextChange:this.onFindTextChange,replaceText:c,onReplaceTextChange:this.onReplaceTextChange,onFindNext:this.onFindNext,onFindPrev:this.onFindPrev,onReplace:this.onReplace,onReplaceAll:this.onReplaceAll,onClose:this.onClose,activateSelection:this.activateSelection,deactivateSelection:this.deactivateSelection})}}]),r}(x.Component),ae={closeFindReplaceBox:o.closeFindReplaceBox};n.default=Object(i.connect)((function(e){return{isOpen:Object(o.selectIsOpenFindReplaceBox)(e)&&!Object(a.m)(e),isSelectFindTab:Object(o.selectIsShowFindTab)(e)}}),ae)(ie)},dx_mRW1:function(e,n,r){"use strict";r("dx_QU2i");var o=r("dx_d1El"),i=r.n(o),a=r("dx_cDcd"),c=r.n(a),s=function(e){return"button"===e.type?c.a.createElement(i.a,{title:e.title,overlayClassName:"image-viewer-tooltip",arrowPointAtCenter:!0,key:e.key},c.a.createElement("li",{className:"btn-item"},c.a.createElement("button",{onClick:e.onClick,disabled:e.disabled},e.icon))):"node"===e.type?c.a.createElement(a.Fragment,{key:e.key},e.content):c.a.createElement("li",{key:e.key,className:"divider"})};n.S=function(e){var n=e.items,r=e.onClick;return c.a.createElement("ul",{className:"toolbox-list","data-cursor-hide":"hide",onClick:r},n.map(s))}},dx_mnwB:function(e,n,r){},dx_n007:function(e,n,r){"use strict";r.d(n,"Q",(function(){return i}));var o=r("dx_B28d"),i=function(e,n,r){var i;i=e.type===o.B.ORDERED||e.type===o.B.BULLET?n.closest(".list"):e.type===o.B.TODO?n.closest(".todo-block"):e.type.startsWith("heading")?n.closest(".heading"):e.type===o.B.TEXT?n.closest(".text-block"):n,"add"===r?i.classList.add("translated-hover"):i.classList.remove("translated-hover")}},dx_n1na:function(e,n,r){"use strict";(function(t){r.d(n,"l",(function(){return x}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_PcQO"),p=r("dx_cDcd"),v=r.n(p),m=r("dx_yzqx"),g=r("dx_ZpFx"),y=r("dx_k9ku"),b=r("dx_w7Au");function _(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var x=function(e){s()(r,e);var n=_(r);function r(){var e;o()(this,r);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={isOpen:!1,isFoldMinorHistory:e.props.majorHistory.minor_history.length>5},e.onIconClick=function(){e.handleIconClick(!0)},e.handleIconClick=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!e.state.isOpen;e.setState({isOpen:r}),Object(y.r)("ccm_docs_history_page_click",{click:"click_minor_version",target:"none",sub_click:r?"unfold":"fold"}),e.getIsSelectedSelf()&&(r&&n?e.props.onClickItem(e.props.majorHistory.minor_history[0]):e.props.onClickItem(e.props.majorHistory),Object(y.r)("ccm_docs_history_page_click",{click:"click_minor_version",target:"none",sub_click:r?"unfold":"fold"}))},e.showMoreMinorHistory=function(){e.setState({isFoldMinorHistory:!1}),Object(y.r)("ccm_docs_history_page_click",{click:"click_more_detail_version",target:"none"})},e}return a()(r,[{key:"hasMultipleMinorHistories",value:function(){return this.props.majorHistory.minor_history.length>1}},{key:"getIsSelectedMajorHistory",value:function(){return!!this.props.selectedHistoryItem.minor_history}},{key:"getIsSelectedSelf",value:function(){var e=this.props,n=e.selectedHistoryItem,r=e.majorHistory;return!!n&&(this.getIsSelectedMajorHistory()?n===r:r.minor_history.indexOf(n)>-1)}},{key:"renderOpenIcon",value:function(){if(this.props.majorHistory.minor_history.length<=1)return null;var e=this.state.isOpen;return v.a.createElement(h.Tooltip,{title:t(e?"history.time_line.unfold":"history.time_line.fold"),placement:"top",disabled:m.S.isMobile},v.a.createElement("div",{className:"history-timeline-open-icon",onClick:this.onIconClick},v.a.createElement(g.S,{className:e?"pulldown-icon open":"pulldown-icon"})))}},{key:"renderHistoryList",value:function(){var e=this,n=this.state,r=n.isOpen,o=n.isFoldMinorHistory,i=this.props,a=i.majorHistory,c=i.selectedHistoryItem,s=i.isCurrent,l=i.hideSelectedStyle;if(r){var u=o?5:a.minor_history.length;return a.minor_history.slice(0,u).map((function(n,r){var o={selected:!l&&n===c,historyItem:n,hasPadding:r>0,isCurrent:s&&0===r};return e.renderHistoryItem(o)}))}var d={selected:!l&&this.props.selectedHistoryItem===a,historyItem:a,isCurrent:this.props.isCurrent};return this.renderHistoryItem(d)}},{key:"renderHistoryItem",value:function(e){var n=this;return v.a.createElement(b.t,Object.assign({key:e.historyItem.version},e,{onClick:function(){return n.props.onClickItem(e.historyItem)}}))}},{key:"renderFoldButton",value:function(){return this.state.isFoldMinorHistory&&this.state.isOpen?v.a.createElement("div",{className:"minor-history-fold-button",onClick:this.showMoreMinorHistory},v.a.createElement("span",null,t("history.time_line.show_more_history"))):null}},{key:"render",value:function(){return v.a.createElement("div",{className:"history-timeline-majorHistory-item-container"},this.renderOpenIcon(),this.renderHistoryList(),this.renderFoldButton())}}]),r}(v.a.Component)}).call(this,r("dx_E9Eu"))},dx_oCpo:function(e,n,r){"use strict";r.d(n,"N",(function(){return s})),r.d(n,"b",(function(){return l})),r.d(n,"u",(function(){return u})),r.d(n,"l",(function(){return d})),r.d(n,"A",(function(){return f})),r.d(n,"L",(function(){return h})),r.d(n,"w",(function(){return i}));var o,i,a=r("dx_O1Ou"),c=r("dx_J5JQ"),s=[c.I.Image,c.I.Diagram],l=.1,u=5,d=a.a.DocxImage,f=20,h=500;!function(e){e.Web="web",e.Mobile="mobile",e.Lark="lark",e.VC="vc",e.Opendoc="opendoc"}(o||(o={})),function(e){e.VC="vc",e.Unmount="unmount",e.Viewer="viewer"}(i||(i={}))},dx_oOXr:function(e,n,r){"use strict";r.r(n);var o=r("dx_hjqN");n.default=o.S},dx_oQzG:function(e,n,r){"use strict";r.d(n,"S",(function(){return b}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_NWnn"),v=r("dx_xs2W"),m=r("dx_HsgL");function g(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){if(e=Object(v.z)(e,!1),!o&&Object(v.y)(n,e))return;Object(m.n)(e,"_blank")}}function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var b=function(e){l()(r,e);var n=y(r);function r(){var e;i()(this,r);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).pluginName="open-link",e}return c()(r,[{key:"replyLinkDidClick",value:function(e,n){n.preventDefault(),g(e.url,n,!1)}},{key:"suiteBlockDidClick",value:function(e,n){n.preventDefault(),g(e.href,n,!1)}}]),r}(p.CommentViewPlugin)},dx_pP0Y:function(e,n,r){"use strict";var o=r("dx_J4zp"),i=r.n(o),a=r("dx_PcQO"),c=r("dx_w01z"),s=r("dx_W28e"),l=r("dx_M0b4"),u=r("dx_wy2R"),d=r.n(u),f=r("dx_cDcd"),h=r.n(f),p=r("dx_JFWd"),v=(r("dx_mnwB"),{"zh-cn":l.S,"en-us":c.S,"ja-jp":s.S});"zh-cn"===d.a.locale()&&d.a.locale("zh-cn",{week:{dow:0}});n.S=function(e){var n=e.value,r=e.lang,o=e.onChange,c=Object(f.useState)(d()(n)),s=i()(c,2),l=s[0],u=s[1],m=Object(f.useState)("date"),g=i()(m,2),y=g[0],b=g[1],_=Object(f.useCallback)((function(e){b(e)}),[]),x=Object(f.useCallback)((function(){}),[]),k=Object(f.useCallback)((function(e){o(e)}),[o]);Object(f.useEffect)((function(){u(d()(n))}),[n]);var E="date-picker_".concat(Object(p.n)(n)),O=v[r];return h.a.createElement(a.ConfigProvider,{locale:O},h.a.createElement(a.DatePickerContextProvider,{value:{mode:y,setMode:_,value:l,setValue:x,showToday:!0,setOpened:function(){return!0}}},h.a.createElement(a.DatePickerPanel,{value:l,onSelect:k,mode:"date",footer:!1,className:E})))}},dx_pP6z:function(e,n,r){},dx_pYMQ:function(e,n,r){},dx_pbns:function(e,n,r){},dx_pudZ:function(e,n,r){"use strict";r.r(n),r.d(n,"CATALOG_VIEW_BLOCK_MIN_WIDTH",(function(){return S}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_UtDZ"),v=r("dx_cDcd"),m=r.n(v),g=r("dx_h74D"),y=r("dx_u70u");r("dx_eup5");function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var _=Object(p.getWikiCatalogFunctions)(),x=_.DataClient,k=_.DataClientProvider,E=_.ModuleLoader,O=_.catalogNodeListModule,S=320,C=function(e){l()(r,e);var n=b(r);function r(e){var o;i()(this,r),(o=n.call(this,e)).dataClient=void 0,o.withDataSDKWrapper=function(e){return m.a.createElement(k,{client:o.dataClient},m.a.createElement(E,{modules:[O]},e))};var a=Object(p.getWikiCatalogFunctions)().customRequest;return o.dataClient=new x({id:"wiki-catalog-block",requestClient:a()}),o}return c()(r,[{key:"renderContent",value:function(){var e=this.props,n=e.editable,r=e.blockId,o=e.wikiToken,i=e.isSelected,a=e.onDataUpdate,c=e.onClickNoContentBtn,s=e.onStatusChange;return m.a.createElement(y.w,{wikiToken:o,blockId:r,editable:n,isSelected:i,treeNodeData:this.treeNodeData,onDataUpdate:a,onClickNoContentBtn:c,onStatusChange:s})}},{key:"render",value:function(){return this.withDataSDKWrapper(m.a.createElement("div",null,this.renderContent()))}},{key:"treeNodeData",get:function(){var e=this.props,n=e.childMap,r=e.nodeMap,o=n[e.wikiToken];if(o){var i=[];for(var a in o){if(!r[a])return;i.push(r[a])}return i}}}]),r}(v.PureComponent);n.default=Object(g.connect)((function(e){var n=Object(p.getWikiCatalogFunctions)(),r=n.selectTreeChildMap,o=n.selectNodeMapNew;return{childMap:r(e),nodeMap:o(e)}}))(C)},dx_qBlk:function(e,n,r){},dx_qHLA:function(e,n,r){"use strict";r.r(n),function(t){r.d(n,"IPanelType",(function(){return e}));var e,o=r("dx_o0o1"),i=r.n(o),a=r("dx_lSNA"),c=r.n(a),s=r("dx_QILm"),l=r.n(s),u=r("dx_yXPU"),d=r.n(u),f=r("dx_J4zp"),h=r.n(f),p=r("dx_TSYQ"),v=r.n(p),m=r("dx_UtDZ"),g=r("dx_h6a8"),y=r("dx_cDcd"),b=r.n(y),_=r("dx_h74D"),x=r("dx_w3w7"),k=r("dx_bUYd"),E=r("dx_l6la"),O=r("dx_E2oU"),S=r("dx_jBAU"),C=r("dx_CZKf"),w=r("dx_g0R0"),I=r("dx_Je9X"),T=r("dx_D8nn"),D=r("dx_Dq30"),A=r("dx_H5sz"),j=r("dx_P5qk");r("dx_Remz");function R(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?R(Object(r),!0).forEach((function(n){c()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}!function(e){e.storehouse="storehouse",e.upload="upload"}(e||(e={}));n.default=function(n){var r=Object(_.useSelector)(O.M),o=Object(y.useState)(e.storehouse),a=h()(o,2),c=a[0],s=a[1],u=Object(y.useState)(!1),f=h()(u,2),p=f[0],R=f[1],P=Object(_.useSelector)(O.A),M=Object(y.useRef)(null),B=Object(y.useState)(520),L=h()(B,2),F=L[0],H=L[1],W=n.popoverActived,U=n.cRef,V=n.uiShow,z=void 0===V||V,Q=n.trigger,G=Object(y.useCallback)(d()(i.a.mark((function e(){var n,r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,P&&P.length){e.next=14;break}return R(!0),e.next=5,S.S.fetchCoverList(Object(m.getToken)());case 5:return n=e.sent,r=n.data,o=r.cover_series,a=(o||[]).map((function(e){var n=e.candidate_covers,r=e.series,o=r.series_id;return{covers:n,series:N(N({},l()(r,["series_id"])),{},{seriesId:o})}})),m.store.dispatch(Object(E.k)(a)),R(!1),e.abrupt("return",a);case 14:return e.abrupt("return",P);case 15:e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(0),R(!1),M.current=null,!(e.t0 instanceof Error)){e.next=23;break}throw e.t0;case 23:throw new Error("fetch cover error");case 24:case"end":return e.stop()}}),e,null,[[0,17]])}))),[P]);Object(y.useEffect)((function(){W&&(M.current=M.current||G())}),[W,G]);var K=Object(y.useCallback)((function(){if(Q&&z){var e=Q.getBoundingClientRect().bottom,n=window.innerHeight-e-D.Y-D.b;n>D.Z&&(n=D.Z),n<D.C&&(n=D.C),n!==F&&H(n)}}),[Q,z,F]);Object(y.useEffect)((function(){K()}),[]),Object(y.useEffect)((function(){var e=Object(g.throttle)(K,500,{trailing:!0});return Q&&window.addEventListener("resize",e),function(){Q&&window.removeEventListener("resize",e)}}),[Q,K]);var q=function(e){var n=e.coverId,r=e.token,o=e.contentType,i=e.coverSource,a=e.series;T.S.trigger(I.F.SET_COVER_DATA,[{coverId:n,type:C.i.Preset,token:r,contentType:o,coverSource:i,series:a}])},X=function(){var e=d()(i.a.mark((function e(){var n,r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M.current=M.current||G(),e.next=4,M.current;case 4:if(n=e.sent,r=Math.floor(Math.random()*n.length),o=n[r]){e.next=9;break}return e.abrupt("return");case 9:a=o.covers[Math.floor(Math.random()*o.covers.length)],q({coverId:a.coverId,token:a.token,contentType:a.mime_type,series:o.series.seriesId,coverSource:"random"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),Object(k.h)({type:"error",key:"cover_error_tips",content:b.a.createElement("div",{style:{whiteSpace:"nowrap"}},t("CreationDoc_Docs_DocCover_FailedToModify_Toast")),duration:3e3,errorContext:Object(w.G)(e.t0,new Error("handleRandom failed!"))});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){T.S.trigger(I.F.SET_COVER_DATA,[{type:C.i.NONE}]),n.onHide()};Object(y.useImperativeHandle)(U,(function(){return{randomCover:function(){X()}}}));var J=function(){return b.a.createElement("div",{className:"cover-setting-panel-header"},b.a.createElement("div",{className:"cover-setting-panel-header-left"},b.a.createElement("div",{className:"cover-panel-storehouse-item",onClick:function(){return s(e.storehouse)}},t("CreationDoc_Docs_DocCover_OfficialGallery_Tab")),b.a.createElement("div",{className:"cover-panel-upload-item",onClick:function(){return s(e.upload)}},t("CreationDoc_Docs_DocCover_LocalUpload_Tab"))),b.a.createElement("div",{className:"cover-setting-panel-header-right"},!!P.length&&b.a.createElement("div",{className:"cover-setting-panel-header-random",onClick:X},b.a.createElement(x.S,null),t("CreationDoc_Docs_DocCover_Random_Tab")),r&&!!P.length&&b.a.createElement("span",{className:"cover-setting-panel-header-split"}),r&&b.a.createElement("div",{className:"cover-setting-panel-header-remove",onClick:Y},t("CreationDoc_Docs_DocCover_Remove_Tab"))))},Z=v()("cover-setting-panel-wrapper",{"cover-storehouse-panel":c===e.storehouse,"cover-upload-panel":c===e.upload});return z?b.a.createElement("div",{className:Z,style:{height:F}},b.a.createElement(J,null),b.a.createElement(A.S,{onChoose:q,loading:p,coverList:P,maxPanelHeight:F}),b.a.createElement(j.S,null)):null}}.call(this,r("dx_E9Eu"))},dx_qnsi:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return _}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_W7W2"),l=r.n(s),u=r("dx_a1gu"),d=r.n(u),f=r("dx_Nsbk"),h=r.n(f),p=r("dx_cDcd"),v=r.n(p),m=r("dx_faye"),g=r.n(m),y=r("dx_s3sk");function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=h()(e);if(n){var i=h()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return d()(this,r)}}var _=function(e){l()(r,e);var n=b(r);function r(){var e;i()(this,r);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).mountedNode=document.createElement("div"),e}return c()(r,[{key:"componentWillMount",value:function(){document.body.appendChild(this.mountedNode)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.mountedNode)}},{key:"render",value:function(){return g.a.createPortal(v.a.createElement(y.S,this.props),this.mountedNode)}}]),r}(p.Component)},dx_rORI:function(e,n,r){"use strict";var o=r("dx_o0o1"),i=r.n(o),a=r("dx_yXPU"),c=r.n(a),s=r("dx_J4zp"),l=r.n(s),u=r("dx_UtDZ"),d=r("dx_cDcd"),f=r.n(d),h=r("dx_DgOD"),p=r("dx_j2jX");n.S=function(e){var n=Object(d.useState)(!1),r=l()(n,2),o=r[0],a=r[1],s=Object(d.useState)(!1),v=l()(s,2),m=v[0],g=v[1],y=u.store.getState().appState.userPreference.toJS(),b=e.visible,_=e.onCancel,x=function(){var e;return u.store.dispatch(null===(e=u.actions.userPreference)||void 0===e?void 0:e.updateUserPreference({dont_ask_before_uploading_log:1}))},k=Object(d.useCallback)(function(){var e=c()(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),n&&x(),r=Object(h.S)(),e.next=5,Object(u.uploadLogWithoutContact)(r);case 5:_(),g(!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[g,_]),E=Object(d.useMemo)((function(){return!y||!y.dontAskBeforeUpload}),[y]),O=Object(d.useMemo)((function(){return!!(o&&b&&E)}),[o,b,E]);return Object(d.useEffect)((function(){(function(){var e;return u.store.dispatch(null===(e=u.actions.userPreference)||void 0===e?void 0:e.fetchUserPreference())})().then((function(){a(!0)}))}),[a]),Object(d.useEffect)((function(){!b||E||m||(_(),k(!1))}),[b,m,E,_,k]),f.a.createElement(p.S,{visible:O,onCancel:_,uploading:m,onConfirm:k})}},dx_rzlF:function(e,n,r){},dx_s3sk:function(e,n,r){"use strict";(function(t){r.d(n,"S",(function(){return Y}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lwsE"),s=r.n(c),l=r("dx_W8MJ"),u=r.n(l),d=r("dx_iWIM"),f=r.n(d),h=r("dx_W7W2"),p=r.n(h),v=r("dx_a1gu"),m=r.n(v),g=r("dx_Nsbk"),y=r.n(g),b=r("dx_h6a8"),_=r("dx_cDcd"),x=r.n(_),k=r("dx_U1E0"),E=r("dx_hdH6"),O=r("dx_Q8Q5"),S=r("dx_Z5ZW"),C=r("dx_Zgrh"),w=r("dx_V7HH"),I=r("dx_ySTm"),T=r("dx_RDfN"),D=r("dx_jeRx"),A=r("dx_IFC7"),j=r("dx_yzqx"),R=r("dx_k64k"),N=r("dx_dOu9"),P=r("dx_A5O8"),M=r("dx_zghO"),B=r("dx_D8nn"),L=r("dx_qx8A"),F=r.n(L),H=r("dx_oCpo"),W=r("dx_jAXy"),U=r("dx_mRW1"),V=r("dx_J5JQ"),z=r("dx_vuJs"),Q=r("dx_u13u"),G=r("dx_eFoE"),K=r("dx_v9xx");r("dx_agmI");function q(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=y()(e);if(n){var i=y()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return m()(this,r)}}var X=function(e){e.nativeEvent.stopImmediatePropagation(),e.stopPropagation()},Y=function(e){p()(r,e);var n=q(r);function r(e){var i;return s()(this,r),(i=n.call(this,e)).closeCallback=void 0,i.viewerInstance=void 0,i.viewerRef=void 0,i.lastTransformId=void 0,i.calcImageScale=function(){var e=i.state,n=e.currentShowIndex,r=e.imageList,o=e.imageScale;if(r[n]){var a=r[n];if(a.type===V.I.Image){var c=Object(G.e)(),s=Object(z.v)(a,c);s<H.b&&(s=H.b),i.setState({imageScale:Math.min(o,s)})}}},i.sendVcTransformStateThrottle=Object(b.debounce)((function(){var e,n=i.state,r=n.currentShowIndex,o=n.imageList;if(o[r]){var a=o[r].recordId;i.sendVcTransformState(a,(null===(e=i.viewerInstance)||void 0===e?void 0:e.getTransformInfo())||Q.v)}}),80),i.getOuterViewerImageParams=function(){var e=a()(o.a.mark((function e(n){var r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={url:"",key:n.recordId},n.type!==V.I.Diagram){e.next=8;break}return e.next=4,n.src();case 4:(i=e.sent)&&(r.blob=Object(z.B)(i)),e.next=15;break;case 8:if(n.type!==V.I.Image){e.next=15;break}if(r.url=n.originSrc,!P.S.isNeedBlob){e.next=15;break}return e.next=13,Object(A.K)(r.url);case 13:(a=e.sent)&&(r.blob=a);case 15:return e.abrupt("return",{images:[r],index:0});case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i.openOuterViewer=function(){var e=a()(o.a.mark((function e(n,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getOuterViewerImageParams(n[r]);case 2:a=e.sent,P.S.previewInOpendoc(a);case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),i.openViewer=function(){var e=a()(o.a.mark((function e(n,r){var a,c,s,l,u,d,f,h,p,v,m=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.length>2&&void 0!==m[2]?m[2]:0,c=n.type,s=n.selectionAPI,l=n.blockManager,u=n.record,d=n.id,0===a&&i.clearOpenImageRetryTimer(),"pending"!==c&&"blank"!==c||!(a<H.A)){e.next=8;break}return e.next=6,l.layoutManager.renderNodeById([d]);case 6:return i.openImageRetryTimer=setTimeout((function(){i.openImageRetryTimer=void 0,i.openViewer(l.getBlockViewByBlockId(d),r,a+1)}),H.L),e.abrupt("return");case 8:if(f=l.editorAPI.getService(N.Y),h=Object(z.j)(l,f),(p=h.findIndex((function(e){return e.recordId===u.id})))<0&&Object(z.N)(u)&&(v=Object(z.E)(l,f)(l.getBlockModelByBlockId(d)))&&(h.push(v),p=h.length-1),!P.S.isOuterViewer()){e.next=15;break}return i.openOuterViewer(h,p),e.abrupt("return");case 15:p>-1?(s.removeAllSelection(),i.closeCallback=function(){!i.isFollowing&&l.hasBlockViewByBlockId(d)&&s.setSelection([{id:d,type:M.j.BLOCK}])},i.setState({imageList:h,currentShowIndex:p>-1?p:-1,visible:!0},(function(){i.viewerInstance&&P.S.showOpendocMask(i.viewerInstance)}))):i.state.visible&&i.setState({currentShowIndex:-1,visible:!1}),null===r||void 0===r||r(p>-1);case 17:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),i.switchImage=function(e){var n=i.state.imageList.findIndex((function(n){return n.recordId===e}));return n>-1&&(i.setState({currentShowIndex:n}),!0)},i.closeViewer=function(e,n){var r,o=i.state,a=o.imageList,c=o.currentShowIndex;e!==H.w.Viewer&&(null===(r=i.viewerInstance)||void 0===r||r.hide());i.setState({visible:!1,currentShowIndex:-1},(function(){return null===n||void 0===n?void 0:n()}));var s=a[c];i.sendVcTransformStateThrottle.cancel(),i.sendVcPreviewState(s?s.recordId:"",!1),i.sendVcTransformState("",Q.v),B.S.emit(B.p.COMMON.CLOSED_IMAGE_VIEWER),P.S.hideOpendocMask()},i.updateImageTransform=function(e){var n,r,o,a=e.scale;return void 0!==a&&a!==i.state.imageScale&&i.setState({imageScale:a}),null===(n=i.viewerInstance)||void 0===n||n.setTransformInfo(e),null===(r=i.viewerInstance)||void 0===r||r.updateStyle(),(null===(o=i.viewerInstance)||void 0===o?void 0:o.getTransformInfo())||e},i.getViewerVisible=function(){return i.state.visible&&!!i.viewerInstance},i.getCurrentImage=function(){var e=i.state;return e.imageList[e.currentShowIndex]},i.checkViewerImageLoadComplete=function(){return!(!i.viewerInstance||i.viewerInstance.imageStatus.isLoading)},i.getCurrTransformInfo=function(){var e;return null===(e=i.viewerInstance)||void 0===e?void 0:e.getTransformInfo()},i.nextShowIndex=function(){var e;null===(e=i.viewerInstance)||void 0===e||e.next()},i.prevShowIndex=function(){var e;null===(e=i.viewerInstance)||void 0===e||e.prev()},i.triggerZoom=function(e){return function(){var n;null===(n=i.viewerInstance)||void 0===n||n.zoom(void 0,e)}},i.triggerDownload=function(){var e;null===(e=i.viewerInstance)||void 0===e||e.downloadCurrentImage()},i.triggerRotate=function(){var e;null===(e=i.viewerInstance)||void 0===e||e.addRotate()},i.toggleOriginalSize=function(){var e;null===(e=i.viewerInstance)||void 0===e||e.toggle()},i.setViewerRef=function(e){i.viewerRef=e},i.state={visible:!1,imageList:[],currentShowIndex:-1,imageScale:1,isOriginalSize:!1},i}return u()(r,[{key:"componentDidMount",value:function(){f()(y()(r.prototype),"componentDidMount",this).call(this),window.addEventListener("resize",this.calcImageScale),B.S.on(B.p.COMMON.OPEN_IMAGE_VIEWER,this.openViewer)}},{key:"componentDidUpdate",value:function(e,n){f()(y()(r.prototype),"componentDidUpdate",this).call(this,e,n);var o=this.state,i=o.visible,a=o.imageList,c=o.currentShowIndex;if(!n.visible&&i&&this.viewerRef&&!this.viewerInstance)this.initViewer();else if(n.visible&&!i&&this.viewerInstance){var s,l,u=this.viewerInstance.container;u&&(null===(s=this.viewerRef)||void 0===s||s.removeChild(u)),this.viewerInstance=void 0,null===(l=this.closeCallback)||void 0===l||l.call(this)}if(a.length&&(n.imageList!==a||n.currentShowIndex!==c)){var d=a[c];if(d){var h;this.lastTransformId=void 0,null===(h=this.viewerInstance)||void 0===h||h.update(d);var p=n.imageList[n.currentShowIndex];p&&p.recordId!==d.recordId&&this.sendVcTransformStateThrottle.cancel(),this.sendVcPreviewState(d.recordId,!0)}}}},{key:"componentWillUnmount",value:function(){var e;f()(y()(r.prototype),"componentWillUnmount",this).call(this),window.removeEventListener("resize",this.calcImageScale),B.S.off(B.p.COMMON.OPEN_IMAGE_VIEWER,this.openViewer),null===(e=this.viewerInstance)||void 0===e||e.hide(),this.closeCallback=void 0,this.sendVcTransformStateThrottle.cancel()}},{key:"initViewer",value:function(){var e=this,n=this.state,r=n.currentShowIndex,o=n.imageList;if(this.viewerRef){var i=new K.V;this.viewerInstance=i,this.viewerInstance.updateParams({wrapperContainer:this.viewerRef,imageList:o,currentShowIndex:r,onShowIndexChange:function(n){e.setState({currentShowIndex:n})},onClose:function(){e.viewerInstance===i&&e.closeViewer(H.w.Viewer)},onOriginalSizeChange:function(n){e.setState({isOriginalSize:n})},onZoomChange:function(n,r){e.setState({imageScale:n}),e.handleTransformChange(r)},onOffsetChange:function(){e.handleTransformChange()},onRotateChange:function(){e.handleTransformChange()}}).init();var a=this.viewerRef.firstChild||null;this.viewerRef.insertBefore(this.viewerInstance.container,a)}}},{key:"handleTransformChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state,r=n.currentShowIndex,o=n.imageList;if(o[r]){var i=o[r].recordId;this.lastTransformId!==i||e?(this.lastTransformId=i,this.sendVcTransformState(i,{rotate:0})):this.sendVcTransformStateThrottle()}}},{key:"render",value:function(){return this.state.visible?x.a.createElement("div",{ref:this.setViewerRef,className:"image-viewer".concat(j.S.isInVC?" in-vc":"")},x.a.createElement("div",{className:"viewer-close-btn","data-cursor-hide":"hide"},x.a.createElement(E.S,null)),x.a.createElement("div",{className:"toolbox-container"},x.a.createElement(U.S,{items:this.toolList,onClick:X}))):null}},{key:"toolList",get:function(){var e=this.state,n=e.currentShowIndex,r=e.imageList,o=e.imageScale,i=e.isOriginalSize,a=[{key:"prev",title:t("image.prev"),onClick:this.prevShowIndex,disabled:0===n,icon:x.a.createElement(w.S,null),type:"button"},{key:"info",content:x.a.createElement("li",{className:"page-container"},n+1,"/",r.length),type:"node"},{key:"next",title:t("image.next"),onClick:this.nextShowIndex,disabled:n===r.length-1,icon:x.a.createElement(S.S,null),type:"button"},{key:"divider-1",type:"divider"},{key:"zoomOut",title:t("image.zoom-out"),onClick:this.triggerZoom(!1),disabled:o<=H.b,icon:x.a.createElement(D.S,null),type:"button"},{key:"scaleInfo",content:x.a.createElement("li",{className:"percent-container"},Math.round(100*o),"%"),type:"node"},{key:"zoomIn",title:t("image.zoom-in"),onClick:this.triggerZoom(!0),disabled:o>=H.u,icon:x.a.createElement(T.S,null),type:"button"},{key:"sizeChange",title:t(i?"image.reset":"image.one-to-one"),onClick:this.toggleOriginalSize,icon:i?x.a.createElement(k.S,null):x.a.createElement(C.S,null),type:"button"},{key:"divider-2",type:"divider"},{key:"rotate",title:t("viewer.toolbar.rotate"),onClick:this.triggerRotate,icon:x.a.createElement(I.S,null),type:"button"}];return Object(R.F)(F.a.getState())&&a.push({key:"download",title:t("CreationDoc_Sheets_Download"),onClick:this.triggerDownload,icon:x.a.createElement(O.S,null),type:"button"}),a}}]),r}(W.G)}).call(this,r("dx_E9Eu"))},dx_s5s6:function(e,n,r){},dx_swd6:function(e,n,r){"use strict";r.d(n,"v",(function(){return h}));var o=r("dx_o0o1"),i=r.n(o),a=r("dx_yXPU"),c=r.n(a),s=r("dx_lwsE"),l=r.n(s),u=r("dx_W8MJ"),d=r.n(u),f=r("dx_U5UJ"),h=function(){function e(n){var r=this;l()(this,e),this.props=n,this.iframe=void 0,this.isTimeout=!1,this.timeoutId=0,this.clearTimeout=function(){clearTimeout(r.timeoutId)},this.run=function(){r.handleBeforePrint().catch(r.handlePrintFail).finally(r.handleAfterPrint)},this.handleBeforePrint=c()(i.a.mark((function e(){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.timeoutId=window.setTimeout((function(){r.handlePrintFail(new Error("print timeout")),r.handleAfterPrint(),r.isTimeout=!0}),f.w),e.next=3,null===(n=(o=r.props).onBeforePrint)||void 0===n?void 0:n.call(o);case 3:r.print();case 4:case"end":return e.stop()}}),e)}))),this.handlePrintFail=function(e){var n,o;r.isTimeout||null===(n=(o=r.props).onPrintFail)||void 0===n||n.call(o,e)},this.handleAfterPrint=function(){var e,n;r.clearTimeout(),null===(e=(n=r.props).onAfterPrint)||void 0===e||e.call(n)};var o=n.iframe;this.iframe=o,this.setDocType(o)}return d()(e,[{key:"print",value:function(){var e=this;setTimeout(c()(i.a.mark((function n(){var r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isTimeout){n.next=2;break}return n.abrupt("return");case 2:return e.clearTimeout(),n.next=5,null===(r=(o=e.props).onWillPrint)||void 0===r?void 0:r.call(o);case 5:e.execPrint();case 6:case"end":return n.stop()}}),n)}))),1e3)}},{key:"execPrint",value:function(){var e=this.iframe;e.contentDocument&&e.contentWindow&&(e.classList.contains("MSIE")?(window.frames.printIframe.focus(),e.contentDocument.querySelector("head").innerHTML+="<script>window.print();<\/script>"):document.queryCommandSupported("print")?e.contentWindow.document.execCommand("print",!1,null):(e.contentWindow.focus(),e.contentWindow.print()))}},{key:"setDocType",value:function(e){var n=e.contentWindow||e.contentDocument||e,r=n.document||n.contentDocument||n;r.open(),r.write(f.o),r.close()}}]),e}()},dx_t0Gy:function(e){e.exports=JSON.parse('{"code":0,"msg":"Success","data":{"block_map":{"doxcn0k86eIIWqSE26Ovuabd5hh":{"data":{"children":[],"comments":[],"hidden":false,"locked":false,"parent_id":"doxcngT9R0gh1r7QlSCv41ehyXe","token":"shtcnb3lw2sbic36u7emTMqhq7l_4ZRlJQ","type":"sheet"},"id":"doxcn0k86eIIWqSE26Ovuabd5hh","version":2},"doxcng6O2IAOWwiYGUD3gBIPn0f":{"data":{"align":"","children":[],"comments":[],"folded":false,"hidden":false,"locked":false,"parent_id":"doxcngT9R0gh1r7QlSCv41ehyXe","text":{"apool":{"nextNum":0,"numToAttrib":{}},"initialAttributedTexts":{"attribs":{"0":""},"text":{"0":""}}},"type":"text"},"id":"doxcng6O2IAOWwiYGUD3gBIPn0f","version":1},"doxcngT9R0gh1r7QlSCv41ehyXe":{"data":{"align":"","children":["doxcn0k86eIIWqSE26Ovuabd5hh","doxcng6O2IAOWwiYGUD3gBIPn0f"],"comments":null,"hidden":false,"locked":false,"parent_id":"","text":{"apool":{"nextNum":0,"numToAttrib":{}},"initialAttributedTexts":{"attribs":{"0":""},"text":{"0":""}}},"type":"page"},"id":"doxcngT9R0gh1r7QlSCv41ehyXe","version":3}},"cursor":"w7ZnwrU9AQlKw7JdbjVLOsKYAXgOUS3CiTLDlg_Clho8w4fCk2sdITzCk8Kuw5DDqFzDuMKjI1jDqAnDiVg7B1MQbcOnHG7DvgM4FTfDr8KzPSZzQ8OQEUEcw4I5wrjCuMO0WHQGwoPClXvChgvCnXvCi8OnBGYvw744HCLDln5WTQ","external_mention_url":{},"has_more":false,"id":"doxcngT9R0gh1r7QlSCv41ehyXe","mention_page_title":{},"meta_map":{"doxcngT9R0gh1r7QlSCv41ehyXe":{"create_time":"2021-06-16T17:34:35+08:00","creator_id":"6809803548256108546","edit_time":"2021-06-16T17:34:48+08:00","editor_id":"6809803548256108546","owner_id":"6809803548256108546","page_id":"doxcngT9R0gh1r7QlSCv41ehyXe","source":0,"status":0,"sub_type":0,"tenant_id":"1","title":"","update_time":"2021-06-16T17:34:48+08:00"}},"structure_version":4,"type":"CLIENT_VARS","user_map":{}}}')},dx_tNDb:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return W}));var o=r("dx_W7W2"),i=r.n(o),a=r("dx_a1gu"),c=r.n(a),s=r("dx_Nsbk"),l=r.n(s),u=r("dx_lwsE"),d=r.n(u),f=r("dx_W8MJ"),h=r.n(f),p=r("dx_UtDZ"),v=r("dx_RIqP"),m=r.n(v),g=r("dx_wy2R"),y=r("dx_F26F"),b=r("dx_p0ib"),_=r("dx_bne5"),x=r("dx_aGNc"),k=r("dx_Gi3i"),E=r("dx_Y67Y"),O=function(){function e(n){d()(this,e),this.selectionAPI=n,this.isActive$=new y.N(!0),this.isActiveSub=void 0}return h()(e,[{key:"isActive",value:function(){return this.isActive$.getValue()}},{key:"start",value:function(){var n=this;if(!this.isActiveSub){this.isActive$.next(!0);var r=e.activeEvents,o=e.ACTIVE_EXPIRATION_PERIOD,i=b.b.apply(void 0,m()(r.map((function(e){return Object(_.l)(window,e)})))).pipe(Object(x.j)(!0)),a=i.pipe(Object(k.i)(o),Object(x.j)(!1));this.isActiveSub=Object(b.b)(i,a).pipe(Object(E.D)((function(e){return e||n.editorHasFocus()}))).subscribe(this.isActive$)}}},{key:"stop",value:function(){this.isActiveSub&&(this.isActiveSub.unsubscribe(),this.isActiveSub=null)}},{key:"editorHasFocus",value:function(){return null!==window.getSelection()&&(document.hasFocus()&&this.selectionAPI.isFocus())}}]),e}();O.activeEvents=["mousemove","mousedown","scroll","mousewheel","DOMMouseScroll","touchstart","keydown","resize"],O.ACTIVE_EXPIRATION_PERIOD=Object(g.duration)(2,"minute").asMilliseconds();var S=r("dx_VnDw"),C=r("dx_LeqM"),w=p.limitEditModeDeps.sheetEdit$,I=p.limitEditModeDeps.mindnoteClick$,T=p.limitEditModeDeps.mindnoteEdit$,D=p.limitEditModeDeps.bitableFullScreenClick$,A=function(){function e(){d()(this,e),this.sub=null}return h()(e,[{key:"start",value:function(e,n){this.stop();var r=document.querySelector(".editor-container");if(!r)throw new Error("can not find root element when attempt eo edit detector");this.sub=n?Object(b.b)(Object(b.b)(Object(_.l)(r,"click"),I,D).pipe(Object(S.N)(n)),Object(b.b)(C.z,w,T).pipe(Object(S.N)((function(){return!n()})))).subscribe(e):Object(_.l)(r,"click").subscribe(e)}},{key:"stop",value:function(){this.sub&&(this.sub.unsubscribe(),this.sub=null)}}]),e}(),j=r("dx_qx8A"),R=r.n(j),N=function(){function e(){d()(this,e)}return h()(e,[{key:"on",value:function(){R.a.dispatch(Object(p.setEditMode)(!0))}},{key:"off",value:function(){R.a.dispatch(Object(p.setEditMode)(!1))}}]),e}(),P=function e(n,r){d()(this,e),this.hard=n,this.limitSource=r,this.soft=void 0,this.soft=Math.round(.8*n)};function M(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=l()(e);if(n){var i=l()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c()(this,r)}}var B=function(){function e(n){d()(this,e),this.entity={type:"DOCX",token:Object(p.getToken)()},this.collab=void 0,this.collab=n.recordManager.collabModule}return h()(e,[{key:"addHeartbeat",value:function(e){var n;null===(n=this.collab)||void 0===n||n.sync.io.addHeartbeat(this.entity,e,{})}},{key:"removeHeartbeat",value:function(e){var n;null===(n=this.collab)||void 0===n||n.sync.io.removeHeartbeat(this.entity,e)}},{key:"isOnline",value:function(){return Object(p.isOnline)()}},{key:"getMemberId",value:function(){var e;return(null===(e=this.collab)||void 0===e?void 0:e.getMemberId())||""}}]),e}(),L=function(e){i()(r,e);var n=M(r);function r(e){return d()(this,r),n.call(this,new B(e),r.REQUEST_TIMEOUT)}return r}(p.ILimitRequest);function F(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=l()(e);if(n){var i=l()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c()(this,r)}}L.REQUEST_TIMEOUT=Object(g.duration)(5,"seconds").asMilliseconds();var H=function(){function e(n,r){d()(this,e),this.blockManager=n,this.selectionAPI=r}return h()(e,[{key:"createLimiterRequest",value:function(){return new L(this.blockManager)}},{key:"createActivityDetector",value:function(){return new O(this.selectionAPI)}},{key:"createAttemptToEditDetector",value:function(){return new A}},{key:"createLimitCtor",value:function(){return P}}]),e}(),W=function(e){i()(r,e);var n=F(r);function r(e,o){var i;return d()(this,r),(i=n.call(this,new N,new H(e,o))).blockManager=e,i.selectionAPI=o,i}return r}(p.CommonController)},dx_tb2o:function(e,n,r){"use strict";var o;r.d(n,"Q",(function(){return o})),function(e){e.placeholder="placeholder",e.helpsiderbar="helpsiderbar",e.undo="undo",e.redo="redo",e.copy="copy",e.cut="cut",e.comment="comment",e.paste="paste",e.search="search",e.find="find",e.findreplace="findreplace",e.mention="mention",e.newdoc="newdoc",e.newsheet="newsheet",e.bold="bold",e.italic="italic",e.underline="underline",e.url="url",e.strikethrough="strikethrough",e.color="color",e.code="code",e.heading1="heading1",e.heading2="heading2",e.heading3="heading3",e.text="text",e.tab="tab",e.untab="untab",e.alignleft="alignleft",e.alignright="alignright",e.aligncenter="aligncenter",e.codeblock="codeblock",e.tasklist="tasklist",e.divider="divider",e.selectblock="selectblock",e.extendselectrow="extendselectrow",e.extendselectbyte="extendselectbyte",e.blockup="blockup",e.blockdown="blockdown",e.quote="quote",e.selectall="selectall",e.bulleted="bulleted",e.numbered="numbered",e.mdheading1="mdheading1",e.mdheading2="mdheading2",e.mdheading3="mdheading3",e.mdorderlist="mdorderlist",e.mdunorderlist="mdunorderlist",e.mdtasklist="mdtasklist",e.mdtab="mdtab",e.mduntab="mduntab",e.mdquote="mdquote",e.mdcode="mdcode",e.mdcodeblock="mdcodeblock",e.mdbold="mdbold",e.mditalic="mditalic",e.mdunderline="mdunderline",e.mdstrikethrough="mdstrikethrough",e.mdequation="mdequation",e.mddivider="mddivider"}(o||(o={}))},dx_ts31:function(e,n,r){"use strict";(function(t){r.d(n,"s",(function(){return I}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_Iv4g"),s=r("dx_aSlK"),l=r("dx_sciK"),u=r("dx_d5dF"),d=r("dx_adgV"),f=r("dx_jRv5"),h=r("dx_PcQO"),p=r("dx_TSYQ"),v=r.n(p),m=r("dx_UtDZ"),g=r("dx_h6a8"),y=r("dx_cDcd"),b=r.n(y),_=r("dx_yzqx"),x=r("dx_cuqV"),k=r("dx_JnYQ"),E=r("dx_VHoe"),O=Object(m.getWikiRecentFunctions)(),S=O.recentUpdateNodeListModule,C=O.isCancelError,w=O.useModule,I=function(e){var n,r=Object(m.getWikiRecentFunctions)().objInfo,i=r.objToken,p=r.objType,O=e.blockId,I=e.editable,T=e.onDataUpdate,D=e.spaceId,A=Boolean(D.length&&D!==k.e&&D!==k.K),j=Object(y.useRef)(null),R=w(S).useRecentUpdateNodeListQuery({spaceId:D,blockId:O,objToken:i,objType:void 0===p?"":p.toString()},e.displaySize,{autoFetch:A}),N=R.data,P=R.error,M=R.status,B=R.hasNextPage,L=R.fetchNextPage,F=R.fetchFirstPage,H=R.isFetchingFirstPage,W=R.isFetchingNextPage,U=R.isFirstPageError,V=Object(y.useCallback)((function(){A&&F()}),[A,F]),z=Object(y.useCallback)(a()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L({throwOnError:!0,fetchMeta:{size:20}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),C(e.t0)||console.error("wiki recent block fetch error:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[L]);Object(y.useEffect)((function(){V()}),[e.displaySize,V]),Object(y.useEffect)((function(){return N&&T(N.nodes)}),[N,T]);var Q=function(e){e.stopPropagation();var n=!1;e.nativeEvent.path.forEach((function(e){var r;(null===(r=e.className)||void 0===r?void 0:r.includes("item-author"))&&(n=!0)})),n||Object(m.collectEvent)("ccm_doc_wiki_block_click",{click:"list_item",target:"ccm_docs_page_view",from:"doc_recentupdate_block",view_title:"wiki_recent_update",ccm_open_type:"doc_recentupdate_block"})},G=function(e,n){var r,o=null===(r=e.target.parentNode)||void 0===r?void 0:r.parentNode;null===o||void 0===o||o.dispatchEvent(new MouseEvent("mouseout",{view:window,bubbles:!0,cancelable:!0})),n&&Object(m.collectEvent)("ccm_doc_wiki_block_click",{click:"editor_detail",view_title:"wiki_recent_update",target:"none"})},K=function(e){var n,r=null===(n=e.target.parentNode)||void 0===n?void 0:n.parentNode;null===r||void 0===r||r.dispatchEvent(new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0}))},q=function(e){e.preventDefault()},X=function(e){e.stopPropagation(),z(),Object(m.collectEvent)("ccm_doc_wiki_block_click",{click:"show_more",view_title:"wiki_recent_update",target:"none"})},Y=function(n){n.stopPropagation(),e.onClickNoContentBtn(),Object(m.collectEvent)("ccm_doc_wiki_block_click",{click:"select_space",target:"ccm_doc_wiki_block_space_view",view_title:"wiki_recent_update"})},J=B&&(null===N||void 0===N||null===(n=N.nodes)||void 0===n?void 0:n.length)<=k.h,Z=!H&&(W||J),$=function(){return b.a.createElement("div",{className:"".concat(k.A,"--content-bottom-bar")},W?b.a.createElement(h.Loading,{style:{margin:"auto"}}):J?function(){var e="".concat(k.A,"--content-bottom-bar");return b.a.createElement("button",{type:"button",className:"".concat(e,"-load-more"),onClick:X},b.a.createElement(s.S,{className:"".concat(e,"-load-more-icon")}),t("CreationDoc_Wiki_UpdatesBlock_ShowMore"))}():"")},ee=function(e){var n,r=Object(m.getWikiRecentFunctions)(),o=r.withFilePreivewWrapper,i=r.suiteType2UnnamedTitle,a=r.getTimeText,s=r.mapTypeToIcon,l=Object(c.W)(e.title),u=s(e.objType,l),d=(null===(n=e.title)||void 0===n?void 0:n.length)?e.title:i[e.objType],f=Object(x.Z)(e);return o(b.a.createElement("a",{href:e.wikiUrl,target:"_blank",style:{textDecoration:"none"},className:v()("".concat(k.A,"--content-item"),_.S.isMobile&&"".concat(k.A,"--content-item-mobile")),key:e.wikiToken,onClick:Q,rel:"noopener noreferrer"},_.S.isMobile?b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"".concat(k.A,"--content-item-mobile-main")},b.a.createElement("img",{src:u,className:"".concat(k.A,"--content-item-mobile-icon"),alt:""}),b.a.createElement("div",{className:"".concat(k.A,"--content-item-mobile-title")},d)),b.a.createElement("div",{className:"".concat(k.A,"--content-item-mobile-desc")},f," ",a(Number(e.updateTime)))):b.a.createElement(b.a.Fragment,null,b.a.createElement(u,{className:"".concat(k.A,"--content-item-icon")}),b.a.createElement("div",{className:"".concat(k.A,"--content-item-title")},d),b.a.createElement("div",{className:"".concat(k.A,"--content-item-author")},function(e){var n=Object(m.getWikiRecentFunctions)().withUserProfileWrapper,r=Object(x.Z)(e),o=Object(g.get)(e,"userType",k.v.NORMAL);return o===k.v.NORMAL?n(b.a.createElement("button",{type:"button",onMouseOver:function(e){return G(e,!0)},onMouseOut:K,onClick:q},r),e.userId):b.a.createElement("button",{type:"button",onClick:q,onMouseOver:function(e){return G(e,!1)},onMouseOut:K},r,o===k.v.APPUSER&&" \ud83e\udd16")}(e)),b.a.createElement("div",{className:"".concat(k.A,"--content-item-time")},a(Number(e.updateTime))))),e.objType,e.wikiToken,Number(e.updateTime))},te=function(e,n,r){var o;if(_.S.isMobile){var i=e;o=b.a.createElement("div",{className:"wrapper"},b.a.createElement(i,null),b.a.createElement("p",null,n))}else{var a=Object(m.getWikiRecentFunctions)().ThemeIllustrationBlock,c=r?function(e,n){return b.a.createElement("div",{style:{textAlign:"center"}},e,I&&b.a.createElement("div",{className:"".concat(k.A,"--content-tips-btn"),onClick:n.handler},n.title))}(n,r):n;o=b.a.createElement(a,{icon:e,desc:c})}return b.a.createElement("div",{className:"".concat(k.A,"--content-tips")},o)},ne=function(){if(_.S.isMobile)return te(l.S,b.a.createElement("div",null,b.a.createElement("p",null,t("CreationDoc_Wiki_UpdatesBlock_NoPages_Placeholder")),I&&b.a.createElement("p",null,t("CreationDoc_Wiki_UpdatesBlock_SwitchToDesktop"))));var e=I?{title:t("CreationDoc_Wiki_UpdatesBlock_NoPages_Reselect"),handler:Y}:void 0;return te(l.S,t("CreationDoc_Wiki_UpdatesBlock_NoPages_Placeholder"),e)};return b.a.createElement("div",null,function(){var n,r=v()("".concat(k.A,"--content"),{selected:e.isSelected});if(P&&!C(P)&&U)P.code===k.x.SPACE_NO_PERMISSION?(n=te(u.S,t("CreationDoc_Wiki_UpdatesBlock_NoAccess_Placeholder")),e.onStatusChange(E.Q.NO_PERMISSION)):P.code===k.x.REQUIRE_LOGIN?(n=te(d.S,t("LarkCCM_Wiki_UpdatesBlock_NotLoggedIn_Placeholder_PC")),e.onStatusChange(E.Q.REQUIRE_LOGIN)):(n=te(f.S,t("feed.load_failed")),e.onStatusChange(E.Q.ERROR));else if(N){var o=N.nodes;if(0===o.length)n=ne(),e.onStatusChange(E.Q.NO_FILE);else n=function(e){return b.a.createElement("div",{className:"".concat(k.A,"--content-list")},_.S.isMobile?e.map((function(e){return ee(e)})):b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"".concat(k.A,"--content-header")},b.a.createElement("div",{className:"".concat(k.A,"--content-header-title")},b.a.createElement("p",null,t("CreationDoc_Wiki_UpdatesBlock_PageTitle"))),b.a.createElement("div",{className:"".concat(k.A,"--content-header-author")},t("CreationDoc_Wiki_UpdatesBlock_EditedBy")),b.a.createElement("div",{className:"".concat(k.A,"--content-header-time")},t("CreationDoc_Wiki_UpdatesBlock_LastEdited"))),b.a.createElement("div",{className:"".concat(k.A,"--content-scroll"),ref:j},e.map((function(e){return ee(e)})))),Z&&$())}(o.slice(0,k.h)),e.onStatusChange(E.Q.NORMAL)}else"fetching"===M?n=b.a.createElement("div",{className:"".concat(k.A,"--content-tips")},b.a.createElement(h.Loading,{tip:t("common.loading"),className:"loading"})):A||(n=ne());return b.a.createElement("div",{className:r},n)}())}}).call(this,r("dx_E9Eu"))},dx_u13u:function(e,n,r){"use strict";r.d(n,"v",(function(){return l})),r.d(n,"U",(function(){return u})),r.d(n,"Aa",(function(){return d})),r.d(n,"Mv",(function(){return f})),r.d(n,"N",(function(){return h})),r.d(n,"kJ",(function(){return p})),r.d(n,"b",(function(){return v})),r.d(n,"O9",(function(){return m})),r.d(n,"m",(function(){return g})),r.d(n,"K",(function(){return y})),r.d(n,"A3",(function(){return b})),r.d(n,"c",(function(){return _})),r.d(n,"n0",(function(){return x})),r.d(n,"k",(function(){return k})),r.d(n,"B",(function(){return E})),r.d(n,"x",(function(){return O})),r.d(n,"BX",(function(){return S})),r.d(n,"Ar",(function(){return C})),r.d(n,"L7",(function(){return w})),r.d(n,"sS",(function(){return I})),r.d(n,"I",(function(){return T})),r.d(n,"n",(function(){return D})),r.d(n,"s",(function(){return A})),r.d(n,"j",(function(){return j})),r.d(n,"P",(function(){return R})),r.d(n,"L",(function(){return N})),r.d(n,"d",(function(){return P})),r.d(n,"X5",(function(){return M})),r.d(n,"R",(function(){return B})),r.d(n,"M",(function(){return L})),r.d(n,"X",(function(){return F})),r.d(n,"f",(function(){return H})),r.d(n,"A",(function(){return W})),r.d(n,"W",(function(){return U})),r.d(n,"e",(function(){return V})),r.d(n,"l",(function(){return z})),r.d(n,"O",(function(){return Q})),r.d(n,"vG",(function(){return o}));var o,i="undefined"!==typeof window&&"undefined"!==typeof window.document,a=i?window:{},c=!(!i||!window.document.documentElement)&&"ontouchstart"in window.document.documentElement,s=!!i&&"PointerEvent"in a,l={scale:1,rotate:0,offsetX:0,offsetY:0},u=72,d=36,f=3,h=2e3,p=300,v=50,m=50,g=200,y=300,b=10,_=520,x=2.4,k=400,E="click",O="dragstart",S="keydown",C=s?"pointerdown":c?"touchstart":"mousedown",w=s?"pointermove":c?"touchmove":"mousemove",I=s?"pointerup":c?"touchend touchcancel":"mouseup",T="resize",D="wheel",A="keypress",j="keyup",R="mouseleave",N="mousemove",P=.15,M=5,B=.1,L="move",F="toolbar-hide",H="viewer-show",W="image-viewer-wrapper",U="image-draggable",V="image-dragging",z="mime-type-svg",Q="unloaded-view-image";!function(e){e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.F=70]="F",e[e.R=82]="R",e[e.S=83]="S",e[e.Numpad_0=96]="Numpad_0",e[e.Numpad_1=97]="Numpad_1",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus"}(o||(o={}))},dx_u70u:function(e,n,r){"use strict";(function(t){r.d(n,"w",(function(){return T}));var e,o=r("dx_o0o1"),i=r.n(o),a=r("dx_yXPU"),c=r.n(a),s=r("dx_J4zp"),l=r.n(s),u=r("dx_FBWK"),d=r("dx_aSlK"),f=r("dx_sciK"),h=r("dx_d5dF"),p=r("dx_adgV"),v=r("dx_jRv5"),m=r("dx_PcQO"),g=r("dx_TSYQ"),y=r.n(g),b=r("dx_UtDZ"),_=r("dx_cDcd"),x=r.n(_),k=r("dx_yzqx"),E=r("dx_JnYQ"),O=r("dx_VHoe");!function(e){e.TREE="tree",e.BACKEND="backend"}(e||(e={}));var S=Object(b.getWikiCatalogFunctions)(),C=S.catalogNodeListModule,w=S.isCancelError,I=S.useModule,T=function(n){var r=Object(b.getWikiCatalogFunctions)().objInfo,o=r.objToken,a=r.objType,s=n.blockId,g=n.editable,S=n.onDataUpdate,T=n.treeNodeData,D=n.wikiToken,A=Boolean(D.length&&D!==E.e&&D!==E.K),j=Object(_.useState)(e.BACKEND),R=l()(j,2),N=R[0],P=R[1],M=Object(_.useRef)(null),B=I(C).useCatalogNodeListQuery({wikiToken:D,blockId:s,objToken:o,objType:void 0===a?"":a.toString()},{autoFetch:A}),L=B.data,F=B.error,H=B.status,W=B.hasNextPage,U=B.fetchNextPage,V=B.isFetchingFirstPage,z=B.isFetchingNextPage,Q=B.isFirstPageError,G=Object(_.useCallback)(c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U({throwOnError:!0,fetchMeta:{size:60}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),w(e.t0)||console.error("wiki catalog block fetch error:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[U]);Object(_.useEffect)((function(){var n=k.S.isMobile?void 0:T;P(n?e.TREE:e.BACKEND)}),[n.treeNodeData,L]),Object(_.useEffect)((function(){return S(N===e.TREE?T:(null===L||void 0===L?void 0:L.nodes)||[])}),[N,T,L,S]);var K=function(e){e.stopPropagation(),Object(b.collectEvent)("ccm_doc_wiki_block_click",{click:"list_item",view_title:"wiki_catalog",target:"ccm_docs_page_view",from:"doc_catalog_block",ccm_open_type:"doc_catalog_block"})},q=function(e){e.stopPropagation(),G(),Object(b.collectEvent)("ccm_doc_wiki_block_click",{click:"show_more",view_title:"wiki_catalog",target:"none"})},X=function(e){e.stopPropagation(),n.onClickNoContentBtn(),Object(b.collectEvent)("ccm_doc_wiki_block_click",{click:"select_space",view_title:"wiki_catalog",target:"ccm_doc_wiki_block_space_view"})},Y=function(){var r=k.S.isMobile?void 0:n.treeNodeData,o=null===L||void 0===L?void 0:L.nodes;return N===e.TREE?(null===o||void 0===o?void 0:o.length)?r.map((function(e){var n=e.objType,r=e.title,i=e.wikiToken,a=e.wikiNodeType,c=e.url,s=o.filter((function(n){return n.wikiToken===e.wikiToken}));return{objType:n,wikiNodeType:a,title:r,url:c,wikiToken:i,editTime:s.length?s[0].editTime:""}})):r:N===e.BACKEND?o:void 0},J=function(){var n=Y();return N===e.BACKEND&&(W&&n&&n.length<=E.y)},Z=!V&&(z||J()),$=function(){return x.a.createElement("div",{className:"".concat(E.z,"--content-bottom-bar")},z?x.a.createElement(m.Loading,{style:{margin:"auto"}}):J()?function(){var e="".concat(E.z,"--content-bottom-bar");return x.a.createElement("button",{type:"button",className:"".concat(e,"-load-more"),onClick:q},x.a.createElement(d.S,{className:"".concat(e,"-load-more-icon")}),t("CreationDoc_Wiki_UpdatesBlock_ShowMore"))}():"")},ee=function(e){return x.a.createElement("div",{className:"".concat(E.z,"--content-list")},x.a.createElement("div",{className:"".concat(E.z,"--content-scroll"),ref:M},e.map((function(e){return function(e){var n,r=Object(b.getWikiCatalogFunctions)(),o=r.withFilePreivewWrapper,i=r.genColorfulShortcutIcon,a=r.mapTypeToIcon,c=r.suiteType2UnnamedTitle,s=Object(u.getFileExt)(e.title),l=a(e.objType,s),d=1!==e.wikiNodeType||k.S.isMobile?l:i(l),f=(null===(n=e.title)||void 0===n?void 0:n.length)?e.title:c[e.objType];return o(x.a.createElement("a",{href:e.url,target:"_blank",style:{textDecoration:"none"},className:"".concat(E.z,"--content-item"),key:e.wikiToken,onClick:K,rel:"noreferrer"},k.S.isMobile?x.a.createElement("img",{src:d,className:"".concat(E.z,"--content-item-icon-mobile"),alt:""}):x.a.createElement("span",{className:"".concat(E.z,"--content-item-icon")},x.a.createElement(d,null)),x.a.createElement("div",{className:"".concat(E.z,"--content-item-title")},f)),e.objType,e.wikiToken,Number(e.editTime))}(e)}))),Z&&$())},te=function(e,n,r){var o;if(k.S.isMobile){var i=e;o=x.a.createElement("div",{className:"wrapper"},x.a.createElement(i,null),x.a.createElement("p",null,n))}else{var a=Object(b.getWikiCatalogFunctions)().ThemeIllustrationBlock,c=r?function(e,n){return x.a.createElement("div",{style:{textAlign:"center"}},e,g&&x.a.createElement("div",{className:"".concat(E.z,"--content-tips-btn"),onClick:n.handler},n.title))}(n,r):n;o=x.a.createElement(a,{icon:e,desc:c})}return x.a.createElement("div",{className:"".concat(E.z,"--content-tips")},o)},ne=function(){return te(f.S,t("CreationDoc_Wiki_SubpageTOC_NoSubpage"))};return x.a.createElement("div",null,function(){var e,r=y()("".concat(E.z,"--content"),{selected:n.isSelected});if(F&&!w(F)&&Q)if(F.code===E.x.SPACE_NO_PERMISSION||F.code===E.x.WIKI_NODE_NO_PERMISSION)e=te(h.S,t("CreationDoc_Wiki_UpdatesBlock_NoAccess_Placeholder")),n.onStatusChange(O.Q.NO_PERMISSION);else if(F.code===E.x.SPACE_NOT_EXIST||F.code===E.x.WIKI_NODE_NOT_EXIST){var o=g?{title:t("CreationDoc_Wiki_SubpageTOC_ResetRange_Btn"),handler:X}:void 0;e=te(f.S,t("CreationDoc_Wiki_SubpageTOC_ResetRange"),o)}else F.code===E.x.REQUIRE_LOGIN?(e=te(p.S,t("LarkCCM_Wiki_UpdatesBlock_NotLoggedIn_Placeholder_PC")),n.onStatusChange(O.Q.REQUIRE_LOGIN)):(e=te(v.S,t("feed.load_failed")),n.onStatusChange(O.Q.ERROR));else{var i=Y();if(i)if(0===i.length)e=ne(),n.onStatusChange(O.Q.NO_FILE);else{var a=i.slice(0,E.y);e=ee(a),n.onStatusChange(O.Q.NORMAL)}else"fetching"===H?e=x.a.createElement("div",{className:"".concat(E.z,"--content-tips")},x.a.createElement(m.Loading,{tip:t("common.loading"),className:"loading"})):A||(e=ne())}return x.a.createElement("div",{className:r},e)}())}}).call(this,r("dx_E9Eu"))},dx_uPex:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M18 29c-6.075 0-11-4.925-11-11S11.925 7 18 7s11 4.925 11 11-4.925 11-11 11zm0-2a9 9 0 100-18 9 9 0 000 18zm1.875-8.889a2.479 2.479 0 00-1.049 2.025h-1.652v-.112h1.652v.112h-1.652l.001-.112c.036-1.3.681-2.51 1.747-3.263.242-.17.407-.297.482-.366.165-.15.249-.326.249-.503 0-.614-.647-1.24-1.653-1.24s-1.653.626-1.653 1.24v.826h-1.652v-.826c0-1.54 1.4-2.892 3.305-2.892 1.906 0 3.305 1.352 3.305 2.892 0 .659-.29 1.27-.786 1.724a6.989 6.989 0 01-.644.495zM18 23a1 1 0 110-2 1 1 0 010 2z",fill:"#424E5D",fillRule:"nonzero"});n.S=function(e){return i.a.createElement("svg",a({width:36,height:36,viewBox:"0 0 36 36"},e),c)}},dx_unwB:function(e,n,r){},dx_uyGt:function(e,n,r){"use strict";r.r(n);var o=r("dx_h74D"),i=r("dx_BmAg"),a=r("dx_lwsE"),c=r.n(a),s=r("dx_W8MJ"),l=r.n(s),u=r("dx_W7W2"),d=r.n(u),f=r("dx_a1gu"),h=r.n(f),p=r("dx_Nsbk"),v=r.n(p),m=r("dx_UtDZ"),g=r("dx_cDcd"),y=r.n(g),b=r("dx_A3AG"),_=r("dx_qx8A"),x=r.n(_),k=r("dx_SL5O");function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=v()(e);if(n){var i=v()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h()(this,r)}}var O=function(e){d()(r,e);var n=E(r);function r(){return c()(this,r),n.apply(this,arguments)}return l()(r,[{key:"componentDidMount",value:function(){m.EventEmitter.on(m.EVENTS.PC.DOCS.HISTORY_X.TOGGLE,this.closeHelpSiderbar)}},{key:"componentWillUnmount",value:function(){m.EventEmitter.off(m.EVENTS.PC.DOCS.HISTORY_X.TOGGLE,this.closeHelpSiderbar)}},{key:"closeHelpSiderbar",value:function(){x.a.dispatch(Object(b.l)(!1))}},{key:"render",value:function(){return y.a.createElement("div",null,y.a.createElement(k.S,{active:this.props.active}))}}]),r}(y.a.Component),S=Object(o.connect)((function(e){return{active:Object(i.x)(e)}}))(O);n.default=S},dx_v6vh:function(e,n,r){"use strict";r.r(n);var o=r("dx_UtDZ"),i=r("dx_h74D"),a=r("dx_lwsE"),c=r.n(a),s=r("dx_W8MJ"),l=r.n(s),u=r("dx_W7W2"),d=r.n(u),f=r("dx_a1gu"),h=r.n(f),p=r("dx_Nsbk"),v=r.n(p),m=r("dx_cDcd"),g=r.n(m),y=r("dx_D9db"),b=r("dx_Fimk"),_=r("dx_Rswd"),x=r("dx_SVj9");function k(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=v()(e);if(n){var i=v()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h()(this,r)}}var E=function(e){d()(r,e);var n=k(r);function r(){var e;c()(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={printType:x.b.doc,isPrinting:!1},e.iframe=null,e.setIframe=function(n){e.iframe=n},e.handleChange=function(n){e.setState({printType:n});var r=n===x.b.comment?"print_context_comment":"print_context";e.collectSpaceClickEvent(r)},e.handleConfirm=function(){Object(y.fB)(y.f.PRINT),e.setState({isPrinting:!0},e.handlePrint),e.props.toggleDialogVisible(!1),e.collectSpaceClickEvent(o.MODAL_CLICK_TYPES.MODAL_CONFIRM)},e.handleCancel=function(){e.props.toggleDialogVisible(!1),e.collectSpaceClickEvent(o.MODAL_CLICK_TYPES.MODAL_CLOSE)},e.handleClose=function(){e.props.toggleDialogVisible(!1)},e.handlePrinted=function(){e.setState({isPrinting:!1})},e}return l()(r,[{key:"componentWillUnmount",value:function(){this.iframe=null}},{key:"collectSpaceClickEvent",value:function(e){o.spaceLogHelper.collectSpaceClickEvent(o.EventTargetArea.Print,{click:e,target:o.spaceLogHelper.getCCMView(o.EventTargetArea.DocsPage)})}},{key:"handlePrint",value:function(){if(this.iframe){var e=this.state.printType===x.b.comment;new _.A({blockManager:this.props.blockManager,iframe:this.iframe,onPrinted:this.handlePrinted}).run(e),Object(b.N)("click_file_print_option",{is_print_comment:e})}}},{key:"render",value:function(){var e=this.props.dialogVisible,n=this.state,r=n.printType,o=n.isPrinting;return g.a.createElement(x.m,{dialogVisible:e,printType:r,isPrinting:o,getIframe:this.setIframe,onChange:this.handleChange,onConfirm:this.handleConfirm,onCancel:this.handleCancel,onClose:this.handleClose})}}]),r}(m.PureComponent),O={toggleDialogVisible:o.actions.suite.setShouldPrint},S=Object(i.connect)((function(e){return{dialogVisible:Object(o.selectShouldPrint)(e)}}),O)(E);n.default=S},dx_v7vA:function(e,n,r){"use strict";r.r(n);var o=r("dx_J4zp"),i=r.n(o),a=r("dx_TSYQ"),c=r.n(a),s=r("dx_cDcd"),l=r.n(s),u=r("dx_yzqx"),d=r("dx_zEdG"),f=r("dx_B28d"),h=r("dx_Elol"),p=r("dx_cGa6"),v=r("dx_AbAm"),m=r("dx_h0h1"),g=r("dx_D8nn"),y=r("dx_c3cO"),b=r("dx_Sa3H"),_=r("dx_SkpS"),x=r("dx_ZMwq");n.default=function(){var e=Object(s.useState)(x.E.Simple),n=i()(e,2),r=n[0],o=n[1],a=Object(s.useState)(!1),k=i()(a,2),E=k[0],O=k[1],S=Object(s.useState)({}),C=i()(S,2),w=C[0],I=C[1],T=Object(s.useState)(null),D=i()(T,2),A=D[0],j=D[1],R=Object(s.useState)([]),N=i()(R,2),P=N[0],M=N[1],B=Object(s.useState)(!1),L=i()(B,2),F=L[0],H=L[1],W=Object(s.useState)(!1),U=i()(W,2),V=U[0],z=U[1],Q=Object(s.useCallback)((function(){O(!1)}),[]),G=Object(s.useCallback)((function(e,n){return!u.S.isOpendoc&&Object(p.Q)()&&n===x.E.Intact&&e.type===f.B.TODO&&!Object(h.f)(e.id,e.blockManager)}),[]),K=Object(s.useCallback)((function(){var e=_.Z.reminderRef,n=_.Z.users,r=_.Z.popoverType,i=_.Z.reminderInfo,a=_.Z.block,c=G(a,r),s=Object(m.e)(e,n,r,!!(null===a||void 0===a?void 0:a.editable),c);I(s),o(r);var l=i.data,u=l.expire_time,d=l.is_whole_day,f=l.should_notify,h=l.notify_time;j({expireTime:u,isWholeDay:d,shouldNotify:f,notifyTime:h,reminderId:i.id}),O(!0),M(n),H(a.editable),z(c)}),[]),q=Object(s.useCallback)((function(){var e=_.Z.reminderRef,n=_.Z.users,r=_.Z.popoverType,i=_.Z.reminderInfo,a=_.Z.block,c=G(a,r),s=Object(m.e)(e,n,r,!!(null===a||void 0===a?void 0:a.editable),c);I(s),o(r);var l=i.data,u=l.expire_time,d=l.is_whole_day,f=l.should_notify,h=l.notify_time;j({expireTime:u,isWholeDay:d,shouldNotify:f,notifyTime:h,reminderId:i.id}),M(n),H(a.editable),z(c)}),[]),X=Object(s.useCallback)((function(){g.S.emit(y.X.POPOVER_MOUSE_ENTER)}),[]),Y=Object(s.useCallback)((function(){g.S.emit(y.X.POPOVER_MOUSE_LEAVE)}),[]),J=Object(s.useCallback)((function(e){_.Z.updateReminder(e)}),[]),Z=Object(s.useCallback)((function(){var e;_.Z.block&&(Object(v.t)(_.Z.block,null===(e=_.Z.block)||void 0===e?void 0:e.blockManager),Q(),Object(d.P)("ccm_doc_reminder_panel_click",{record_id:_.Z.block.record.id,block_type:_.Z.block.type},{click:"click_time_option",target:"none",sub_click:"create_task"}))}),[Q]);Object(s.useEffect)((function(){return g.S.on(y.X.OPEN_POPOVER,K),g.S.on(y.X.CLOSE_POPOVER,Q),g.S.on(y.X.UPDATE_POPOVER,q),function(){g.S.off(y.X.OPEN_POPOVER,K),g.S.off(y.X.CLOSE_POPOVER,Q),g.S.off(y.X.UPDATE_POPOVER,q)}}),[K,q,Q]);var $=c()("docx-reminder-popover-wrapper",{visible:E,"slide-top":E&&w.bottom,"slide-bottom":E&&w.top});return l.a.createElement("div",{className:"docx-reminder"},l.a.createElement("div",{className:$,style:w,onMouseEnter:X,onMouseLeave:Y},A&&l.a.createElement(b.S,{type:r,reminderData:A,users:P,onChange:J,showCheckbox:F,showTransTask:V,onTransTaskClick:Z})))}},dx_v9xx:function(e,n,r){"use strict";r.d(n,"V",(function(){return W}));var o,i=r("dx_lwsE"),a=r.n(i),c=r("dx_W8MJ"),s=r.n(c),l=r("dx_W7W2"),u=r.n(l),d=r("dx_a1gu"),f=r.n(d),h=r("dx_Nsbk"),p=r.n(h),v=r("dx_u13u"),m=r("dx_PJYZ"),g=r.n(m),y=r("dx_puQj"),b=r.n(y),_=r("dx_h6a8"),x=function(){function e(n){a()(this,e),this.moveImage=void 0,this.position={x:0,y:0},this.timer=void 0,this.isDragging=!1,this.isPointerDown=!1,this.moveImage=n}return s()(e,[{key:"pointerdown",value:function(e){var n=this;this.isPointerDown=!0,this.position={x:e.clientX,y:e.clientY},this.timer=window.setTimeout((function(){n.isDragging=!0}),v.K)}},{key:"pointermove",value:function(e){if(this.isPointerDown&&this.moveImage&&(Math.abs(e.clientX-this.position.x)+Math.abs(e.clientX-this.position.x)>v.A3&&(this.isDragging=!0),this.isDragging)){var n=e.clientX-this.position.x,r=e.clientY-this.position.y;return this.moveImage({offsetX:n,offsetY:r}),void(this.position={x:e.clientX,y:e.clientY})}}},{key:"pointerup",value:function(){var e=this;this.isPointerDown=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.isDragging&&window.setTimeout((function(){e.destory()}),0)}},{key:"destory",value:function(){this.position={x:0,y:0},this.timer=null,this.isDragging=!1,this.isPointerDown=!1}},{key:"isDraggingImage",get:function(){return this.isDragging}}]),e}(),k=r("dx_eFoE"),E=r("dx_o0o1"),O=r.n(E),S=r("dx_yXPU"),C=r.n(S),w=r("dx_lSNA"),I=r.n(w),T=r("dx_UtDZ"),D=r("dx_ukKW"),A=r("dx_D9db"),j=r("dx_Fimk"),R=r("dx_J5JQ"),N=r("dx_vuJs");function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){I()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}!function(e){e.Png="image/png",e.Svg="image/svg+xml"}(o||(o={}));var B=function(){function e(){var n=this;a()(this,e),this.isFirstUpdate=!0,this.container=document.createElement("div"),this.loadingDom=void 0,this.imageDom=document.createElement("img"),this.coverImageDom=void 0,this.activedImage={src:"",downloadFinished:!1},this.transformInfo=Object(_.cloneDeep)(v.v),this._isOrigin=!1,this._offsetTop=0,this.onOriginalSizeChange=void 0,this.onZoomChange=void 0,this.onOffsetChange=void 0,this.onRotateChange=void 0,this.naturalImageInfo={width:0,height:0,mimeType:void 0},this.wrapperContainer=void 0,this.lastGestureEventScale=null,this.removeCoverDomTimer=void 0,this._imageStatus={played:!1,complete:!1,isLoading:!1},this.styleMap={},this.imageInfo=void 0,this.lastImage=void 0,this.updateStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.styleMap.transform=n.buildCssTransform();var o=M(M({},n.styleMap),r);e&&(Object.assign(o,{transition:"none"}),n.debounceOpenTransition()),Object(k.y)(n.imageDom,o)},this.debounceOpenTransition=Object(_.debounce)(this.openTransitionStyle,v.O9),this.getPreviewImageSrc=function(){var e=C()(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.previewImageUrl,!D.y){e.next=5;break}return e.next=4,T.blobHelper.getBlobUrl(r);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.getOriginalImageSrc=function(){var e=C()(O.a.mark((function e(n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.originSrc,e.t0){e.next=5;break}return e.next=4,n.src();case 4:e.t0=e.sent;case 5:if(r=e.t0,!D.y){e.next=10;break}return e.next=9,T.blobHelper.getBlobUrl(r);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.update=function(){var e=C()(O.a.mark((function e(r){var o,i,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.imageInfo=r,n.lastImage&&(n.lastImage.src=""),n.isFirstUpdate?n.isFirstUpdate=!1:(n.resetParams(),n.removeCoverDomTimer&&clearTimeout(n.removeCoverDomTimer)),r.type!==R.I.Image){e.next=16;break}return n.naturalImageInfo.width=r.width,n.naturalImageInfo.height=r.height,e.next=8,n.getPreviewImageSrc(r);case 8:return o=e.sent,e.next=11,n.getOriginalImageSrc(r);case 11:i=e.sent,n.activedImage.src=i,o?(n.showCoverImage(o),r.isHD?n._imageStatus.complete=!0:(n._imageStatus.isLoading=!1,n.loadImage(i))):(n.showLoading(),n.loadImage(i)),e.next=24;break;case 16:return n.showLoading(),e.t0=N.Y,e.next=20,r.src();case 20:e.t1=e.sent,a=(0,e.t0)(e.t1),n.activedImage.src=a,n.loadImage(a);case 24:n.logTeaPageView();case 25:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.initLoadingDom()}return s()(e,[{key:"isOriginalSize",get:function(){return this._isOrigin},set:function(e){this._isOrigin=e,this.onOriginalSizeChange(e)}},{key:"imageStatus",get:function(){return this._imageStatus}},{key:"isHorizontal",get:function(){return 0!==(1&this.transformInfo.rotate)}}]),s()(e,[{key:"initLoadingDom",value:function(){this.loadingDom=document.createElement("div"),this.loadingDom.classList.add("image-viewer-loading"),this.loadingDom.innerHTML='<svg class="loading-spinner" width="40px" height="40px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>'}},{key:"buildCssTransform",value:function(){var e=this.transformInfo,n=e.rotate,r=e.scale,o=e.offsetX,i=e.offsetY,a="translate(-50%, -50%)";return(o||i)&&(a+=" translate(".concat(o,"px, ").concat(i,"px)")),a+=" rotate(-".concat(.25*n,"turn) scale(").concat(r,")")}},{key:"getTransformInfo",value:function(){return this.transformInfo}},{key:"setTransformInfo",value:function(e){return this.transformInfo=M(M({},this.transformInfo),e),this}},{key:"zoomTo",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.transformInfo.scale=e,this.onZoomChange(e,r);var o=Object(k.e)(),i=o.width,a=o.height;return this.naturalImageInfo.height*e>a||this.naturalImageInfo.width*e>i?Object(k.p)(this.imageDom,v.M):Object(k.h)(this.imageDom,v.M),this.updateStyle(n),this}},{key:"zoomToWithAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.zoomTo(e,void 0,n);var r=this.naturalImageInfo,o=r.width,i=r.height,a={width:"".concat(o,"px"),height:"".concat(i,"px"),transition:"none",opacity:"0"};Object(k.y)(this.imageDom,a);var c={transition:"all 0.2s ease-in-out",opacity:"1"},s=this.imageDom;return requestAnimationFrame((function(){Object(k.y)(s,c)})),this}},{key:"resetOffset",value:function(){this.transformInfo.offsetX=0,this.transformInfo.offsetY=0}},{key:"resetScale",value:function(){this.transformInfo.scale=0}},{key:"adjustOffsetPositionByScale",value:function(e){var n=this.naturalImageInfo,r=n.width,o=n.height,i=Object(k.e)(),a=i.width,c=i.height,s=this.transformInfo,l=s.offsetX,u=s.offsetY,d=r*e,f=o*e;if(0!==l){if(d>a){var h=(d-a)/2;h<Math.abs(l)&&(this.transformInfo.offsetX=l>0?h:-h)}d<a&&(this.transformInfo.offsetX=0)}if(0!==u&&f>c){var p=(f-c)/2;p<Math.abs(u)&&(this.transformInfo.offsetY=u>0?p:-p),d<c&&(this.transformInfo.offsetY=0)}}},{key:"calcBaseScale",value:function(){var e=Object(k.e)().width;return this.naturalImageInfo.width<e/4?Math.pow(1+v.d,2):1}},{key:"calcMaxZoomRatio",value:function(){var e=Object(k.e)(),n=e.width,r=e.height,o=this.naturalImageInfo,i=o.width,a=o.height,c=Math.min(n,v.c)/i;if(this.isHorizontal){var s=[a,i];i=s[0],a=s[1]}var l=Math.min((n-2*v.U)/i,(r-2*v.Aa)/a);return Math.max(c,l)}},{key:"openTransitionStyle",value:function(){Object(k.y)(this.imageDom,{transition:"all 0.2s ease-in-out"})}},{key:"move",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{offsetX:0,offsetY:0},r=n.offsetX,o=n.offsetY,i=(null===(e=this.imageDom)||void 0===e?void 0:e.getBoundingClientRect())||{width:0,height:0,left:0,right:0,bottom:0,top:0},a=i.width,c=i.height,s=i.left,l=i.right,u=i.bottom,d=i.top,f=Object(k.e)(),h=f.width,p=f.height,v=a>h;v?(r=r<0?l>h?Math.max(h-l,r):0:r>0&&s<0?Math.min(-s,r):0,this.transformInfo.offsetX+=r):0!==this.transformInfo.offsetX&&(this.transformInfo.offsetX=r=0);var m=c>p;return m?(o=o<0?u>p?Math.max(p-u,o):0:o>0&&d<0?Math.min(-d,o):0,this.transformInfo.offsetY+=o):0!==this.transformInfo.offsetY&&(this.transformInfo.offsetY=o=0),this.onOffsetChange(this.transformInfo.offsetX,this.transformInfo.offsetY),this.updateStyle(!0),this}},{key:"calcAppropriateScale",value:function(){return Math.min(this.calcMaxZoomRatio(),this.calcBaseScale())}},{key:"toggle",value:function(){this.isOriginalSize=!this.isOriginalSize,this.resetOffset(),this.isOriginalSize?this.zoomTo(1):this.zoomTo(this.calcAppropriateScale())}},{key:"zoom",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.d,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.transformInfo.scale;return r?e=Math.min(i*(1+n),v.X5):(e=Math.max(i/(1+n),v.R),this.adjustOffsetPositionByScale(e)),this.zoomTo(e,o),this}},{key:"addRotate",value:function(){return this.transformInfo.rotate++,this.resetOffset(),this.updateStyle(),this.onRotateChange(this.transformInfo.rotate),!this.isHorizontal&&this.isLongImg()&&this.stickyLongImgOffset(),this}},{key:"resetRotate",value:function(){return this.transformInfo.rotate=0,this}},{key:"resetContent",value:function(){this.container.innerHTML="",this.coverImageDom=null,this.activedImage={src:"",downloadFinished:!1}}},{key:"resetParams",value:function(){this.resetRotate(),this.resetOffset(),this.updateStyle(!0),this.resetContent()}},{key:"downloadCurrentImage",value:function(){Object(A.fB)(A.f.DOWNLOAD,{ccm_download_type:"image"});var e=document.createElement("a");e.href=this.imageDom.src,e.download="",e.click(),this.logTeaPageClick("download")}},{key:"isLongImg",value:function(){var e=Object(k.e)().height,n=this.naturalImageInfo,r=n.width,o=n.height;return o/r>v.n0&&o>=e&&r>v.k}},{key:"stickyLongImgOffset",value:function(){this.transformInfo.offsetX=0,this._offsetTop<0?this.transformInfo.offsetY=Math.min(-this._offsetTop,this.naturalImageInfo.height/2):this.transformInfo.offsetY=1,this.onOffsetChange(this.transformInfo.offsetX,this.transformInfo.offsetY),this.updateStyle()}},{key:"showCoverImage",value:function(e){var n,r=this,o=new Image;o.src=e,o.className=v.O,this.showLoading(),o.onload=function(){r.hideLoading(),Object(k.h)(o,v.O)},this.imageDom=o,this.coverImageDom=o,this.zoomToWithAnimation(this.calcAppropriateScale()),this.container.append(o);var i=((null===(n=this.imageDom)||void 0===n?void 0:n.getBoundingClientRect())||{width:0,height:0,left:0,right:0,bottom:0,top:0}).top;this._offsetTop=i,this.isLongImg()&&this.stickyLongImgOffset()}},{key:"showLoading",value:function(){this.container.append(this.loadingDom),this._imageStatus.isLoading=!0}},{key:"hideLoading",value:function(){this.container.removeChild(this.loadingDom),this._imageStatus.isLoading=!1}},{key:"loadImage",value:function(e){var n=this;this._imageStatus.complete=!1;var r=new Image;this.lastImage=r,this.imageInfo.type===R.I.Diagram?r.onload=function(){n.naturalImageInfo.width=r.naturalWidth,n.naturalImageInfo.height=r.naturalHeight,Object(k.p)(r,v.l),n.imageDom=r,n.zoomToWithAnimation(n.calcAppropriateScale(),!0),n.container.append(r),n.hideLoading(),n._imageStatus.complete=!0}:r.onload=function(){if(n.activedImage.src===e&&!n.activedImage.downloadFinished){if(n.activedImage.downloadFinished=!0,r.width=n.naturalImageInfo.width,r.height=n.naturalImageInfo.height,n.imageDom=r,n.coverImageDom){var o=n.transformInfo.scale;n.zoomTo(o,!0,!0)}else n.zoomToWithAnimation(n.calcAppropriateScale(),!0);n.container.append(r),n.removeCoverDomTimer=setTimeout((function(){if(n.coverImageDom)return n.container.removeChild(n.coverImageDom),n.coverImageDom=null,void(n._imageStatus.complete=!0);n.hideLoading(),n._imageStatus.complete=!0}),500)}},r.src=e,r.complete?this._imageStatus.complete=!0:this._imageStatus.complete=!1}},{key:"getLogTeaParams",value:function(){var e=this.imageInfo,n="",r="";return e.type===R.I.Image?(n=e.token,r=e.mimeType?e.mimeType.split("/")[1]:""):(n=e.recordId,r="svg"),{object_id:Object(T.encryptTea)(n),object_file_type:r}}},{key:"logTeaPageView",value:function(){Object(j.N)("ccm_drive_page_view",M(M({},this.getLogTeaParams()),{},{preview_viable:1}))}},{key:"logTeaPageClick",value:function(e){Object(j.N)("ccm_drive_page_click",M(M({},this.getLogTeaParams()),{},{click:e}))}}]),e}();function L(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var F=function(e){u()(r,e);var n=L(r);function r(){var e;a()(this,r);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=n.call.apply(n,[this].concat(i))).isMouseOverHeaderOrFooter=!1,e.getScrollEdgeStatusThrottled=Object(_.throttle)(k.K,v.kJ),e.scrollThrottled=Object(_.throttle)(e.scroll.bind(g()(e)),v.b),e.resizeThrottled=Object(_.throttle)((function(){e.resetOffset(),e.zoomTo(e.calcAppropriateScale())}),v.b),e.setDragStyleThrottled=Object(_.throttle)(e.setDragStyle,v.b),e.imageDragManager=new x(e.move.bind(g()(e))),e.imageList=[],e.currentShowIndex=-1,e.onShowIndexChange=void 0,e.onClose=void 0,e.debounceFunc=Object(_.debounce)(e.hideToolbarFunc,v.N),e.handler=function(){var n,r=e.click.bind(g()(e)),o=e.wheelHandler.bind(g()(e)),i=e.dragstart.bind(g()(e)),a=e.pointerdown.bind(g()(e)),c=e.pointermove.bind(g()(e)),s=e.pointerup.bind(g()(e)),l=e.resize.bind(g()(e)),u=e.keydown.bind(g()(e)),d=e.keyup.bind(g()(e)),f=e.keypress.bind(g()(e)),h=e.mousemoveViewContainer.bind(g()(e)),p=e.mouseleaveViewContainer.bind(g()(e)),m=e.mouseenterHeaderFooter.bind(g()(e)),y=e.mouseleaveHeaderFooter.bind(g()(e));return{bind:function(){var g;Object(k.G)(e.wrapperContainer,v.B,r),Object(k.G)(e.wrapperContainer,v.x,i),Object(k.G)(e.wrapperContainer,v.n,o),window.GestureEvent,Object(k.G)(e.wrapperContainer,v.Ar,a),Object(k.G)(e.wrapperContainer,v.sS,s),Object(k.G)(e.wrapperContainer,v.L7,c),Object(k.G)(window,v.I,l),Object(k.G)(document.documentElement,v.BX,u,{capture:!0}),Object(k.G)(document.documentElement,v.j,d,{capture:!0}),Object(k.G)(document.documentElement,v.s,f,{capture:!0}),Object(k.G)(e.wrapperContainer,v.L,h),Object(k.G)(e.wrapperContainer,v.P,p),null===(g=n=e.wrapperContainer.querySelectorAll("*[data-cursor-hide=hide]"))||void 0===g||g.forEach((function(e){Object(k.G)(e,"mouseenter",m),Object(k.G)(e,"mouseleave",y)}))},unbind:function(){var g;Object(k.o)(e.wrapperContainer,v.B,r),Object(k.o)(e.wrapperContainer,v.n,o),Object(k.o)(e.wrapperContainer,v.Ar,a),Object(k.o)(e.wrapperContainer,v.sS,s),Object(k.o)(e.wrapperContainer,v.L7,c),Object(k.o)(e.wrapperContainer,v.x,i),window.GestureEvent,Object(k.o)(window,v.I,l),Object(k.o)(document.documentElement,v.BX,u,{capture:!0}),Object(k.o)(document.documentElement,v.j,d,{capture:!0}),Object(k.o)(document.documentElement,v.s,f,{capture:!0}),Object(k.o)(e.wrapperContainer,v.L,h),Object(k.o)(e.wrapperContainer,v.P,p),null===(g=n)||void 0===g||g.forEach((function(e){Object(k.o)(e,"mouseenter",m),Object(k.o)(e,"mouseleave",y)}))}}}(),e}return s()(r,[{key:"prev",value:function(){0!==this.currentShowIndex&&(this.currentShowIndex--,this.onShowIndexChange(this.currentShowIndex))}},{key:"next",value:function(){this.currentShowIndex!==this.imageList.length-1&&(this.currentShowIndex++,this.onShowIndexChange(this.currentShowIndex))}},{key:"click",value:function(e){this.imageDragManager.isDraggingImage||e.target.closest(".toolbox-list[data-cursor-hide=hide]")||this.hide()}},{key:"keydown",value:function(e){switch(e.stopPropagation(),e.keyCode||e.which||e.charCode){case v.vG.Escape:e.preventDefault(),this.hide();break;case v.vG.ArrowLeft:this.prev();break;case v.vG.ArrowUp:e.preventDefault(),this.zoom(void 0,!0);break;case v.vG.ArrowRight:this.next();break;case v.vG.ArrowDown:e.preventDefault(),this.zoom();break;case v.vG.F:e.ctrlKey&&e.metaKey&&(e.preventDefault(),this.zoomTo(1));break;case v.vG.S:Object(k.KP)(e)&&(e.preventDefault(),this.downloadCurrentImage());break;case v.vG.R:Object(k.KP)(e)||(e.preventDefault(),this.addRotate());break;case v.vG.Plus:case v.vG.Add:Object(k.KP)(e)&&(e.preventDefault(),this.zoom(void 0,!0));break;case v.vG.Minus:case v.vG.Subtract:Object(k.KP)(e)&&(e.preventDefault(),this.zoom());break;case v.vG.Space:this.zoomTo(Math.min(this.transformInfo.scale,this.calcMaxZoomRatio()));break;case v.vG.Zero:case v.vG.One:case v.vG.Numpad_0:case v.vG.Numpad_1:Object(k.KP)(e)&&(e.preventDefault(),this.toggle())}}},{key:"filterKey",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"keyup",value:function(e){this.filterKey(e)}},{key:"keypress",value:function(e){this.filterKey(e)}},{key:"dragstart",value:function(e){var n;"img"===(null===(n=e.target)||void 0===n?void 0:n.tagName.toLowerCase())&&e.preventDefault()}},{key:"pointerdown",value:function(e){this.imageDragManager.pointerdown(e),Object(k.p)(this.imageDom,v.e)}},{key:"pointermove",value:function(e){this.imageDragManager.pointermove(e)}},{key:"pointerup",value:function(){this.imageDragManager.pointerup(),Object(k.h)(this.imageDom,v.e)}},{key:"resize",value:function(){this.imageStatus.isLoading||this.resizeThrottled()}},{key:"wheelHandler",value:function(e){if(!this.imageStatus.isLoading){var n=this.getScrollEdgeStatusThrottled(this.imageDom,this.wrapperContainer);if(e.preventDefault(),e.stopPropagation(),Object(k.KP)(e)||String(e.deltaY).indexOf(".")>-1&&e.ctrlKey)this.wheel(e);else this.imageDom&&this.imageDom.classList.contains(v.M)&&Object(k.Y)(e,this.wrapperContainer)&&!Object(k.x)(e,n)&&this.scrollThrottled(e)}}},{key:"wheel",value:function(e){var n=this;window.requestAnimationFrame((function(){n.mousemoveViewContainer();var r=e.deltaY,o=e.ctrlKey;1===e.deltaMode&&(r*=150);var i=b.a.windows?200:400,a=r/(o?100:i);n.zoom(Math.abs(a),a<0,!0),n.setDragStyleThrottled()}))}},{key:"scroll",value:function(e){if(!this.imageStatus.isLoading){this.mousemoveViewContainer();var n=-e.deltaX*v.Mv,r=-e.deltaY*v.Mv;this.move({offsetX:n,offsetY:r})}}},{key:"mousemoveViewContainer",value:function(){Object(k.h)(this.wrapperContainer,v.X),this.hideToolbarDebounce()}},{key:"mouseleaveViewContainer",value:function(){this.hideToolbarDebounce()}},{key:"setDragStyle",value:function(){var e=this.imageDom.getBoundingClientRect(),n=e.width,r=e.height,o=Object(k.e)(),i=o.width,a=o.height;n>i||r>a?Object(k.p)(this.imageDom,v.W):Object(k.h)(this.imageDom,v.W)}},{key:"hideToolbarFunc",value:function(){Object(k.p)(this.wrapperContainer,v.X)}},{key:"hideToolbarDebounce",value:function(){this.isMouseOverHeaderOrFooter?this.debounceFunc.cancel():this.debounceFunc()}},{key:"mouseenterHeaderFooter",value:function(){this.isMouseOverHeaderOrFooter=!0}},{key:"mouseleaveHeaderFooter",value:function(){this.isMouseOverHeaderOrFooter=!1,this.hideToolbarDebounce()}},{key:"destroy",value:function(){var e=this;Object(k.p)(this.wrapperContainer,v.X),Object(k.h)(this.wrapperContainer,v.f),Object(k.k)(this.container,"style","opacity: 0;"),this.handler.unbind(),window.setTimeout((function(){e.onClose()}),v.m)}},{key:"fadeOut",value:function(){this.destroy()}},{key:"hide",value:function(){return this.fadeOut(),this}}]),r}(B);r("dx_VYve");function H(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=p()(e);if(n){var i=p()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return f()(this,r)}}var W=function(e){u()(r,e);var n=H(r);function r(){return a()(this,r),n.apply(this,arguments)}return s()(r,[{key:"init",value:function(){return Object(k.p)(this.wrapperContainer,v.f),Object(k.p)(this.container,v.A),this.handler.bind(),this}},{key:"updateParams",value:function(e){var n=e.wrapperContainer,r=e.currentShowIndex,o=e.imageList,i=e.onShowIndexChange,a=e.onClose,c=e.onOriginalSizeChange,s=e.onZoomChange,l=e.onOffsetChange,u=e.onRotateChange;return this.wrapperContainer=n,this.currentShowIndex=r,this.imageList=o,this.onShowIndexChange=i,this.onClose=a,this.onOriginalSizeChange=c,this.onZoomChange=s,this.onOffsetChange=l,this.onRotateChange=u,this}}]),r}(F)},dx_vYyK:function(e,n,r){"use strict";r.d(n,"E",(function(){return u}));var o,i=r("dx_UtDZ"),a=r("dx_yzqx");function c(e){return function(e){if(!a.S.isFeed)return 0;var n=Number(e.lark)||1;switch(e.open_type){case"announce":n=o.ANNOUNCE;break;case"meeting_notes":n=o.MINUTE}return n}(i.urlHelper.parseQuery(e))}!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.FEED=1]="FEED",e[e.ANNOUNCE=2]="ANNOUNCE",e[e.MINUTE=3]="MINUTE"}(o||(o={}));var s=r("dx_UHze");function l(){return!(Object(s.E)()||a.S.isInVC||c(window.location.href)===o.ANNOUNCE||!a.S.isMobile&&c(window.location.href)===o.MINUTE)}function u(){return l()&&Object(i.getMinaConfig)("ccm.docx.auto_translate_enable",!1)}},dx_vo5z:function(e,n,r){"use strict";r.r(n),function(t){var e=r("dx_PcQO"),o=r("dx_UtDZ"),i=r("dx_cDcd"),a=r.n(i),c=r("dx_T55T"),s="DOCX_TRANSLATE_TOAST_KEY";n.default=function(){var n=Object(c.w)(),r=n.visible,l=n.setVisible,u=n.clickActionCb,d=function(){l(!1),u()};return Object(i.useEffect)((function(){r?o.Toast.show({key:s,duration:4e3,type:"info",content:t("CreationDoc_Translate_NoSimulDisplay_Banner"),style:{zIndex:1102},action:a.a.createElement(e.Button,{type:"text",color:"primary",onClick:d,style:{margin:"-2px 0"}},t("CreationDoc_Common_Desc_NotAgain"))}):o.Toast.remove(s)}),[r]),null}}.call(this,r("dx_E9Eu"))},dx_vsAT:function(e,n,r){"use strict";r.r(n);var o=r("dx_fFOs");n.default=o.S},dx_vuJs:function(e,n,r){"use strict";r.d(n,"N",(function(){return m})),r.d(n,"E",(function(){return g})),r.d(n,"j",(function(){return y})),r.d(n,"v",(function(){return b})),r.d(n,"Y",(function(){return _})),r.d(n,"B",(function(){return x}));var o=r("dx_o0o1"),i=r.n(o),a=r("dx_yXPU"),c=r.n(a),s=r("dx_lSNA"),l=r.n(s),u=r("dx_ukKW"),d=r("dx_gLp6"),f=r("dx_oCpo"),h=r("dx_J5JQ");function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){l()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function m(e){return f.N.includes(e.snapshot.type)}function g(e,n){return function(r){var o=r.record;if(function(e){return e.snapshot.type===h.I.Image}(o)){var a=v(v({},o.snapshot.image),n.getImageInfo(o.id));return{recordId:o.id,isHD:a.isHD||!1,previewImageUrl:a.url||"",src:function(){var e=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.c)({fileId:a.token,recordId:o.id,width:a.width,height:a.height,scale:a.scale,imageType:a.mimeType}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),originSrc:Object(u.T)(a.token,o.id),width:a.width,height:a.height,scale:a.scale,type:h.I.Image,mimeType:a.mimeType,token:a.token}}if(function(e){return e.snapshot.type===h.I.Diagram}(o)){var s=e.getBlockIdsByRecordId(o.id);if(0===s.length)return null;var l=s[0];if(e.hasBlockViewByBlockId(l)||e.layoutManager.renderNodeByIdSync(l),e.getBlockViewByBlockId(l).isBlankDiagram())return null;var f=function(){var n=c()(i.a.mark((function n(){var r,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.layoutManager.renderNodeById([l]);case 2:if(r=e.getBlockViewByBlockId(l),!(o=r.getSvg())){n.next=6;break}return n.abrupt("return",o);case 6:return n.next=8,new Promise((function(n){return e.addListenerOnce(d.Q.LOADED,n)}));case 8:return n.abrupt("return",r.getSvg());case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{type:h.I.Diagram,recordId:o.id,src:f}}return null}}function y(e,n){return function(e,n){var r=e.getBlockModelByBlockId(n),o=[];return function n(r){m(e.getRecord(r.record.id))&&o.push(r),r.children.length>0&&r.children.forEach((function(e){return n(e)}))}(r),o}(e,e.rootBlockId).map(g(e,n)).filter((function(e){return null!==e}))}var b=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Math.min((n.width-100)/(r?e.height:e.width),(n.height-80)/(r?e.width:e.height))};function _(e){var n=x(e);return window.URL.createObjectURL(n)}function x(e){var n=(new XMLSerializer).serializeToString(e);return n=n.replace(/\x08/g,""),new Blob([n],{type:"image/svg+xml"})}},dx_w3w7:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M10.672 11.366a5 5 0 01-8.114-4.623l.587.348a.312.312 0 00.465-.335l-.45-2.09a.313.313 0 00-.394-.234l-2.049.613a.313.313 0 00-.07.569l.768.454a6.25 6.25 0 0010.397 5.957l-1.14-.66zM4.52 3.484a5 5 0 017.952 4.54l-.684-.39a.312.312 0 00-.46.343l.485 2.082a.312.312 0 00.4.227l2.037-.647a.313.313 0 00.06-.57l-.672-.382A6.25 6.25 0 003.363 2.816l1.158.668z",fill:"#646A73"});n.S=function(e){return i.a.createElement("svg",a({width:15,height:15,viewBox:"0 0 15 15",fill:"none"},e),c)}},dx_w7Au:function(e,n,r){"use strict";(function(t){r.d(n,"t",(function(){return k}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_TSYQ"),p=r.n(h),v=r("dx_cDcd"),m=r.n(v),g=r("dx_TCww"),y=r("dx_EnrF"),b=r("dx_Yoqx"),_=r("dx_ZESM");function x(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var k=function(e){s()(r,e);var n=x(r);function r(){var e;o()(this,r);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={isHideMoreUser:!0},e.toggleMoreUser=function(n){n.stopPropagation(),e.setState({isHideMoreUser:!e.state.isHideMoreUser})},e}return a()(r,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props,n=e.historyItem,r=e.selected,o=e.isCurrent,i=this.state.isHideMoreUser,a=p()({selected:r,"has-padding":this.props.hasPadding,"history-timeline-item":!0}),c=n.editor_ids,s=n.editor_ids.length,l=s>8,u=s-8,d=p()(["history-timeline-more-user-icon",{"is-hide":i}]),f="";return f=i?t(1===u?"CreationDoc_Docs_Editors_ExpandList_content_singular":"CreationDoc_Docs_Editors_ExpandList_content_plural",{count:u}):t("CreationDoc_Docs_Editors_CollapseList_content",{count:s}),l&&i&&(c=c.slice(0,8)),m.a.createElement("div",{className:a,onClick:this.props.onClick},m.a.createElement("div",{className:"history-timeline-item-name"},Object(y.b)(n)),m.a.createElement("div",{className:"history-timeline-item-desc"},m.a.createElement(_.S,{desc:Object(y.V)(n),isCurrent:o})),m.a.createElement("div",{className:"history-timeline-item-user"},c.map((function(e){return m.a.createElement(b.I,{key:e,userId:e})})),l&&m.a.createElement("div",{className:"history-timeline-more-user",onClick:this.toggleMoreUser},m.a.createElement("span",{className:d},m.a.createElement(g.S,null)," "),m.a.createElement("span",null,f))))}}]),r}(m.a.Component)}).call(this,r("dx_E9Eu"))},dx_wcBS:function(e,n,r){"use strict";r.r(n),r.d(n,"inputPopUp",(function(){return h}));var o=r("dx_cDcd"),i=r.n(o),a=r("dx_faye"),c=r.n(a),s=r("dx_D8nn"),l=r("dx_i30i"),u=r("dx_h9hb"),d=document.createElement("div");function f(e,n){for(var r=e.selectionAPI,o=e.blockManager,i=s.X.isTriggerredByClick?(s.X.isTriggerredByClick=!1,s.X.selectedBlocks[0]):r.getSelection()[0],a=o.getBlockViewByBlockId(i.id).hostElement,c=a.getBoundingClientRect(),l=c.x,u=c.height,d=function(e){var n=window.getComputedStyle(e).paddingLeft;return parseFloat(n)||0}(a),f=null===n||void 0===n?void 0:n.getBoundingClientRect(),h=o.getRootBlockId(),p=n||o.getBlockViewByBlockId(h).hostElement,v=0,m=a;m&&p.contains(m);)v+=m.offsetTop,m=m.offsetParent;return{left:l-((null===f||void 0===f?void 0:f.left)||0)+d,top:v+u}}var h={addBookmark:function(e){var n=document.getElementById("docx-popup-container"),r=document.querySelector(".bear-web-x-container");null===n||void 0===n||n.appendChild(d);var o=f(e,r),a=o.left,s=o.top;c.a.render(i.a.createElement(l.S,Object.assign({},e,{left:a,top:s,scroller:r})),d)},addIframe:function(e){var n=document.getElementById("docx-popup-container"),r=document.querySelector(".bear-web-x-container");null===n||void 0===n||n.appendChild(d);var o=f(e,r),a=o.left,s=o.top;c.a.render(i.a.createElement(u.S,Object.assign({},e,{left:a,top:s,scroller:r})),d)},remove:function(){c.a.unmountComponentAtNode(d)}}},dx_wtrf:function(e,n,r){"use strict";r.d(n,"s",(function(){return I})),r.d(n,"c",(function(){return T})),r.d(n,"T",(function(){return D}));var o=r("dx_cDcd"),i=r.n(o),a=r("dx_faye"),c=r.n(a),s=(r("dx_yzqx"),r("dx_lwsE")),l=r.n(s),u=r("dx_W8MJ"),d=r.n(u),f=r("dx_W7W2"),h=r.n(f),p=r("dx_a1gu"),v=r.n(p),m=r("dx_Nsbk"),g=r.n(m),y=r("dx_HikJ"),b=(r("dx_BJva"),r("dx_y5yU"));function _(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=g()(e);if(n){var i=g()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return v()(this,r)}}var x=Object(b.r)(y.S),k=function(e){h()(r,e);var n=_(r);function r(){return l()(this,r),n.apply(this,arguments)}return d()(r,[{key:"render",value:function(){var e=this.props.size||130,n={width:"".concat(e,"px"),height:"".concat(e,"px")};return i.a.createElement("div",{className:"loading-container",style:n},i.a.createElement(x,null))}}]),r}(o.Component),E=k,O={size:130},S={position:"absolute",width:"100%",height:"100%",left:"0",top:"0",backgroundColor:"var(--bg-body)",zIndex:100},C={},w={};function I(e,n,r){if(e&&(w[n]=!0,!C[n])){var o=C[n]=document.createElement("div");o.className="css-loading-container",Object.assign(o.style,S),e.appendChild(o);var a=Object.assign({},O,r).size;c.a.render(i.a.createElement(E,{size:a}),o)}}function T(e){w[e]=!1;var n=C[e];n&&(c.a.unmountComponentAtNode(n),delete C[e],n.parentElement.removeChild(n))}function D(e){return w[e]}},dx_xMb4:function(e,n,r){"use strict";r.d(n,"H",(function(){return l}));var o=r("dx_lwsE"),i=r.n(o),a=r("dx_W8MJ"),c=r.n(a),s=r("dx_SOtg"),l=new(function(){function e(){i()(this,e),this.map=new Map}return c()(e,[{key:"initCollection",value:function(e){this.map.has(e)?this.error("using duplicate task_id when init"):this.map.set(e,{total_times:0,single_block_out_of_limit_times:0,total_fail_times:0,single_block_out_of_limit_fail_times:0})}},{key:"increaseTimes",value:function(e,n){var r=this.getRequestResult(e);r&&r[n]++}},{key:"send",value:function(e,n){var r=this.map.get(e);r?(Object(s.K)(r,n),this.map.delete(e)):this.error("send without task_id")}},{key:"getRequestResult",value:function(e){var n=this.map.get(e);return n||this.error("can't get request result with task_id: ".concat(e)),n}},{key:"error",value:function(e){console.error("[translate] ".concat(e))}}]),e}())},dx_ySTm:function(e,n,r){"use strict";var o=r("dx_cDcd"),i=r.n(o);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a.apply(this,arguments)}var c=i.a.createElement("path",{d:"M12.375 6h2.626a4.5 4.5 0 014.5 4.5v.375a.376.376 0 01-.375.375h-.75a.376.376 0 01-.375-.375V10.5a3 3 0 00-3-3h-2.626v.75a.375.375 0 01-.6.3l-2-1.5a.375.375 0 010-.6l2-1.5a.375.375 0 01.6.3V6zM4.5 18.75v-7.875a.75.75 0 01.75-.75h9.375a.75.75 0 01.75.75v7.875a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75zM6 18h7.875v-6.375H6V18z",fill:"#fff"});n.S=function(e){return i.a.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),c)}},dx_yhe3:function(e,n,r){"use strict";var o;function i(e){var n=e.src_lang,r=void 0===n?"en":n,o=e.target_lang,i=e.enable_auto_translate,a=e.shield_auto_translate_langs,c=void 0===a?[]:a,s=e.global_display_type,l=e.languages_display_type,u=void 0===l?{}:l,d={src_lang:r,target_lang:o,display_type:s,enable_auto_translate:i,enable_auto_translate_doc_body:e.enable_auto_translate_doc_body,enable_auto_translate_doc_comment:e.enable_auto_translate_doc_comment};return!c.includes(r)&&i||(d.enable_auto_translate=!1,d.enable_auto_translate_doc_body=!1,d.enable_auto_translate_doc_comment=!1),u[r]&&(d.display_type=u[r]),d}r.d(n,"V",(function(){return o})),r.d(n,"l",(function(){return i})),function(e){e[e.NONE=1]="NONE",e[e.ONLY_TRANSLATION=2]="ONLY_TRANSLATION",e[e.WITH_ORIGINAL=3]="WITH_ORIGINAL"}(o||(o={}))},dx_yruC:function(e,n,r){"use strict";r.d(n,"M",(function(){return h}));var o=r("dx_RIqP"),i=r.n(o),a=r("dx_lSNA"),c=r.n(a),s=r("dx_J4zp"),l=r.n(s),u=r("dx_cDcd"),d=r.n(u);function f(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function h(e){var n=e.basePosition,r=e.baseDom,o=e.onClickOutside,a=e.onClose,s=e.style,h=e.visible,v=e.children,m=Object(u.useState)(),g=l()(m,2),y=g[0],b=g[1],_=Object(u.useRef)(null),x=o||a;if(Object(u.useEffect)((function(){if(_.current){var n=_.current.getBoundingClientRect(),r=n.width,o=n.height,a=function(e,n,r){var o,a,c=e.placement,s=void 0===c?"bottom":c,l=e.adjustPlacement,u=void 0===l?[]:l,d=e.baseDom,f=e.basePosition,h=e.isAdjustWhenInvisible,v=void 0===h||h,m=e.checkScroll,g=void 0===m||m,y=function(e,n,r,o){var i=n.x,a=n.y;return p[e](i,a,r,o)},b=[s].concat(i()(u)),_={};if(d){var x=d.getBoundingClientRect(),k=x.width,E=x.height,O=x.x,S=x.y;Object.keys(p).forEach((function(e){_[e]=y(e,{x:O,y:S},k,E)}))}var C=e.container||document.body,w=C.offsetWidth,I=C.offsetHeight;b.find((function(i,c){var s=f||_[i],l=y(i,s,n,r),u=y(i,s,e.constantWidth||n,e.constantHeight||r);return g&&(u.x=u.x-C.scrollLeft,u.y=u.y-C.scrollTop),0===c&&(a=l),v?!!function(e,n,r,o,i){var a=e.x,c=e.y;if(a<0||c<0)return!1;var s={x:a+n,y:c+r},l=s.x,u=s.y;if(l>o||u>i)return!1;return!0}(u,e.constantWidth||n,e.constantHeight||r,w,I)&&(o=l,!0):(o=l,!0)})),o||(o=function(e,n,r){var o=e.x,i=e.y;if(o<0)return{x:0,y:i};if(o+n>r)return{x:r-n,y:i};return e}(a,n,w));return o}(e,r,o);a&&b(a)}}),[_,e]),function(e,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filter;Object(u.useEffect)((function(){var o=function(o){!e.current||e.current.contains(o.target)||r&&r(o,e.current)||n(o)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}}),[e,n,r])}(_,x,{filter:e.filterClickOutSide}),!h||!r&&!n)return null;var k=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?f(Object(r),!0).forEach((function(n){c()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({position:"fixed",left:y&&y.x,top:y&&y.y,visibility:y?"visible":"hidden"},s);return d.a.createElement("div",{style:k,ref:_},v)}var p={right:function(e,n,r,o){return{x:e,y:n-o/2}},left:function(e,n,r,o){return{x:e-r,y:n-o/2}},bottom:function(e,n,r){return{x:e-r/2,y:n}},top:function(e,n,r,o){return{x:e-r/2,y:n-o}},topLeft:function(e,n,r,o){return{x:e-r,y:n-o}},topRight:function(e,n,r,o){return{x:e,y:n-o}},bottomLeft:function(e,n,r){return{x:e-r,y:n}},bottomRight:function(e,n){return{x:e,y:n}}}},dx_z5DI:function(e,n,r){"use strict";r.r(n);var o=r("dx_H0H1");n.default=o.S},dx_z6zn:function(e,n,r){"use strict";(function(t){var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_UtDZ"),p=r("dx_cDcd"),v=r.n(p),m=r("dx_xI7u");function g(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var y=function(e){s()(r,e);var n=g(r);function r(){var e;o()(this,r);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).onClick=function(e){h.Toast.remove(m.b),h.EventEmitter.emit(h.EVENTS.PC.DOCS.HISTORY_X.TOGGLE,e,"undo_toast")},e}return a()(r,[{key:"render",value:function(){return v.a.createElement("div",null,t("history.undo_toast_content"),v.a.createElement("a",{className:"history-undo-toast-entry",onClick:this.onClick},t("common.see_history_lowercase")))}}]),r}(v.a.Component);n.S=v.a.createElement(y,null)}).call(this,r("dx_E9Eu"))},dx_zBt0:function(e,n,r){"use strict";r.r(n),function(t){r.d(n,"default",(function(){return P}));var e=r("dx_o0o1"),o=r.n(e),i=r("dx_yXPU"),a=r.n(i),c=r("dx_lSNA"),s=r.n(c),l=r("dx_lwsE"),u=r.n(l),d=r("dx_W8MJ"),f=r.n(d),h=r("dx_W7W2"),p=r.n(h),v=r("dx_a1gu"),m=r.n(v),g=r("dx_Nsbk"),y=r.n(g),b=r("dx_yBmk"),_=r("dx_PcQO"),x=r("dx_UtDZ"),k=r("dx_h6a8"),E=r("dx_wy2R"),O=r.n(E),S=r("dx_cDcd"),C=r.n(S),w=r("dx_c3cO"),I=r("dx_pP0Y"),T=r("dx_JFWd"),D=r("dx_C5Ih"),A=r("dx_C3pj");r("dx_Ut8A"),r("dx_iS57");function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,o)}return r}function R(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){s()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function N(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=y()(e);if(n){var i=y()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return m()(this,r)}}var P=function(e){p()(r,e);var n=N(r);function r(){var e;u()(this,r);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).state=R({},r.initState(e.props.reminderData)),e.handleDatePickerChange=function(n){var r=n.valueOf();e.handleStateChange({expireTime:r+e.setTime})},e.handleNotifyChange=function(){var n=a()(o.a.mark((function n(r){var i,a,c,s,l,u,d,f,h,p,v,m,g,y;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=r.isWholeDay,a=r.shouldNotify,c=r.setTime,s=r.jetLag,l=r.action,u=e.state,d=u.isWholeDay,f=u.shouldNotify,h=u.expireTime,p=O()(h).set(w.Z).valueOf(),m=f!==a,(v=d!==i)&&!i&&(c=Object(T.h)()),v&&i&&(p=O()(p).set(w.J).valueOf(),c=0),g=v||m?e.getJetLagList(i)[0].value:s,y={isWholeDay:i,shouldNotify:a,expireTime:p+c,jetLag:g},e.handleStateChange(y,l);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.handleStateChange=function(n,r){e.setState((function(){return R({},n)}),(function(){var n=e.props.reminderData.reminderId,o=e.state,i=o.isWholeDay,a=o.shouldNotify,c=o.expireTime,s={isWholeDay:i,shouldNotify:a,expireTime:c,notifyTime:c+o.jetLag,reminderId:n,action:r};e.props.onChange(s)}))},e.renderCheckbox=function(){var n=e.state.shouldNotify;return C.a.createElement(_.Checkbox,{style:{marginRight:8},disabled:!1,checked:n,onChange:function(n){return e.handleStateChange({shouldNotify:n.target.checked})}})},e}return f()(r,[{key:"componentDidUpdate",value:function(e){if(!Object(k.isEqual)(e.reminderData,this.props.reminderData)){var n=r.initState(this.props.reminderData);Object(k.isEqual)(n,this.state)||this.setState(n)}}},{key:"getJetLagList",value:function(e){return e?w.Y:w.R}},{key:"renderDatePicker",value:function(){var e=this.state.expireTime,n={lang:this.lang,value:e,onChange:this.handleDatePickerChange};return C.a.createElement(I.S,n)}},{key:"renderNotify",value:function(){var e=this.state,n=e.jetLag,r=e.isWholeDay,o=e.shouldNotify;return C.a.createElement(D.S,{key:this.props.reminderData.reminderId,isWholeDay:r,setTime:this.setTime,setTimeList:this.setTimeList,shouldNotify:o,jetLag:n,jetLagList:this.getJetLagList(r),onChange:this.handleNotifyChange})}},{key:"renderUser",value:function(e,n){return C.a.createElement("div",{className:"docx-reminder-popover-user-wrapper"},C.a.createElement("div",{className:"user-row"},e&&this.renderCheckbox(),n.length?C.a.createElement(A.S,{users:n}):null))}},{key:"renderTransTask",value:function(){var e=this.props,n=e.showTransTask,r=e.onTransTaskClick;return n?C.a.createElement("div",{className:"docx-reminder-popover-trans-task-wrapper"},C.a.createElement("div",{className:"trans-row",onClick:r},C.a.createElement(b.S,{className:"trans-icon"}),C.a.createElement("span",null,t("CreationDoc_Tasks_ConvertToTask_MenuOption")))):null}},{key:"renderDateTime",value:function(){var e=this.state,n=e.expireTime,r=e.isWholeDay;return C.a.createElement("div",{className:"docx-reminder-popover-date-time"},C.a.createElement("span",null,O()(n).format("LL")),C.a.createElement("span",null,!r&&"\uff0c".concat(O()(n).format("LT"))))}},{key:"renderSimplePopover",value:function(){var e=this.props,n=e.showCheckbox,r=e.users;return C.a.createElement(C.a.Fragment,null,this.renderDateTime(),this.renderUser(n,r))}},{key:"renderIntactPopover",value:function(){var e=this.props.users;return C.a.createElement(C.a.Fragment,null,this.renderDatePicker(),this.renderNotify(),this.renderUser(!1,e),this.renderTransTask())}},{key:"render",value:function(){var e=this.props.type;return C.a.createElement("div",{className:"docx-reminder-popover ".concat(e)},"simple"===e?this.renderSimplePopover():this.renderIntactPopover())}},{key:"lang",get:function(){return x.LANG_MAP.zh?w.T.ZH:x.LANG_MAP.ja?w.T.JA:w.T.EN}},{key:"setTime",get:function(){var e=this.state.expireTime;return e-O()(e).set(w.Z).valueOf()}},{key:"setTimeList",get:function(){return Object(T.f)(this.setTime)}}],[{key:"initState",value:function(e){var n=e.isWholeDay,r=void 0!==n&&n,o=e.shouldNotify,i=void 0===o||o,a=e.expireTime,c=e.notifyTime;return{expireTime:a,isWholeDay:r,shouldNotify:i,reminderId:e.reminderId,jetLag:c-a}}}]),r}(S.PureComponent)}.call(this,r("dx_E9Eu"))},dx_zgZl:function(e,n,r){"use strict";r.r(n),function(t){r.d(n,"RECENT_VIEW_BLOCK_MIN_WIDTH",(function(){return C})),r.d(n,"default",(function(){return w}));var e=r("dx_lwsE"),o=r.n(e),i=r("dx_W8MJ"),a=r.n(i),c=r("dx_W7W2"),s=r.n(c),l=r("dx_a1gu"),u=r.n(l),d=r("dx_Nsbk"),f=r.n(d),h=r("dx_m3ds"),p=r("dx_PcQO"),v=r("dx_UtDZ"),m=r("dx_cDcd"),g=r.n(m),y=r("dx_JnYQ"),b=r("dx_ts31");r("dx_Zx3K");function _(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=f()(e);if(n){var i=f()(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return u()(this,r)}}var x=Object(v.getWikiRecentFunctions)(),k=x.DataClient,E=x.DataClientProvider,O=x.ModuleLoader,S=x.recentUpdateNodeListModule,C=320,w=function(e){s()(r,e);var n=_(r);function r(e){var i;o()(this,r),(i=n.call(this,e)).dataClient=void 0,i.selectedOption=i.props.displaySize,i.showSuccessToast=function(e){v.Toast.show({key:"wiki-recent-success",type:"success",content:e})},i.handleClickPopupOkBtn=function(e){e.stopPropagation();var n=i.props,r=n.setDisplaySizePickerVisible,o=n.setDisplaySize,a=i.selectedOption;o(a),r(!1),i.showSuccessToast(t("CreationDoc_Wiki_UpdatesBlock_SetSuccessfully_Toast")),Object(v.collectEvent)("ccm_doc_wiki_block_click",{click:"line_number",view_title:"wiki_recent_update",target:"none",line_num:a})},i.handleClickPopupCancelBtn=function(e){null===e||void 0===e||e.stopPropagation(),(0,i.props.setDisplaySizePickerVisible)(!1)},i.handleClickDisplaySizeOption=function(e){i.selectedOption=e},i.renderDiplaySizePicker=function(){var e=i.props,n=e.displaySize,r=e.displaySizePickerVisible;return g.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},g.a.createElement(p.Dialog,{className:"".concat(y.A,"--popup"),visible:r,title:t("CreationDoc_Wiki_UpdatesBlock_NumOfRows"),size:"small",okText:t("common.confirm"),enableCancelButton:!1,bodyStyle:{marginBottom:"0"},onOk:i.handleClickPopupOkBtn,onCancel:i.handleClickPopupCancelBtn},g.a.createElement(p.Select,{allowClear:!1,defaultValue:n,onChange:i.handleClickDisplaySizeOption},y.pk.map((function(e){return g.a.createElement(p.Select.Option,{key:e,value:e},"".concat(e," ").concat(t("common.row")))})))))},i.withDataSDKWrapper=function(e){return g.a.createElement(E,{client:i.dataClient},g.a.createElement(O,{modules:[S]},e))};var a=Object(v.getWikiRecentFunctions)().customRequest;return i.dataClient=new k({id:"wiki-recent-block",requestClient:a()}),i}return a()(r,[{key:"renderContent",value:function(){var e=this.props,n=e.editable,r=e.blockId,o=e.spaceId,i=e.displaySize,a=e.isSelected,c=e.onDataUpdate,s=e.onClickNoContentBtn,l=e.onStatusChange;return g.a.createElement(b.s,{spaceId:o,displaySize:i,blockId:r,editable:n,isSelected:a,onDataUpdate:c,onClickNoContentBtn:s,onStatusChange:l})}},{key:"render",value:function(){var e=h.S.isMobile?0:C;return g.a.createElement("div",{className:"".concat("block-recent","--view")},this.withDataSDKWrapper(g.a.createElement("div",{style:{minWidth:e}},this.renderContent(),this.renderDiplaySizePicker())))}}]),r}(m.PureComponent)}.call(this,r("dx_E9Eu"))}}]);
//# sourceMappingURL=//slardar.bytedance.net/api_v2/browser/jserr/get_sourcemap?bid=docs_pc&js_filename=docx_index_delay.a4b1cd54.chunk.js.map